function postCommanInNumberPlugin(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function initOnlineChat(n,t){var i=`

<span class="onlineChat" >
    <span class="onlineChatShadowBox" ></span>
    <span class="onlineChatHeader">
        <span class="onlineChatHeaderMenueButton" ><span></span><span></span><span></span></span>
        <span class="onlineChatHeaderTitleSection" ></span>
        <span class="onlineChatHeaderActionButtons" >
            <span class="fa fa-times onlineChatHeaderActionButtonClose" ></span>
        </span>
    </span>
    <span class="onlineChatMessages" >
    </span>
    <span class="onlineChatInputs">
        <span class="onlineChatInputInner">
            <textarea placeholder="پیغام شما" maxlength="4000" class="ocUserInputTextBox"></textarea>
            <span class="messageButton fa fa-paperclip" ></span>
            <span class="messageButton fa fa-camera" ></span>
        </span>
        <span style="margin-right:5px;" class="ocSendButton fa fa-microphone " ></span>

    </span>
    <span class="onlineChatMenue mainMenue" >
        <span class="onlineChatMenueItem enableDisableNotifiSound" ><span class="fa fa-volume-mute"></span>فعال کردن صدا</span>
        <span class="onlineChatMenueItem rigisterEmail" ><span class="fa fa-at"></span> ثبت ایمیل</span>
        <span class="onlineChatMenueItem sendMap" ><span class="fa fa-map-marker-alt"></span>ارسال نقشه</span>
    </span>
    <span class="onlineChatMenue emailMenue" >
        <span class="onlineChatMenueHeader" ><span class="fa fa-angle-right moveBackButtonForRigisterMobile"  ></span>ثبت ایمیل</span>
        <input class="menuInput" type="text" placeholder="ایمیل" />
        <a class="button mainBtn" >ذخیره</a>
        <a class="button secountBtn cancellAllMenus">انصراف</a>
    </span>
    <span class="onlineChatMenue uploadFile" >
        <span class="onlineChatMenueHeader" ><span class="fa fa-angle-right moveBackButtonForRigisterMobile"></span>ارسال فایل</span>
        <span class="fileUploadCl button mainBtn">
            ارسال
            <input accept=".jpg,.jpeg,.png,.doc,.pdf" type="file" name="mainFile" placeholder="لطفا فایل را انتخاب کنید" />
        </span>
        <a class="button secountBtn cancellAllMenus">انصراف</a>
    </span>
    <span class="onlineChatMenue sendMapMenu" >
        <span class="onlineChatMenueHeader" ><span class="fa fa-angle-right moveBackButtonForRigisterMobile"></span>ارسال نقشه</span>
        <span class="inputMapHolder" >در حال بارگزاری نقشه</span>
        <a class="button mainBtn" >ارسال</a>
        <a class="button secountBtn cancellAllMenus">انصراف</a>
    </span>
</span>

`;$(".onlineChat").length>0&&$(".onlineChat")[0].close();$("body").append(i);initOnlineChantJS(t,n)}function initOnlineChantJS(n,t){if($(".onlineChat").length>0){var i=$(".onlineChat")[0];i.connectionTId=t;initOnlineChantGetOrCreateNewId(i);initOnlineChantInitMessages(i);initOnlineChantNotification(i);initOnlineChantHeaderButtons(i);initOnlineChantActiveAndDeactiveNotifySound(i);initOnlineChantRigesterEmail(i);initOnlineChantUploadNewFile(i,n);initOnlineChantShowMapMenu(i,n);initOnlineChantInitCancellButton(i);initOnlineChantUserTyping(i);initOnlineChantSendMessage(i,n);initOnlineChantSocket(i,n);initOnlineChantInitAskForLoginMethods(i);initOnlineChantInitWhatToDoAfterUserLogin(i);bindCompanyTitle(i)}}function bindCompanyTitle(n){postForm("/Home/GetCompanyTitle",new FormData,function(n){n&&n.constructor==String&&$(this.curObj).find(".onlineChatHeaderTitleSection").text(n)}.bind({curObj:n}))}function initOnlineChantInitWhatToDoAfterUserLogin(n){window.whatToDoAfterUserLogin&&whatToDoAfterUserLogin.push({key:"onlineChat",curFun:function(){this.onlineChatObj.close();setTimeout(function(){initOnlineChat()},100)}.bind({onlineChatObj:n})})}function initOnlineChantInitAskForLoginMethods(n){n.askUserForLogin=function(){this.addNewMessage({message:"جهت انجام این کار باید ابتدا لاگین کنید",isAdmin:!0,cTime:(new Date).getHours()+":"+(new Date).getMinutes(),type:"loginQuestion"})};n.pintUserLoginQuestion=function(n){n&&n.message&&($(this).find(".onlineChatMessages").append(this.getLoginQuestionTemplate(n)),this.moveScrollToBottom(),this.bindYesOrNoLoginButtonEvent())};n.getLoginQuestionTemplate=function(n){return`
          <span class="onlineChatMessageItem ${n.isAdmin?"makeAdminMessage":""}">
            <span class=" userIcon" ><span class="fa fa-user" ></span></span>
            <span class="userMessage"><span>${n.message+this.getYesOrNoForLogin()}</span></span>
            <span class="userTime" >${n.cTime}</span>
        </span>
`};n.getYesOrNoForLogin=function(){return`
        <span class="yesOrNoCtrl" >
            <span class="holderYesOrNoButton">
                <span class="yesOrNoeMessageButton yesButton fa fa-check" ></span>
                <span class="yesOrNoeMessageButton noButton fa fa-do-not-enter" ></span>
            </span>
            <span class="yesOrNoCtrlTitle" >آیا تمایل به ورود دارید ؟</span>
        </span>
`};n.bindYesOrNoLoginButtonEvent=function(){var t=$(this).find(".onlineChatMessages"),n=t.find(".onlineChatMessageItem:last-child");n.find(".yesOrNoeMessageButton").length>0&&n.find(".yesOrNoeMessageButton").click(function(n){var t,i;n.preventDefault();n.stopPropagation();t=$(this).closest(".holderYesOrNoButton");t.hasClass("questionButtonSelectedSelected")||(i=$(this).hasClass("yesButton"),$(this).addClass("showJustThisBUtton"),t.addClass("questionButtonSelectedSelected"),$(this).closest(".yesOrNoCtrl").css("right","0px"),i&&initOnlineChantUserLogin($(this).closest(".onlineChat")[0]))})}}function initOnlineChantGetOrCreateNewId(n){var t=localStorage.getItem("onlineChatSupportId");t||(t=uuidv4RemoveDash(),localStorage.setItem("onlineChatSupportId",t));n.clientId=t}function initOnlineChantSocket(n,t){var i,r;if(window.signalR){i=(new signalR.HubConnectionBuilder).withUrl("/support").build();i.on("groupMessages",function(n){this.onlineChatObj.addGroupMessages(n)}.bind({onlineChatObj:n}));i.on("joinSuccess",function(){this.isAdmin?this.onlineChatObj.loadMessageForAdmin(this.onlineChatObj.connectionTId):this.onlineChatObj.loadMessage(this.onlineChatObj.clientId)}.bind({onlineChatObj:n,isAdmin:t}));i.on("reciveUserMessageForAdmin",function(n){n.isAdmin=!0;this.onlineChatObj.addNewMessage(n)}.bind({onlineChatObj:n}));i.on("notification",function(n){n.isError||this.onlineChatObj.closeAllMenus();this.onlineChatObj.newNotification(n)}.bind({onlineChatObj:n}));i.on("reciveUserMessage",function(n){n.isAdmin=!0;this.onlineChatObj.addNewMessage(n)}.bind({onlineChatObj:n}));i.on("typing",function(){this.onlineChatObj.showUserTyping()}.bind({onlineChatObj:n}));i.on("userIdForUploadingFile",function(n){this.onlineChatObj.uploadFileForAdmin(n)}.bind({onlineChatObj:n}));i.on("userIdForUploadingVoice",function(n){this.onlineChatObj.uploadVoiceForAdminUrlFirst(n)}.bind({onlineChatObj:n}));i.on("messageHistory",function(n){if(console.log(n),n&&n.length>0)for(var t=0;t<n.length;t++)this.onlineChatObj.addNewMessage(n[t])}.bind({onlineChatObj:n}));r=null;i.onclose(function(){this.connection.dontTryAgin||(r=setInterval(function(){i.state=="Disconnected"?i.start():i.state=="Connected"&&clearInterval(r)},3e3))}.bind({connection:i}));i.start().then(function(){this.curThis.newNotification({isError:!1,message:"ارتباط برقرار شد"});this.curThis.join(this.curThis.connectionTId)}.bind({curThis:n,isAdmin:t})).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.log(n.toString())}.bind({curThis:n}));n.connection=i;n.join=function(n){this.connection.invoke("Join",this.clientId,n).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.userTyping=function(){this.connection.invoke("UserTyping",this.clientId).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.userTypingForAdmin=function(){this.connection.invoke("UserTypingForAdmin",this.connectionTId).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.uploadFileUser=function(n){this.connection.invoke("UploadFileUser",this.clientId,n).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.getUserIdAndUploadFile=function(n){this.pendingUploadFile=n;this.connection.invoke("GetUserId",this.connectionTId).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.getUserIdAndUploadVoice=function(){this.connection.invoke("GetUserIdForVoice",this.connectionTId).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.uploadFileAdmin=function(n){this.connection.invoke("UploadFileAdmin",this.connectionTId,n).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.selectGroup=function(n){this.connection.invoke("SelectGroup",n).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.likeAnswer=function(n,t){this.connection.invoke("LikeDislike",n,t).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.uploadVoiceForUser=function(n){this.connection.invoke("UploadVoiceForUser",this.clientId,n).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.uploadVoiceForAdmin=function(n){this.connection.invoke("UploadVoiceForAdmin",this.connectionTId,n).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.sendMessage=function(n){this.connection.invoke("SendMessage",n,this.clientId).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.sendMapForUser=function(n){this.connection.invoke("SendMapForUser",n,this.clientId).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.sendMapForAdmin=function(n){this.connection.invoke("SendMapForAdmin",n,this.connectionTId).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.sendMessageForAdmin=function(n,t){this.connection.invoke("SendMessageForAdmin",n,t).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.loadMessage=function(){this.connection.invoke("GetMessageList",this.clientId).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.loadMessageForAdmin=function(n){this.connection.invoke("GetMessageListForAdmin",n).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))};n.subScribeEmail=function(n){this.connection.invoke("SubscribeEmail",n).catch(function(n){return this.curThis.newNotification({isError:!0,message:n.toString()}),console.error(n.toString())}.bind({curThis:this}))}}}function initOnlineChantUserLogin(n){isUserLogin||postForm("/Home/GetLoginModalConfig",new FormData,function(t){t&&t.panels&&t.panels[0].moduals&&t.panels[0].moduals[0].panels&&($("#"+t.panels[0].id).remove(),$("#"+t.panels[0].moduals[0].panels[0].id).length>0&&$("#"+t.panels[0].moduals[0].panels[0].id).remove(),generateForm(t.panels[0].moduals[0],$(n).find(".onlineChatMessages"),!0),n.moveScrollToBottom())})}function initOnlineChantSendMessage(n,t){n.isMic=function(){return $(this).find(".ocSendButton").hasClass("fa-microphone")};$(n).find(".ocUserInputTextBox").keyup(function(){var n=$(this).val();n?$(this).closest(".onlineChatInputs").find(".ocSendButton").removeClass("fa-microphone").addClass("fa-arrow-up"):$(this).closest(".onlineChatInputs").find(".ocSendButton").removeClass("fa-arrow-up").addClass("fa-microphone")});$(n).find(".ocUserInputTextBox").keypress(function(){t?this.onlineChatObj.userTypingForAdmin():this.onlineChatObj.userTyping()}.bind({onlineChatObj:n}));$(n).find(".ocUserInputTextBox").on("input",function(){t?this.onlineChatObj.userTypingForAdmin():this.onlineChatObj.userTyping()}.bind({onlineChatObj:n}));$(n).find(".ocSendButton").mousedown(function(){n.isMic()&&(n.recordAudio(),$(this).css("background-color","red"))});$(n).find(".ocSendButton").bind("touchstart",function(){n.isMic()&&(n.recordAudio(),$(this).css("background-color","red"))});$(n).find(".ocSendButton").mouseup(function(){n.isMic()&&($(this).css("background-color","#0e72ed"),n.stopAndPostRecordAudio())});$(n).find(".ocSendButton").bind("touchend",function(t){if(n.isMic())return $(this).css("background-color","#0e72ed"),n.stopAndPostRecordAudio(),t.preventDefault(),t.stopPropagation(),!1});$(n).find(".ocSendButton").click(function(){var n=$(this).closest(".onlineChat")[0],i,r;n.isMic()||(i=$(this).closest(".onlineChatInputs").find(".ocUserInputTextBox"),r=i.val(),t==!0?n.sendMessageForAdmin(r,n.connectionTId):n.sendMessage(r),n.addTextMessage({message:r,cTime:(new Date).getHours()+":"+(new Date).getMinutes()}),i.val(""),i.keyup())});initAutoHeightForInputText(n);n.updateInputHeight=function(t){t+=4;t>=30&&($(n).find(".ocUserInputTextBox").css("height",t+"px"),$(n).find(".onlineChatMessages").css("height","calc(100% - "+(86+t)+"px)"))};initRecordAndPostAudioFunction(n,t);n.addVoice=function(n){$(this).find(".onlineChatMessages").append(`
         <span class="onlineChatMessageItem ${n.isAdmin?"makeAdminMessage":""}">
            <span class=" userIcon" ><span class="fa fa-user" ></span></span>
            <span class="userMessage"><span style="display:block;width:100%;" ><audio style="width:100%;" controls><source src="${n.link}" type="audio/ogg"></audio></span>
        </span>
`)}}function detectBrowser(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?"Opera":navigator.userAgent.indexOf("Chrome")!=-1?"Chrome":navigator.userAgent.indexOf("Safari")!=-1?"Safari":navigator.userAgent.indexOf("Firefox")!=-1?"Firefox":navigator.userAgent.indexOf("MSIE")!=-1||!!document.documentMode==!0?"IE":"Unknown"}function initRecordAndPostAudioFunction(n,t){n.chunks=[];n.recordAudio=function(){isUserLogin||(this.newNotification({isError:!0,message:"لطفا ابتدا لاگین کنید"}),this.askUserForLogin());navigator.mediaDevices.getUserMedia||this.newNotification({isError:!0,message:"امکان ارسال صدا در مرورگر شما وجود ندارد"});navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(i){var r={type:"audio/webm; codecs=opus",mimeType:"audio/webm; codecs=opus"},f=detectBrowser()=="Firefox";f==!0&&(r={type:"audio/ogg; codecs=opus",mimeType:"audio/ogg; codecs=opus"});const u=new MediaRecorder(i,r);this.curThis.mediaRecorder=u;u.onstop=function(){var i=new Date,o=i.getHours()+"-"+i.getMinutes()+"-"+i.getSeconds()+"-"+i.getMilliseconds(),e,u;const s=new Blob(this.curThis.chunks,r);e=new File([s],o+(f?".ogg":".webm"),r);this.curThis.chunks=[];u=new FormData;u.append("mainFile",e);t?(n.pendingUploadVoice=u,n.getUserIdAndUploadVoice()):postForm("/Home/UploadNewVoiceForOnlineChat",u,function(t){t&&(typeof t=="string"||t instanceof String)&&(n.addNewMessage({isAdmin:!1,type:"voice",cTime:(new Date).getHours()+":"+(new Date).getMinutes(),link:t}),n.uploadVoiceForUser(t))})}.bind({curThis:this.curThis});u.ondataavailable=function(n){this.curThis.chunks.push(n.data)}.bind({curThis:this.curThis});u.start()}.bind({curThis:this}),function(n){this.curThis.newNotification({isError:!0,message:n})}.bind({curThis:this}))};n.stopAndPostRecordAudio=function(){this.mediaRecorder&&this.mediaRecorder.stop()};n.uploadVoiceForAdminUrlFirst=function(t){var i=this.pendingUploadVoice;i.append("userId",t);postForm("/WebMainAdmin/OnlineSupport/UploadNewVoiceForOnlineChat",i,function(t){t&&(typeof t=="string"||t instanceof String)&&(n.addNewMessage({isAdmin:!1,type:"voice",cTime:(new Date).getHours()+":"+(new Date).getMinutes(),link:t}),n.uploadVoiceForAdmin(t))})}}function removeTags(n){return(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")}function initAutoHeightForInputText(n){var i=uuidv4RemoveDash(),t=$(n).find(".ocUserInputTextBox"),r;t[0].inputAutoHeightId=i;r=t.width();$("body").append('<div style="height:0px;width:0px;overflow:hidden;"><div style="-ms-word-break: break-all;word-break: break-all;padding:2px;line-height:26px;width:'+r+'px" id="'+i+'"><\/div><\/div>');t.keyup(function(t){var i=$(this).val(),r,u;i=i+t.key;i&&(i=removeTags(i),i=i.replace(/\n/g,"<br />"),r=$(this)[0].inputAutoHeightId,$("#"+r).html(i),u=$("#"+r).height(),n.updateInputHeight(u))})}function initOnlineChantUserTyping(n){n.showUserTyping=function(){$(this).find(".userTypingMessage").length==0&&($(this).find(".onlineChatMessages").append(`
 <span class="onlineChatMessageItem makeAdminMessage">
        <span class=" userIcon" ><span class="fa fa-user" ></span></span>
        <span style="text-align:left;" class="userMessage userTypingMessage"><span style="background-color:white;"><span style="animation-delay:0.4s" ></span><span style="animation-delay:0.3s" ></span><span style="animation-delay:0.2s"></span><span style="animation-delay:0.1s"></span></span></span>
        <span style="visibility: hidden" class="userTime" ></span>
    </span>
`),this.moveScrollToBottom());clearTimeout(n.clearUserTypingInterval);n.clearUserTypingInterval=setTimeout(function(){this.curThis.removeUserTyping()}.bind({curThis:n}),3e3)};n.removeUserTyping=function(){$(this).find(".userTypingMessage").length>0&&$(this).find(".userTypingMessage").closest(".onlineChatMessageItem").remove()}}function initOnlineChantInitMessages(n){n.addGroupMessages=function(t){t&&t.length>0&&(this.showUserTyping(),setTimeout(function(){this.onlineChatObj.addGroupMessage(this.items)}.bind({onlineChatObj:n,items:t}),500))};n.addGroupMessage=function(n){if(n&&n.length>0){var t=n.splice(1);this.addNewMessage(n[0]);this.addGroupMessages(t)}};n.bindLikeOrDisLikeButtonEvent=function(){var t=$(this).find(".onlineChatMessages"),n=t.find(".onlineChatMessageItem:last-child");n.find(".likeOrDislikeMessageButton").length>0&&n.find(".likeOrDislikeMessageButton").click(function(n){var t,i;n.preventDefault();n.stopPropagation();t=$(this).closest(".holderLikeDislikeButton");t.hasClass("likeButtonSelectedSelected")||(i=$(this).hasClass("likeButton"),$(this).addClass("showJustThisBUtton"),t.addClass("likeButtonSelectedSelected"),$(this).closest(".likeOrDislikeCtrl").css("right","0px"),$(this).closest(".onlineChat")[0].likeAnswer(Number.parseInt($(this).closest(".likeOrDislikeCtrl").attr("data-id")),i))})};n.moveScrollToBottom=function(){var t=$(this).find(".onlineChatMessages"),n,i,r;t.animate({scrollTop:t[0].scrollHeight},400);n=t.find(".onlineChatMessageItem:last-child");n.find(".userTypingMessage").length>0&&(n=n.prev());n.hasClass("makeAdminMessage")&&!n.hasClass("makeMessToButton")&&n.prev().hasClass("makeAdminMessage")&&n.prev().find(".userIcon").css("visibility","hidden");i=(n.attr("class")+"").replace("messagePaddingTop","").replace(/  /g," ").trim();r=(n.prev().attr("class")+"").replace("messagePaddingTop","").replace(/  /g," ").trim();(n.prev().find(".likeOrDislikeCtrl").length>0||n.prev().find(".yesOrNoCtrl").length>0||i&&r&&i!=r)&&n.addClass("messagePaddingTop")};n.addNewMessage=function(n){n&&(n.type=="text"?(this.removeUserTyping(),this.addTextMessage(n)):n.type=="button"?(this.removeUserTyping(),this.addButtonQuestion(n),this.moveScrollToBottom(!0)):n.type=="link"?(this.removeUserTyping(),this.addLink(n),this.bindLikeOrDisLikeButtonEvent(),this.moveScrollToBottom()):n.type=="loginQuestion"?(this.removeUserTyping(),this.pintUserLoginQuestion(n),this.moveScrollToBottom()):n.type=="file"?(this.removeUserTyping(),this.addFile(n),this.moveScrollToBottom()):n.type=="map"?(this.removeUserTyping(),this.addMap(n),this.moveScrollToBottom()):n.type=="voice"&&(this.removeUserTyping(),this.addVoice(n),this.moveScrollToBottom()))};n.addLink=function(n){$(this).find(".onlineChatMessages").append(`
    <a style="padding-top:30px;" target="_blank" href="${n.link}" class="onlineChatMessageItem ${n.isAdmin?"makeAdminMessage":""} ">
        <span class=" userIcon" ></span>
        <span class="userMessage">
            <span style="padding:0px;">
                <span class="linkTitleDescriptionH">
                    <span class="linkTitle"><span class="fa fa-external-link ocExtenalLink"></span> ${n.title}</span>
                    <span class="linkDescription">${n.message+(n.hasLike?this.getLikeDislikeButtonTemplate(n):"")}</span>
                </span>
            </span>
        </span>
        <span class="userTime" ></span>
    </a>
`)};n.addButtonQuestion=function(t){if($(this).find(".onlineChatMessages").append(`
    <span ${t.id?'data-id="'+t.id+'"':""} data-msg="${t.message}" class="onlineChatMessageItem ${t.isAdmin?"makeAdminMessage":"makeUserButton"} makeMessToButton">
        <span class=" userIcon" ></span>
        <span class="userMessage"><span style="font-weight:bold;" >${t.message}</span></span>
        <span class="userTime" ></span>
    </span>
`),t.isAdmin){var i=n;$(this).find(".onlineChatMessages").find(".onlineChatMessageItem:last-child").click(function(){i.addNewMessage({type:"button",message:$(this).attr("data-msg"),cTime:(new Date).getHours()+":"+(new Date).getMinutes(),isAdmin:!1});i.showUserTyping();i.selectGroup(Number.parseInt($(this).attr("data-id")))})}};n.getLikeDislikeButtonTemplate=function(n){return`
        <span data-id="${n.id}" class="likeOrDislikeCtrl" >
            <span class="holderLikeDislikeButton">
                <span class="likeOrDislikeMessageButton likeButton fa fa-thumbs-up" ></span>
                <span class="likeOrDislikeMessageButton dislikeButton fa fa-thumbs-down" ></span>
            </span>
            <span class="likeOrDislikeCtrlTitle" >آیا این پاسخ مفید بوده است؟</span>
        </span>
`};n.addTextMessage=function(n){n&&n.message&&($(this).find(".onlineChatMessages").append(this.getTextMessageTemplate(n)),this.moveScrollToBottom(),this.bindLikeOrDisLikeButtonEvent())};n.getTextMessageTemplate=function(n){return`
    <span class="onlineChatMessageItem ${n.isAdmin?"makeAdminMessage":""}">
        <span class=" userIcon" ><span class="fa fa-user" ></span></span>
        <span class="userMessage"><span>${removeTags(n.message)+(n.hasLike?this.getLikeDislikeButtonTemplate(n):"")}</span></span>
        <span class="userTime" >${n.cTime}</span>
    </span>
`}}function initOnlineChantInitCancellButton(n){$(n).find(".cancellAllMenus").click(function(){$(this).closest(".onlineChat").find(".onlineChatShadowBox").click()})}function initOnlineChantRigesterEmail(n){n.openRegisterEmail=function(){this.closeMainMenue(".mainMenue");setTimeout(function(){this.curThis.openMainMenue(".emailMenue")}.bind({curThis:this}),200);$(this).find(".emailMenue input[type=text]").val("")};$(n).find(".rigisterEmail").click(function(){$(this).closest(".onlineChat")[0].openRegisterEmail()});$(n).find(".emailMenue").find(".moveBackButtonForRigisterMobile").click(function(){$(this).closest(".onlineChat")[0].closeMainMenue(".emailMenue");setTimeout(function(){this.curThis.openMainMenue(".mainMenue")}.bind({curThis:$(this).closest(".onlineChat")[0]}),200)});$(n).find(".emailMenue").find(".mainBtn").click(function(){var n=$(this).closest(".onlineChat")[0],t=$(this).closest(".emailMenue").find("input[type=text]").val();n.subScribeEmail(t)})}function initOnlineChantShowMapMenu(n,t){n.openMap=function(){this.closeMainMenue(".mainMenue");setTimeout(function(){this.curThis.openMainMenue(".sendMapMenu");setTimeout(function(){executeArrFunctions()},500)}.bind({curThis:this}),200);var n=$(this).find(".sendMapMenu .inputMapHolder");n.find(".mapCtrl").length==0&&n.html(getMapTemplate({parentCL:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",names:{lat:"mapLat",lon:"mapLon",zoom:"mapZoom"},width:"100%",height:"260px",type:"map",label:"لطفا موقعیت را انتخاب کنید"}))};n.addMap=function(n){var i=getMapTemplate({parentCL:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",names:{lat:"mapLat",lon:"mapLon",zoom:"mapZoom"},width:"100%",height:"260px",type:"map",label:"",readonly:!0}),t;$(this).find(".onlineChatMessages").append(`
         <span class="onlineChatMessageItem ${n.isAdmin?"makeAdminMessage":""}">
            <span class=" userIcon" ><span class="fa fa-user" ></span></span>
            <span class="userMessage"><span style="display:block;width:100%;" >${i}</span>
        </span>
`);executeArrFunctions();t=$(this).find(".onlineChatMessageItem:last-child");bindForm(n,t)};$(n).find(".sendMapMenu .mainBtn").click(function(){var u=$(this).closest(".sendMapMenu"),i=getFormData(u),r;i.get("mapLat")&&i.get("mapLon")&&i.get("mapZoom")?(n.closeAllMenus(),r={isAdmin:!1,type:"map",cTime:(new Date).getHours()+":"+(new Date).getMinutes(),mapLat:i.get("mapLat"),mapLon:i.get("mapLon"),mapZoom:i.get("mapZoom")},n.addNewMessage(r),t?n.sendMapForAdmin(r):n.sendMapForUser(r)):n.newNotification({message:"لطفا ابتدا مختصات خود را انتخاب کنید",isError:!0})});$(n).find(".sendMap").click(function(){$(this).closest(".onlineChat")[0].openMap()});$(n).find(".sendMapMenu").find(".moveBackButtonForRigisterMobile").click(function(){$(this).closest(".onlineChat")[0].closeMainMenue(".sendMapMenu");setTimeout(function(){this.curThis.openMainMenue(".mainMenue")}.bind({curThis:$(this).closest(".onlineChat")[0]}),200)})}function initOnlineChantUploadNewFile(n,t){n.openUploadFile=function(){this.closeMainMenue(".mainMenue");isUserLogin?setTimeout(function(){this.curThis.openMainMenue(".uploadFile")}.bind({curThis:this}),200):n.askUserForLogin()};$(n).find(".fa-camera").click(function(){$(this).closest(".onlineChat")[0].openUploadFile()});$(n).find(".fa-paperclip").click(function(){$(this).closest(".onlineChat")[0].openUploadFile()});n.uploadFileForAdmin=function(t){var i=this.pendingUploadFile;i&&(i.append("userId",t),postForm("/WebMainAdmin/OnlineSupport/UploadNewFileForOnlineChat",i,function(t){t&&(typeof t=="string"||t instanceof String)&&(n.closeAllMenus(),n.addNewMessage({isAdmin:!1,type:"file",cTime:(new Date).getHours()+":"+(new Date).getMinutes(),link:t}),n.uploadFileAdmin(t))}))};n.addFile=function(n){$(this).find(".onlineChatMessages").append(`
    <span class="onlineChatMessageItem ${n.isAdmin?"makeAdminMessage":""}">
        <span class=" userIcon" ><span class="fa fa-user" ></span></span>
        <span class="userMessage"><span><a target="_blank" class="onDownloadButton" href="${n.link}">دانلود</a> </span></span>
        <span class="userTime" >${n.cTime}</span>
    </span>
`)};$(n).find(".uploadNewFile").click(function(){$(this).closest(".onlineChat")[0].openUploadFile()});$(n).find(".uploadFile").find(".moveBackButtonForRigisterMobile").click(function(){$(this).closest(".onlineChat")[0].closeMainMenue(".uploadFile")});$(n).find(".uploadFile").find("input[type=file]").change(function(){var i=getFormData($(this).closest(".uploadFile")),n=$(this).closest(".onlineChat")[0];t?n.getUserIdAndUploadFile(i):postForm("/Home/UploadNewFileForOnlineChat",i,function(t){t&&(typeof t=="string"||t instanceof String)&&(n.closeAllMenus(),n.addNewMessage({isAdmin:!1,type:"file",cTime:(new Date).getHours()+":"+(new Date).getMinutes(),link:t}),n.uploadFileUser(t))})})}function initOnlineChantNotification(n){n.notifiCount=0;n.newNotification=function(n){var t=$(this)[0],i;$(this).find(".onlineChatNotificationHolder").length==0&&$(this).append('<span class="onlineChatNotificationHolder" ><\/span>');t.notifiCount=t.notifiCount+1;i='<span id="nId_'+t.notifiCount+'" class="onlineChatNotification '+(n.isError?"noError":"")+'" >'+n.message+"<\/span>";t.hideNotification(t.notifiCount);$(this).find(".onlineChatNotificationHolder").append(i);setTimeout(function(){$("#nId_"+t.notifiCount).addClass("onlineChatNotificationShow")},1)};n.hideNotification=function(n){setTimeout(function(){$("#nId_"+this.nId).removeClass("onlineChatNotificationShow")}.bind({nId:n}),3e3)}}function initOnlineChantHeaderButtons(n){n.openMainMenue=function(n){$(this).addClass("openMainMenue");$(this).find(n).css("bottom","0px")};n.closeMainMenue=function(n){$(this).removeClass("openMainMenue");$(this).find(n).css("bottom","-500px")};n.close=function(){this.connection&&(this.connection.stop(),this.connection.dontTryAgin=!0);$(this).remove()};n.closeAllMenus=function(){this.closeMainMenue(".mainMenue");this.closeMainMenue(".mobileMenue");this.closeMainMenue(".emailMenue");this.closeMainMenue(".uploadFile");this.closeMainMenue(".sendMapMenu")};$(n).find(".onlineChatHeaderActionButtonClose").click(function(){$(this).closest(".onlineChat")[0].close()});$(n).find(".onlineChatHeaderMenueButton").click(function(){$(this).closest(".onlineChat")[0].openMainMenue(".mainMenue")});$(n).find(".onlineChatShadowBox").click(function(){var n=$(this).closest(".onlineChat")[0];n.closeAllMenus()})}function initOnlineChantActiveAndDeactiveNotifySound(n){n.enableDisableNotifiSound=function(){n.isSoundEnabled?(n.isSoundEnabled=!1,$(this).find(".enableDisableNotifiSound").html('<span class="fa fa-volume-mute"><\/span>فعال کردن صدا'),n.newNotification({message:"صدا غیر فعال شد"})):(n.isSoundEnabled=!0,$(this).find(".enableDisableNotifiSound").html('<span class="fa fa-volume"><\/span>غیر فعال کردن صدا'),n.newNotification({message:"صدا فعال شد"}))};$(n).find(".enableDisableNotifiSound").click(function(){var n=$(this).closest(".onlineChat")[0];n.enableDisableNotifiSound();n.closeMainMenue(".mainMenue")})}function isScrollShowed(){return $(document).height()>$(window).height()}function bindForm(n,t,i){var r,u;if(n&&n.length>0&&n.constructor==Array&&$(t).length>0)for(r=0;r<n.length;r++)bindingForm(t,n[r].key,n[r].value,i,n);else if(n&&$(t).length>0)for(u in n)bindingForm(t,u,n[u],i,n)}function removeToken(n){var t=$(n).closest(".tokenBoxItem");t.hasClass("ziroHeight")||(t.addClass("ziroHeight"),setTimeout(function(){$(this).closest(".tokenBoxItem").remove()}.bind(n),310))}function initTokenBox(n){var t=$(n).attr("name");$(n)[0].template='<span class="tokenBoxItem ziroHeight" ><input name="{{name}}" type="hidden" value="{{value}}" />{{text}}<span class="tokenBoxItemRemoveIcon" onclick="removeToken(this)" ><i class="fa fa-trash" ><\/i><\/span><\/span>';$(n).find("select").change(function(){var r=$(this).find("option:selected").text(),i=$(this).find("option:selected").val();(r||i)&&(i||(i=r),$(this).val(null),$(this).data("select2")&&($(this).data("select2").val([""]),$(this).data("select2").trigger("change")),$(n)[0].isSelected(i)==!1?$(n)[0].addNewToken(r,i,t):removeToken($('input[value="'+i+'"]')))});$(n).find("select").focusin(function(){window.isEditModeActive||($(this)[0].size=10,$(this).addClass("makeBigger"))});$(n).find("select").focusout(function(){$(this)[0].size=0;$(this).removeClass("makeBigger")});$(n)[0].isSelected=function(n){return $(this).find('input[value="'+n+'"]').length};$(n)[0].addNewToken=function(n,t,i){if(t){var r=$(this)[0].template;r=r.replace("{{text}}",n).replace("{{value}}",t).replace("{{name}}",i);$(this).append(r);setTimeout(function(){$(this).find(".ziroHeight").removeClass("ziroHeight")}.bind(this),50)}}}function updateMappIfNeeded(n){if(n.closest(".mapCtrl").length>0&&n.closest(".mapCtrl").find(".olMap").length>0){var t=n.closest(".mapCtrl").find(".olMap")[0];t.updateMapAndZoomPoint()}}function findInArray(n,t){if(n&&n.constructor==Array)for(var i=0;i<n.length;i++)if(n[i].key==t)return n[i].value}function bindingForm(n,t,i,r,u){if(t&&t.indexOf("[")>0&&t.indexOf("]")>0){var f=t.split("[")[0],e=Number.parseInt(t.split("[")[1].split("]")[0]);$(n).find('div[data-name="'+f+'"]').each(function(){$(this)[0].addNewRowIfNeeded(e+1)})}$(n).find('video[name="'+t+'"]').each(function(){$(this).find("source").attr("src",i);$(this).load()});$(n).find('textarea[name="'+t+'"]').each(function(){$(this)[0].ckEditor?$(this)[0].ckEditor.setData(i?i:""):$(this).val(i)});$(n).find('[data-spec-name="'+t+'"]').each(function(){$(this)[0].addNewRow&&$(this)[0].addNewRow(i)});$(n).find('a[data-name="'+t+'"]').each(function(){i?$(this).html("(دانلود فایل)").attr("href",i):$(this).html("").attr("href","")});$(n).find('.tokenBox[name="'+t+'"]').each(function(){var r,u,n,t;if(i&&i.constructor==Array)for(r=$(this).attr("name"),u=[],$(this).find("option").each(function(){u.push({id:$(this).attr("value"),title:$(this).text()})}),n=0;n<i.length;n++)t=u.filter(function(t){return t.id==i[n]}),t&&t.length>0?$(this)[0].addNewToken(t[0].title,t[0].id,r):i[n].id&&i[n].title&&$(this)[0].addNewToken(i[n].title,i[n].id,r)});$(n).find('section[data-name="'+t+'"]').each(function(){$(this).html(i)});$(n).find('select[name="'+t+'"]').each(function(){if($(this)[0].bindValue=i,$(this)[0].startBinding=!0,$(this).val(i+""),!$(this).val()){var n="";$(this).find("option").each(function(){i&&$(this).text()&&$(this).text().trim()==(i+"").trim()&&(n=$(this).attr("value"))});$(this).val(n)}$(this).data("select2")&&(u[t+"_Title"]?$(this).append(new Option(u[t+"_Title"],i,!0,!0)).trigger("change"):findInArray(u,t+"_Title")&&$(this).append(new Option(findInArray(u,t+"_Title"),i,!0,!0)).trigger("change"),$(this).data("select2").val([i]));r||setTimeout(function(){$(this).attr("data-ignore-change-onBinding")||$(this).change()}.bind(this),100);$(this)[0].startBinding=!1});$(n).find('img[data-name="'+t+'"]').each(function(){$(this).attr("src",i)});$(n).find('input[name="'+t+'"]').each(function(){var u="text",f=$(this).attr("type"),t,n;f&&(u=f);switch(u){case"hidden":case"text":case"number":case"color":$(this).closest(".tokenBox").length==0&&($(this).val(i),$(this).closest(".myColorPicker").length>0&&$(this).closest(".myColorPicker").data("colorPickerByGiro_data").setValue(i));updateMappIfNeeded($(this));break;case"checkbox":if(i=="True"||i==!0||i==!1||i=="False"||i=="")t=!1,(i=="True"||i==!0)&&(t=!0),$(this).prop("checked",t);else if(i.constructor==Array)for(n=0;n<i.length;n++)$(this).attr("value")==i[n]&&$(this).prop("checked",!0);else i==$(this).val()&&$(this).prop("checked",!0);break;case"radio":$(this).val()==i?$(this).prop("checked",!0):$(this).prop("checked",!1);r||setTimeout(function(){$(this).change()}.bind(this),100)}});updateCtrlStatus();window.updateAllSelectByInnerSelect&&updateAllSelectByInnerSelect(n)}function updateCtrlStatus(){$("input,select").each(function(){$(this)[0].updateStatus&&$(this)[0].updateStatus()})}function bindDropdown(n,t,i,r){var u,e,f,o;$(n).html("");var s=$(n)[0].bindValue,l=$(n).attr("data-s2"),h=$(n).attr("data-s2-on-opening"),c=$(n).attr("data-s2-on-closeing");for(u=0;u<t.length;u++){e="";(t[u][r]+""==s||t[u][i]+""==s)&&(e="selected=selected");f="<option "+e+' value="'+t[u][r]+'" ';for(o in t[u])f+=" data-"+o+'="'+t[u][o]+'" ';f+=">";f+=t[u][i]+"<\/option>";$(n).append(f)}if(l){if($(n).select2({}),h)$(n).on("select2:opening",function(){window[this.evName]()}.bind({evName:h}));if(c)$(n).on("select2:closing",function(){window[this.evName]()}.bind({evName:c}))}else $(n).closest(".myDropdown").length>0&&$(n).closest(".myDropdown")[0].updateItemFromSelect()}function isExistInRequestQ(n){return allRequestQ.filter(function(t){return t.url==n}).length>0}function fillResponse(n,t){var i=allRequestRes.filter(function(t){return t.url==n}),r;i.length==1?i[0].data=t:(r={data:t,url:n},allRequestRes.push(r))}function bindingPendingCTRLs(n){var i=allPendingCTRLs.filter(function(t){return t.url.toLowerCase()==n.toLowerCase()}),r=allRequestRes.filter(function(t){return t.url==n}),t;if(r.length>0)for(t=0;t<i.length;t++)$(i[t].curObj)[0].resData=r[0].data,bindDropdown(i[t].curObj,r[0].data,i[t].textField,i[t].valueField)}function addCtrlsToFormData(n,t,i){var r,u;if(n&&t&&i&&t.length>0)for(r=0;r<t.length;r++)$("#"+t[r]).length>0&&(u=$("#"+t[r]).find("option:selected").attr("value"),u||(u=$("#"+t[r]).val()),u&&i.append($("#"+t[r]).attr("name"),u))}function addCtrlsToUrl(n,t,i){var r,u;if(n&&t&&i&&t.length>0)for(r=0;r<t.length;r++)$("#"+t[r]).length>0&&(u=$("#"+t[r]).find("option:selected").attr("value"),u||(u=$("#"+t[r]).val()),u&&(i=i.indexOf("?")>-1?i+"&"+$("#"+t[r]).attr("name")+"="+u:i+"?"+$("#"+t[r]).attr("name")+"="+u));return i}function refreshDropdown(n){var t=$("#"+n);t.length>0&&(t[0].resData=null,initDropdown(t))}function initDropdown(n,t,i){var u,s,f;if($(n).length!=0){var r=$(n).attr("data-url"),e=$(n).attr("data-textfield"),o=$(n).attr("data-valuefield"),h=$(n).attr("bindFormUrl");if(r&&e&&o)if($(n)[0].exteraParameterIds&&(r=addCtrlsToUrl(n,$(n)[0].exteraParameterIds,r)),u=new FormData,$(n).closest(".modal").length>0&&$(n).closest(".modal")[0].pKey&&u.append("pKey",$(n).closest(".modal")[0].pKey),t==!0||isExistInRequestQ(r)==!1){if(isExistInRequestQ(r)==!1&&allRequestQ.push({url:r}),i&&u.append("id",i),r.indexOf("/Core/BaseData")==-1&&window.exteraModelParams)for(s in exteraModelParams)u.append(s,exteraModelParams[s]);postForm(r,u,function(n){$(this.curObj)[0].resData=n;fillResponse(this.url,n);bindDropdown(this.curObj,$(this.curObj)[0].resData,this.textField,this.valueField);bindingPendingCTRLs(this.url);h&&$(this.curObj).change()}.bind({curObj:n,url:r,textField:e,valueField:o}))}else f=allRequestRes.filter(function(n){return n.url==r}),f&&f.length>0?($(n)[0].resData=f[0].data,bindDropdown(n,f[0].data,e,o),h&&$(n).change()):allPendingCTRLs.push({curObj:n,textField:e,valueField:o,url:r})}}function getFileInputImage(n){return n&&n.closest(".myFileUpload").length>0&&n.closest(".myFileUpload").find(".holderUploadImage img").length>0?n.closest(".myFileUpload").find(".holderUploadImage img")[0]:null}function compressImageAndAddToFormData(n,t,i){var f=document.createElement("canvas"),h=n.name.split(".")[0],r=t.width,u=t.height,e=1900,o=1900,s;r>e?(u=Math.round(u*=e/r),r=e):u>o&&(r=Math.round(r*=o/u),u=o);f.width=r;f.height=u;s=f.getContext("2d");s.drawImage(t,0,0,r,u);f.toBlob(function(n){var t=new File([n],h+".jpg",{type:"image/jpg"});i.compressUploadFile=t},"image/jpeg",.9)}function getFormData(n){var t=new FormData,i;return $(n).closest(".modal").length>0&&(i=$(n).closest(".modal")[0].pKey,i&&t.append("pKey",i)),$(n).find("textarea").each(function(){var n=$(this).attr("name");n&&($(this)[0].ckEditor?t.append(n,$(this)[0].ckEditor.getData()):t.append(n,$(this).val()))}),$(n).find("[data-options]").each(function(){t.append("values",$(this).attr("data-options"))}),$(n).find("select").each(function(){var n=$(this).attr("name"),r=$(this).data("select2"),i,u;r?(i=r.val(),n&&t.append(n,i)):(i=$(this).find("option:selected").val(),u=$(this).find("option:selected").text(),n&&i&&(t.append(n,i),t.append(n+"_Title",u)))}),$(n).find("input").each(function(){var r="text",n=$(this).attr("name"),f=$(this).attr("type"),u,i;if(f&&(r=f),r=r.toLowerCase(),n)switch(r){case"password":case"text":case"number":case"hidden":case"color":t.append(n,$(this).val());break;case"file":u=$(this)[0].files;u&&u.length>0?(i=getFileInputImage($(this)),$(this).attr("data-compressImage")=="true"&&/image/i.test(u[0].type)&&i?i.compressUploadFile?t.append(n,i.compressUploadFile):t.append(n,$(this)[0].files[0]):t.append(n,$(this)[0].files[0])):(i=getFileInputImage($(this)),i.compressUploadFile&&i.useWithouFile&&t.append(n,i.compressUploadFile));break;case"checkbox":$(this).prop("checked")&&t.append(n,$(this).val());break;case"radio":$(this).prop("checked")&&t.append(n,$(this).val())}}),t}function isValidURL(n){var t=allCacheURLs.filter(function(t){return n.toLowerCase().indexOf(t.toLowerCase())>-1});return t&&t.length>0}function cacheLocalstorage(n,t){var i=window.localStorage,r=getCookie("lang");i&&n&&isValidURL(n)&&i.setItem(n+"_"+r,JSON.stringify({url:n,data:t,sDate:new Date}))}function getDataFromLocalStorageCache(n){var r=getCookie("lang"),i=window.localStorage,t;return i&&n&&isValidURL(n)&&(t=i.getItem(n+"_"+r),t&&(t=JSON.parse(t),t.sDate=new Date(t.sDate),t.sDate.getDay()==(new Date).getDay()))?t.data:null}function delete_cookie(n){document.cookie=n+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null}function fillUrlIfNeeded(n,t,i){if(n=="GET"&&i&&t)for(var r of t.entries())i=i.indexOf("?")>0?i+"&"+r[0]+"="+r[1]:i+"?"+r[0]+"="+r[1];return i}function postForm(n,t,i,r,u,f,e){e||(e="POST");n=fillUrlIfNeeded(e,t,n);var o=getDataFromLocalStorageCache(n);o?(i&&i(o),u&&u()):$.ajax({url:n,data:t,processData:!1,contentType:!1,type:e,success:function(n){var e,t,u;if(cacheLocalstorage(this.url,n),i&&(i(n),n&&(n.isSuccess==!0||n.isSuccess==!1)&&(f||$.toast({heading:n.isSuccess==!1?"خطا":"موفقیت",text:n.message,textAlign:"right",position:"bottom-right",showHideTransition:"slide",icon:n.isSuccess==!1?"error":"success"}),n.errorCode==5&&$("[data-captcha]").length>0&&$("[data-captcha]")[0].refreshCode&&$("[data-captcha]")[0].refreshCode()),n&&n.fileData&&n.fileName)){e=new Blob([n.fileData]);const t=document.createElement("a");t.href=URL.createObjectURL(e);t.download=n.fileName;document.body.append(t);t.click();t.remove();window.addEventListener("focus",()=>URL.revokeObjectURL(t.href),{once:!0})}if(n&&n.isSuccess&&n.data&&n.data.action)if(n.data.action=="redirect"&&n.data.url)location.href=n.data.url;else if(n.data.action=="postToUrl"&&n.data.url){if(t=new FormData,n.data.parameters)for(u in n.data.parameters)t.append(u,n.data.parameters[u]);postPage(n.data.url,t)}n&&n.isSuccess==!1&&r&&r()}.bind({url:n}),error:function(n){if(r&&r(),n.status==403){$.toast({heading:"عدم دسترسی",position:"bottom-right",textAlign:"right",text:"دسترسی شما به این بخش محدود می باشد",showHideTransition:"slide",icon:"error"});return}$.toast({heading:"خطا",position:"bottom-right",textAlign:"right",text:"خطای غیر قابل پیشبینی لطفا با بخش ادمین تماس حاصل کنید",showHideTransition:"slide",icon:"error"})},complete:function(){u&&u()}})}function showLoader(n,t){$(n).find(".loaderPanel").length==0&&(t||$(n).css("position","relative"),$(n).append('<div class="loaderPanel"><div class="loader"><\/div><\/div>'))}function hideLoader(n){$(n).find(".loaderPanel").remove()}function clearForm(n){$(n).find("select").each(function(){var n=$(this).data("select2");n&&(n.val([""]),n.trigger("change"))});$(n).find("img[data-name]").attr("src","/Modules/Images/unknown.svg");$(n).find('input[type="text"]').not("[data-no-clear]").val("");$(n).find('input[type="number"]').not("[data-no-clear]").val("");$(n).find('input[type="hidden"]').not("[data-no-clear]").val("");$(n).find('input[type="color"]').not("[data-no-clear]").val("");$(n).find('input[type="radio"]').prop("checked",!1);$(n).find('input[type="checkbox"]').prop("checked",!1);$(n).find('input[type="file"]').not("[data-no-clear]").val(null);$(n).find('input[type="file"]').not("[data-no-clear]").change();$(n).find("select").val("");$(n).find("a[data-name]").html("").removeAttr("href");$(n).find("select").each(function(){$(this)[0].bindValue=null});$(n).find(".tokenBox").find(".tokenBoxItem").remove();$(n).find("textarea").val("");$(n).find("textarea").each(function(){$(this)[0].ckEditor&&$(this)[0].ckEditor.setData("")});updateCtrlStatus();$(n).find(".myDropdown").each(function(){$(this)[0].updateItemFromSelect&&$(this)[0].updateItemFromSelect()})}function expandGridThisRow(n){var t,i;n&&(closeAllGridDetailes(n),t=$(window).width(),t<=650?$(n).prev().hasClass("floatGridDetiles")?($(n).html("جزییات بیشتر<i ><\/i>"),$(n).removeClass("gridDetialseMakeLessShow"),$(n).prev().remove(),$(n).closest("tr").after("<tr><\/tr>"),$(n).closest("tr").find(".gridExpandButton").click()):($(n).html("جزییات کمتر<i ><\/i>"),$(n).addClass("gridDetialseMakeLessShow"),$(n).closest("tr").find(".gridExpandButton").click(),i='<div class="floatGridDetiles">'+$(n).closest("tr").next().find(".gridDetailes").clone().html()+"<\/div>",$(n).before(i),$(n).closest("tr").next().remove()):$(n).closest("tr").find(".gridExpandButton").click())}function closeAllGridDetailes(n){var t=$(window).width();t<=650&&$(n).closest("table.myGrid").find(">tbody.myTableBody>tr").each(function(){$(this).find(">td>span.gridExpandButton.fa-minus-square").length>0&&$(this).find(".btn-roundMoreGridDetailes")[0]!=n&&$(this).find(".btn-roundMoreGridDetailes").click()})}function closeThisDetailes(n){n&&$(n).closest(".holderDetailesGrid").prev().find(".gridExpandButton").click()}function confirmDialog(n,t,i,r){var u="confirmDialog_"+Math.random(),f;u=u.replace(".","");f=`
        <div id="`+u+`" class='confirmDialogBG'>
            <div class='dialogBox'>
                <div class="dialogBoxTitle" >`+n+`</div>
                <div class="dialogBoxBody">
                    <p>`+t+`</p>
                </div>
                <div class="confirmDialogAction">
                    <button class='btn btn-success btn-sm'>تایید</button>
                    <button class='btn btn-primary btn-sm' >انصراف</button>
                </div>
            </div>
        </div>
    `;$("body").append(f);$("#"+u).find(".btn-success").click(function(){i&&i();$(this).closest(".confirmDialogBG").remove()});$("#"+u).find(".btn-primary").click(function(){r&&r();$(this).closest(".confirmDialogBG").remove()})}function convertFormDataToJsonOject(n){return convertFormDataToJson(n)}function openNewLink(n,t,i,r){var u,f,e;if(t&&n&&$("#"+n).length>0&&i)u=getFormData($("#"+n)),showLoader($("#"+n)),postForm(i,u,function(n){var i,u;if(n&&n.isSuccess)if(r)postPage(t,this.formData);else{i="";for(u of this.formData.entries())i=i==""&&this.link.indexOf("?")==-1?"?"+u[0]+"="+u[1]:i+"&"+u[0]+"="+u[1];location.href=this.link+i}}.bind({checkUrl:i,formData:u,link:t}),null,function(){hideLoader($("#"+n))});else if(t&&n&&$("#"+n).length>0){u=getFormData($("#"+n));f="";for(e of u.entries())f=f==""&&t.indexOf("?")==-1?"?"+e[0]+"="+e[1]:f+"&"+e[0]+"="+e[1];location.href=t+f}}function postPage(n,t){var r=uuidv4RemoveDash(),i='<form id="'+r+'" action="'+n+'" style="display:none;" method="post">';for(var u of t.entries())i+='<input type="hidden" value="'+u[1]+'" name="'+u[0]+'" />';i+="<\/form>";$("body").append(i);$("#"+r).submit()}function getCtrlValidationAttribute(n){var t="";return n&&(t+=getRequiredValidatorAttributeIfNeeded(n),t+=getRegExValidatorAttributeIfNeeded(n),t+=getNationalCodeValidatorAttributeIfNeeded(n)),t}function getNationalCodeValidatorAttributeIfNeeded(n){var i="",t;return n&&n.nationalCodeValidation&&(t="",t+=n.label?" "+n.label:" این کنترول",t+=" مجاز نمی باشد",i+='data-validation-nationalcode="true" data-validation-nationalcode-msg="'+t+'"'),i}function getRequiredValidatorAttributeIfNeeded(n){var i="",t;return n&&n.isRequired&&(t="لطفا",t+=n.label?" "+n.label:" این کنترول",t+=n.type=="persianDateTime"||n.type=="dropDown"||n.type=="dropDown2"||n.type=="tokenBox"||n.type=="tokenBox2"||n.type=="file"?" را انتخاب کنید":n.type=="text"||n.type=="password"||n.type=="textarea"?" را وارد کنید":" را مشخص نمایید",i+='data-validation-required="true" data-validation-required-msg="'+t+'"'),i}function getRegExValidatorAttributeIfNeeded(n){var t="";return n&&n.validations&&n.validations.length>0&&(t+=" data-validation-reg='"+JSON.stringify(n.validations)+"'"),t}function validateForm(n){var t=!0;return t=checkRequiredValidation(n,t),t=checkRegValidation(n,t),checkNationalCodeValidation(n,t)}function isNatinalCodeValid(n){var i,t,r;if(isNaN(n)||n==""||n.length<10)return!1;i=0;t=parseInt(t);for(let r=0;r<n.length;r++)t=n[r]*(n.length-r),i+=t;return r=i%11,r===0?!0:!1}function isVisibleCtrl(n){return $(n).is(":visible")||$(n).closest(".myDropdown").length>0&&$(n).closest(".myDropdown").is(":visible")}function checkNationalCodeValidation(n,t){return t==!0&&$(n).find('input[data-validation-nationalcode="true"]').each(function(){if(isVisibleCtrl(this)&&!isNatinalCodeValid($(this).val()))return t=!1,$(this).closest(".myCtrl").hasClass("inValidInput")||showValidationMessage(this,$(this).attr("data-validation-nationalcode-msg")),null}),t}function checkRequiredValidation(n,t){return t==!0&&$(n).find('input[data-validation-required="true"], select[data-validation-required="true"]').each(function(){if(isVisibleCtrl(this)||$(this).attr("data-select2-id")||$(this).attr("type")=="file"){var n="";if(n=$(this).attr("type")=="checkbox"?$(this).is(":checked")?"true":"":$(this).val(),$(this).parent().hasClass("tokenBox")&&(n=$(this).parent().find('input[type="hidden"]').val()),!n)return t=!1,$(this).closest(".myCtrl").hasClass("inValidInput")||showValidationMessage(this,$(this).attr("data-validation-required-msg")),null}}),t}function checkRegValidation(n,t){return t==!0&&$(n).find("input[data-validation-reg], select[data-validation-reg]").each(function(){var r,n,i,u;if(isVisibleCtrl(this)&&(r=$(this).val(),n=JSON.parse($(this).attr("data-validation-reg")),r&&n&&n.length>0))for(i=0;i<n.length;i++)if(u=new RegExp(n[i].reg),!u.test(r))return $(this).closest(".myCtrl").hasClass("inValidInput")||showValidationMessage(this,n[i].msg),t=!1,null}),t}function showValidationMessage(n,t){canUseSetFocus==!0&&($(n).focus(),canUseSetFocus=!1);$(n).closest(".myCtrl").addClass("inValidInput").append('<div class="inValidInputMessage">'+t+"<\/div>");setTimeout(function(){canUseSetFocus=!0;$(n).closest(".myCtrl").removeClass("inValidInput").find(".inValidInputMessage").remove()}.bind({curObj:n}),2e3)}function closeAllDropdownInPage(){$(".myDropdown").each(function(){$(this)[0].closeMDD&&$(this)[0].closeMDD()})}function updateAllSelectByInnerSelect(n){$(n).find(".myDropdown").each(function(){$(this)[0].updateItemFromSelect&&$(this)[0].updateItemFromSelect()})}function generateForm(n,t,i){var r="",u;if(n&&n.panels&&n.panels.length>0){for(r+='<div class="row">',u=0;u<n.panels.length;u++)r+=getPanelTemplate(n.panels[u]);r+="<\/div>"}t?typeof t=="string"||t instanceof String?(i?$("#"+t).append(r):$("#"+t).html(r),executeArrFunctions()):(i?$(t).append(r):$(t).html(r),executeArrFunctions()):(i?$(".MainHolder").append(r):$(".MainHolder").html(r),executeArrFunctions())}function getInputTemplate(n){var t="";if(n){if(n.showCondation&&!window[n.showCondation])return t;n.onChange&&(n.onChange=n.onChange.replace(/&#39;/g,"'"));n.id||(n.id=uuidv4RemoveDash());n.type!="hidden"&&(t+='<div class="'+n.parentCL+'">');switch(n.type){case"hidden":t+='<input id="'+n.id+'" autocomplete="off" type="hidden" name="'+n.name+'" '+(n.dfaultValue?'value="'+n.dfaultValue+'"':"")+" />";addCtrlToObj(n);break;case"text":case"number":case"password":case"persianDateTime":case"color":t+=getTextBoxTemplate(n);break;case"dropDown":case"dropDown2":t+=getDropdownCTRLTemplate(n);break;case"tokenBox":case"tokenBox2":t+=getTokennCTRLTemplate(n);break;case"radio":t+=getRadioButtonTemplate(n);break;case"checkBox":t+=getCheckboxButtonTemplate(n);break;case"file":t+=getFileCTRLTemplate(n);break;case"dynamicFileUpload":t+=getDynamicFileUploadCtrlTemplate(n);break;case"dynamicFileUploadDepend":t+=getDynamicFileUploadDependCtrlTemplate(n);break;case"textarea":t+=getTextAreaTemplate(n);break;case"ck":t+=getCkEditorTemplate(n);break;case"dynamiCtrls":t+=getDynamicCtrlsTemplate(n);break;case"chkCtrlBox":t+=getChkCtrlBoxTemplateCtrl(n);break;case"multiRowInput":t+=getMultiRowInputTemplate(n);break;case"Content":t+=getContentTemplate(n);break;case"TabContent":case"TabContentDynamicContent":t+=getTabContentTemplate(n);break;case"Shortcut":t+=getShortcutButtonTemplate(n);break;case"carPlaque":t+=getPlaqueTemplate(n);break;case"button":t+=getButtonTemplateWidthLabel(n);break;case"searchButtons":t+=getSearchButtonsTemplate(n);break;case"countDownButton":t+=getCountDownButtonTemplate(n);break;case"multiSelectLine":t+=getMultiSelectLineTemplate(n);break;case"multiSelectImg":t+=getMultiSelectImgTemplate(n);break;case"cTemplate":t+=getCTemplate(n);break;case"template":t+=getTemplate(n);break;case"label":t+=getLableTemplate(n);break;case"map":t+=getMapTemplate(n);break;case"ppfDesigner":t+=getDesignerTemplate(n);break;case"empty":t+=getEmptyCtrlTemplate(n)}n.type!="hidden"&&(t+="<\/div>")}return t}function getEmptyCtrlTemplate(n){var t="";return t+='<div class="myCtrl " ><div style="width:100%;text-align:center;" id="'+n.id+'" >'+(window.isEditModeActive!=undefined?"سطر خالی":"")+"<\/div><\/div>",addCtrlToObj(n),t}function getDesignerTemplate(n){var t='<div class="myFormDesigner" data-baseUrl="'+n.baseUrl+'" id="'+n.id+'" ><\/div>';return window.initDisigner?initDisigner(n):window.initDisigner||isDisinerTryToLoaded||(isDisinerTryToLoaded=!0,loadJS("/Modules/Core/js/fd.min.js.gz"),loadCSS("/Modules/Core/css/fd.min.css.gz"),n.initInterval=setInterval(function(){window.initDisigner&&(clearInterval(this.curCtrl.initInterval),initDisigner(this.curCtrl))}.bind({curCtrl:n}),300)),t}function getLableTemplate(n){var t="";return t+='<div class="myCtrl form-group '+(n.class?n.class:"")+'">',n.label&&(t+="<label "+(n.ltr?"dir:ltr":"")+" "+(n.id?'id="'+n.id+'"':"")+' style="position: relative;font-weight:bold;cursor:default;color:'+(n.color?n.color:"black")+';" >'+n.label+"<\/label>"),t+="<\/div>",addCtrlToObj(n),t}function makeCtrlFocused(n){$(n).closest(".myCtrl").addClass("myCtrlMakeActive")}function makeCtrlBlure(n){$(n).closest(".myCtrl").removeClass("myCtrlMakeActive")}function executeArrFunctions(){while(functionsList.length>0){var n=functionsList.splice(0,1);n[0]()}}function getPanelTemplate(n,t){var r="",i;if(n){if(n.id||(n.id=uuidv4RemoveDash()),r+='<div id="'+n.id+'" '+(n.loadUrl?'data-url="'+n.loadUrl+'"':"")+'  class="myPanel '+(n.class?n.class:"col-md-12 col-sm-12 col-xs-12 col-lg-12 col-xl-12")+'" >',n.title&&(r+='<div id="'+n.id+'Title" class="myPanelTitle" style="padding:10px;padding-right:0px;">'+n.title+"<\/div>"),n.ctrls){for(r+='<div style="padding-top:7px;" class="row">',i=0;i<n.ctrls.length;i++)r+=getInputTemplate(n.ctrls[i]);r+="<\/div>"}if(n.type=="TabCtrl"&&(r+=getTabCtrlTemplate(n)),n.charts)for(i=0;i<n.charts.length;i++)r+=getChartTemplate(n.charts[i]);if(n.stepWizards)for(i=0;i<n.stepWizards.length;i++)r+=getStepWizardTemplate(n.stepWizards[i]);if(n.grids)for(i=0;i<n.grids.length;i++)r+=getGridTemplate(n.grids[i],t);if(n.moduals)for(i=0;i<n.moduals.length;i++)r+=getModualTemplate(n.moduals[i]);if(n.treeViews)for(i=0;i<n.treeViews.length;i++)r+=getTreeViewTemplate(n.treeViews[i]);if(n.actions&&n.actions.length>0){for(r+='<div style="text-align:right;padding-top:15px;">',i=0;i<n.actions.length;i++)r+=getButtonTemplate(n.actions[i]);r+="<\/div>"}if(n.ePanels&&n.ePanels.length>0){for(r+='<div class="row">',r+='<div class="col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12 ">',r+='<div class="expandablePanelGroup">',i=0;i<n.ePanels.length;i++)r+=getEPanelsTemplate(n.ePanels[i]);r+="<\/div>";r+="<\/div>";r+="<\/div>"}if(n&&n.panels&&n.panels.length>0){for(r+='<div class="row">',i=0;i<n.panels.length;i++)r+=getPanelTemplate(n.panels[i]);r+="<\/div>"}functionsList.push(function(){bindPanelByUrl($("#"+this.panelId))}.bind({panelId:n.id}));r+="<\/div>";functionsList.push(function(){$("#"+this.panel.id)[0].panel=this.panel}.bind({panel:n}));n.autoScrollToHtml&&functionsList.push(function(){$("html").animate({scrollTop:$(this.targetElement).offset().top},1e3)}.bind({targetElement:n.autoScrollToHtml}))}return r}function getTabCtrlTemplate(n){var t="",r,i;if(n&&n.ctrls&&n.ctrls.length>0){for(r=uuidv4RemoveDash(),t+='<div id="'+r+'" class="inquirySectionTab"><div class="inquirySectionTabHeaderItems">',i=0;i<n.ctrls.length;i++)t+='<div data-json-url="'+n.ctrls[i].url+'" class="inquirySectionTabHeaderItem">',t+='<div class="inquirySectionTabHeaderItemInner ">',t+='<i class="fa '+n.ctrls[i].icon+' imageIcon"><\/i>',t+="<div>"+n.ctrls[i].label+"<\/div>",t+="<\/div>",t+="<\/div>";for(t+="<\/div>",t+='<div class="inquirySectionTabBodyItems">',i=0;i<n.ctrls.length;i++)t+='<div class="inquirySectionTabBodyItem "><\/div>';t+="<\/div>";t+="<\/div>";functionsList.push(function(){$("#"+this.id).initInquiryTab()}.bind({id:r}))}return t}function getEPanelsTemplate(n){var t="",i;if(n){if(n.id||(n.id=uuidv4RemoveDash()),t+='<div id="'+n.id+'" class="expandablePanel">',t+='<div class="expandablePanelHeader"><div class="expandablePanelHeaderTitle">'+n.title+'<\/div><span class="expandablePanelHeaderArrow"><\/span><\/div>',t+='<div class="expandablePanelBody">',n.ctrls&&n.ctrls.length>0){for(t+='<div class="row">',i=0;i<n.ctrls.length;i++)t+=getInputTemplate(n.ctrls[i]);t+="<\/div>"}t+="<\/div>";t+="<\/div>"}return functionsList.push(function(){$("#"+this.ePanel.id).initExpanablePanel()}.bind({ePanel:n})),t}function getChartNotificationAttributes(n){var i="",t;if(n&&n.length>0)for(t=0;t<n.length;t++)i+=" data-notify-"+n[t];return i}function getChartTemplate(n){var t="";return window.Highcharts||isTryLoadingChart||(loadJS("/Modules/Core/js/chart.min.js.gz"),isTryLoadingChart=!0),n&&n.config&&n.url&&n.dataSchmea&&(n.id||(n.id=uuidv4RemoveDash()),t+="<div "+getChartNotificationAttributes(n.notificationTriger)+' id="'+n.id+'" class="chartHolderDiv" >',t+="<\/div>",functionsList.push(function(){var t=$("#"+this.id)[0];t.refreshChart=function(){$("#"+this.id).html("");var t=new FormData;n.filterId&&(t=getFormData($("#"+n.filterId)));postForm(n.url,t,function(n){this.config[this.dataSchmea]=n;initChartUntilSerciptLoaded(this.id,this.config)}.bind(this))}.bind(this);t.refreshChart()}.bind(n))),t}function initChartUntilSerciptLoaded(n,t){n&&t&&$("#"+n).length>0&&(window.Highcharts?Highcharts.chart(n,t):$("#"+n)[0].interval=setInterval(function(){window.Highcharts&&(clearInterval($("#"+this.id)[0].interval),Highcharts.chart(this.id,this.config))}.bind({id:n,config:t}),1e3))}function getTreeViewTemplate(n){var i="",t;return n&&(t=uuidv4RemoveDash(),i+='<div data-selected="'+n.dataSelected+'" data-bindsrcparameters="'+n.bindSrcParameters+'" data-url="'+n.dataUrl+'" data-textfield="'+n.dataTextfield+'" data-valuefield="'+n.dataValuefield+'" data-childfeild="'+n.dataChildfeild+'" id="'+t+'" class="treeView"><\/div>',functionsList.push(function(){$("#"+this.treeViewId).initTreeView()}.bind({treeViewId:t}))),i}function getModualTemplate(n){var t=n.id?n.id:uuidv4RemoveDash(),i='<div class="modal fade" id="'+t+'"  role="dialog"  aria-hidden="true"><div class="modal-dialog modal-dialog-centered  '+(n.class?n.class:"")+'" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">'+n.title+'<\/h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button><\/div><div class="modal-body">'+(n.modelBody?n.modelBody:getModualTemplateCTRL(n))+"<\/div>"+getModualTemplateActionButton(n)+"<\/div><\/div><\/div>";return functionsList.push(function(){$("#"+t).keypress(function(n){if(n.keyCode==13){if(n.target&&$(n.target)[0].nodeName=="TEXTAREA")return;$(this).find("button.btn-primary").each(function(){$(this).is(":visible")&&$(this).click()})}})}.bind({modalId:t})),n.autoShowModalOnFalse&&functionsList.push(function(){var r=!0,i,t;if(n.autoShowModalOnFalseUrlCondation&&n.autoShowModalOnFalseUrlCondation.length>0){for(i=!1,t=0;t<n.autoShowModalOnFalseUrlCondation.length;t++)n.autoShowModalOnFalseUrlCondation[t]==location.pathname&&(i=!0);i==!1&&(r=!1)}r==!0&&postForm(this.modual.autoShowModalOnFalse,new FormData,function(n){n||$("#"+this.modual.id).modal("show")}.bind({modual:this.modual}))}.bind({modual:n})),i}function getModualTemplateCTRL(n){var i="",t;if(n){if(i+='<div class="row">',n&&n.panels&&n.panels.length>0)for(t=0;t<n.panels.length;t++)i+=getPanelTemplate(n.panels[t],!0);if(n&&n.ctrls)for(t=0;t<n.ctrls.length;t++)i+=getInputTemplate(n.ctrls[t]);i+="<\/div>"}return i}function copyTextToClipboard(n){const t=document.createElement("textarea");t.value=n;t.setAttribute("readonly","");t.style.position="absolute";t.style.left="-9999px";document.body.appendChild(t);t.select();document.execCommand("copy");document.body.removeChild(t)}function updateTemplateText(n){var f=$("#"+n.id),e,u,t,i,r;if(f.length>0&&n.fieldMaps&&n.fieldMaps.length>0&&(e=f[0],e.templateStr)){for(u=`${e.templateStr}`,t=0;t<n.fieldMaps.length;t++){for(i="",r=0;r<n.fieldMaps[t].sourceCtrl.length;r++)i||(i=$('input[name="'+n.fieldMaps[t].sourceCtrl[r]+'"]').length>0?$('input[name="'+n.fieldMaps[t].sourceCtrl[r]+'"]').val():$('select[name="'+n.fieldMaps[t].sourceCtrl[r]+'"]').find("option:selected").text());u=u.replace("{{"+n.fieldMaps[t].targetTemplate+"}}",i).replace("{{"+n.fieldMaps[t].targetTemplate+"}}",i).replace("{{"+n.fieldMaps[t].targetTemplate+"}}",i).replace("{{"+n.fieldMaps[t].targetTemplate+"}}",i).replace("{{"+n.fieldMaps[t].targetTemplate+"}}",i).replace("{{"+n.fieldMaps[t].targetTemplate+"}}",i).replace("{{"+n.fieldMaps[t].targetTemplate+"}}",i).replace("{{"+n.fieldMaps[t].targetTemplate+"}}",i)}f.html(u)}}function updateCtemplateCtrlTemplate(n){var f=$("#"+n.ctrl.id).attr("data-url"),i,u,t,r;if(f){if(i=new FormData,appendAllQueryStringToForm(i),window.exteraModelParams)for(u in exteraModelParams)i.append(u,exteraModelParams[u]);if(n.ctrl.exteraModelParams)for(t=0;t<n.ctrl.exteraModelParams.length;t++)r=$("input[name="+n.ctrl.exteraModelParams[t]+"]").val(),r||(r=$("select[name="+n.ctrl.exteraModelParams[t]+"]").find("option:selected").attr("value")),r&&i.append(n.ctrl.exteraModelParams[t],r);postForm(f,i,function(n){$("#"+this.id)[0].templateStr=n;$("#"+this.id).html(n)}.bind({id:n.ctrl.id}),function(){$("#"+this.id).html('<div style="line-height:40px;" >اطلاعاتی یافت نشد<\/div>')}.bind({id:n.ctrl.id}))}}function getTemplate(n){var t="";return n&&(t+='<div class="myCtrl fdgHtmlTemplate" id="'+n.id+'" >'+n.html+"<\/div>",addCtrlToObj(n)),t}function getCTemplate(n){var t="";return n&&(t+='<div class="myCtrl " data-url="'+n.dataurl+'" id="'+n.id+'" ><\/div>',addCtrlToObj(n),functionsList.push(function(){var r,t,i;if($("#"+this.ctrl.id)[0].ctrl=n,updateCtemplateCtrlTemplate(this),this.ctrl.fieldMaps&&this.ctrl.fieldMaps.length>0)for(r=0;r<this.ctrl.fieldMaps.length;r++)if(t=this.ctrl.fieldMaps[r],t.sourceCtrl&&t.sourceCtrl.length>0)for(i=0;i<t.sourceCtrl.length;i++)$('input[name="'+t.sourceCtrl[i]+'"],select[name="'+t.sourceCtrl[i]+'"]').change(function(){updateTemplateText(this.ctrl)}.bind({ctrl:this.ctrl}))}.bind({ctrl:n}))),t}function getMapTemplate(n){var t="";return n&&(n.id||(n.id=uuidv4RemoveDash()),t+='<div style="padding:0px;position:relative;z-index:2;" class="myCtrl mapCtrl form-check '+(n.class?n.class:"")+'">',n.label&&(t+="<label>"+n.label+"<\/label>"),n.names&&n.names.lat&&(t+='<input id="'+n.id+'_lat" name="'+n.names.lat+'" type="hidden" value="'+(n.values&&n.values.lat?n.values.lat:"")+'" />'),n.names&&n.names.lon&&(t+='<input id="'+n.id+'_lon" name="'+n.names.lon+'" type="hidden" value="'+(n.values&&n.values.lon?n.values.lon:"")+'" />'),n.names&&n.names.zoom&&(t+='<input id="'+n.id+'_zoom" name="'+n.names.zoom+'" type="hidden" value="'+(n.values&&n.values.zoom?n.values.zoom:"")+'" />'),t+='<div id="'+n.id+'" style="width:'+n.width+";height:"+n.height+';margin-bottom:17px;" ><\/div>',t+="<\/div>",addCtrlToObj(n),addOpenLayerIfNotExist(),functionsList.push(function(){initMap(this.ctrl)}.bind({ctrl:n}))),t}function initMap(n){var t=$("#"+n.id);t.length>0&&(t[0].tryToInit=0,t[0].updateMapAndZoomPoint=function(){var t=$(this).attr("id"),f=$("#"+t+"_lat").val(),e=$("#"+t+"_lon").val(),o=$("#"+t+"_zoom").val(),c=new OpenLayers.Projection("EPSG:4326"),l=new OpenLayers.Projection("EPSG:900913"),i=$("#"+n.id)[0].markers,s=$("#"+t)[0].map,r;if(s&&f&&e&&o&&i){var h=new OpenLayers.LonLat(e,f).transform(c,l),u=new OpenLayers.Size(21,25),a=new OpenLayers.Pixel(-(u.w/2),-u.h),v=new OpenLayers.Icon("/Modules/Images/marker.png",u,a);for(r=0;r<i.markers.length;r++)i.markers[r].erase();i.addMarker(new OpenLayers.Marker(h,v));s.setCenter(h,o)}},t[0].isInit=!1,t[0].initInterval=setInterval(function(){var n=this.curThis.tryToInit;if(isNaN(n)&&(n=0),n>=100||this.curThis.isInit){clearInterval(this.curThis.initInterval);return}n++;this.curThis.tryToInit=n;window.OpenLayers&&(initMapInner(this.ctrl),this.curThis.isInit=!0)}.bind({curThis:t[0],ctrl:n}),100))}function updateMapMarkers(n,t){var f,e,r,i;if(n&&t&&(f=new OpenLayers.Projection("EPSG:4326"),e=new OpenLayers.Projection("EPSG:900913"),$("#"+t).length>0&&(r=$("#"+t)[0].markers,r)))for(i=0;i<n.length;i++){var o=n[i].mapLat,s=n[i].mapLng,h=n[i].id;if(h&&o&&s){var u=new OpenLayers.Size(21,25),l=new OpenLayers.Pixel(-(u.w/2),-u.h),a=new OpenLayers.Icon("/Modules/Images/markerAgent.png",u,l),v=new OpenLayers.LonLat(s,o).transform(f,e),c=new OpenLayers.Marker(v,a);c.myId=h;r.addMarker(c)}}}function getSelect2ValueAndRemoveAllMapItemsExcept(n,t){var f,e,s,o,i,r,h,u;if(n&&t&&(f=$("#"+n),e=$("#"+t),f.length>0&&e.length>0)){var y=new OpenLayers.Projection("EPSG:4326"),p=new OpenLayers.Projection("EPSG:900913"),l=f.find("option:selected").val();if(l&&(s=f.data("select2"),s&&(o=s.data(),o&&o.length>0&&(i=o.filter(function(n){return n.id==l}),i&&i.length>0&&(i=i[0],r=e[0].markers,h=e[0].map,r&&h))))){for(u=0;u<r.markers.length;u++)r.markers[u].myId&&r.markers[u].erase();r.markers.splice(1);var c=new OpenLayers.Size(21,25),w=new OpenLayers.Pixel(-(c.w/2),-c.h),b=new OpenLayers.Icon("/Modules/Images/markerAgentSelected.png",c,w),a=new OpenLayers.LonLat(i.mapLng,i.mapLat).transform(y,p),v=new OpenLayers.Marker(a,b);v.myId=i.id;r.addMarker(v);h.setCenter(a,15)}}}function initMapInner(n){var t=null,i=null,r;OpenLayers.ImgPath="/Modules/Assets/MapIcons/";OpenLayers.Control.Click=OpenLayers.Class(OpenLayers.Control,{defaultHandlerOptions:{single:!0,double:!1,pixelTolerance:0,stopSingle:!1,stopDouble:!1},initialize:function(){this.handlerOptions=OpenLayers.Util.extend({},this.defaultHandlerOptions);OpenLayers.Control.prototype.initialize.apply(this,arguments);this.handler=new OpenLayers.Handler.Click(this,{click:this.trigger},this.handlerOptions)},trigger:function(r){var f;if(!this.ctrl.readonly){var e=t.getLonLatFromPixel(r.xy),s=new OpenLayers.Projection("EPSG:4326"),h=new OpenLayers.Projection("EPSG:900913"),u=new OpenLayers.LonLat(e.lon,e.lat).transform(h,s);$("#"+n.id+"_lat").val(u.lat);$("#"+n.id+"_lon").val(u.lon);$("#"+n.id+"_zoom").val(t.zoom);n.updateAnotherMapLocation&&($("#"+n.updateAnotherMapLocation+"_lat").val(u.lat),$("#"+n.updateAnotherMapLocation+"_lon").val(u.lon),$("#"+n.updateAnotherMapLocation+"_zoom").val(t.zoom));var o=new OpenLayers.Size(21,25),c=new OpenLayers.Pixel(-(o.w/2),-o.h),l=new OpenLayers.Icon("/Modules/Images/marker.png",o,c);for(f=0;f<i.markers.length;f++)i.markers[f].erase();i.markers.splice(0);i.addMarker(new OpenLayers.Marker(e,l))}}.bind({ctrl:n})});t=new OpenLayers.Map(n.id,{controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanZoom,new OpenLayers.Control.Attribution],theme:null});t.addLayer(new OpenLayers.Layer.OSM("OpenStreetMap",["//a.tile.openstreetmap.org/${z}/${x}/${y}.png","//b.tile.openstreetmap.org/${z}/${x}/${y}.png","//c.tile.openstreetmap.org/${z}/${x}/${y}.png"],null));var u=new OpenLayers.Projection("EPSG:4326"),f=new OpenLayers.Projection("EPSG:900913"),e=new OpenLayers.LonLat(51.351869,35.722938).transform(u,f);i=new OpenLayers.Layer.Markers("Markers");t.addLayer(i);t.addLayer(new OpenLayers.Layer.OSM);t.setCenter(e,15);r=new OpenLayers.Control.Click;t.addControl(r);r.activate();$("#"+n.id)[0].map=t;$("#"+n.id)[0].markers=i;$("#"+n.id)[0].updateMapAndZoomPoint();$("#"+n.id)[0].ctrl=n}function addOpenLayerIfNotExist(){window.OpenLayers||isTryingLoadMapJs||(loadJS("/Modules/Core/js/op.min.js.gz"),isTryingLoadMapJs=!0)}function getMultiSelectImgTemplate(n){var t="";return n&&(t+='<div data-name="'+n.name+'" id="'+n.id+'" class="multiSelectImage myCtrl">',t+='<div class="multiSelectImageTitle">'+n.label+"<\/div>",t+='<div class="multiSelectImageBody" ><\/div>',t+="<\/div>",addCtrlToObj(n),n.dataurl&&functionsList.push(function(){postForm(this.ctrl.dataurl,new FormData,function(n){var i="",t;if(n&&n.length>0)for(t=0;t<n.length;t++)i+=getMultiSelectImgItemTemplate(n[t],this.ctrl.textfield,this.ctrl.valuefield,this.ctrl.imgfield,this.ctrl.onChange);$("#"+this.ctrl.id).find(".multiSelectImageBody").html(i)}.bind({ctrl:this.ctrl}))}.bind({ctrl:n}))),t}function getMultiSelectImgItemTemplate(n,t,i,r,u){var f="";return n&&t&&i&&r&&n[t]&&n[i]&&n[r]&&(f+='<div onClick="multiSelectImgClick(this)" data-onChange="'+(u?u:"")+'" class="multiSelectImageBodyItem" data-id="'+n[i]+'" ><img alt="'+n[t]+'" class="multiSelectImageBodyItemImg" width="32" height="32" src="'+n[r]+'" /><span class="multiSelectImageBodyItemTitle" >'+n[t]+"<\/span><\/div>"),f}function multiSelectImgClick(n){if(n){var t=$(n),i=t.attr("data-onChange"),r=t.attr("data-id"),u=t.closest(".multiSelectImage").attr("data-name");t.hasClass("multiSelectImageBodyItemActive")?(t.removeClass("multiSelectImageBodyItemActive"),t.find("input[type=hidden]").remove()):(t.addClass("multiSelectImageBodyItemActive"),t.append('<input type="hidden" value="'+r+'" name="'+u+'" />'));i&&eval(i)}}function getMultiSelectLineTemplate(n){var t="";return n&&n.name&&n.dataurl&&(t+='<div data-name="'+n.name+'" id="'+n.id+'" class="multiSelectLine myCtrl">',t+='<div class="multiSelectLineTitle">'+n.label+"<\/div>",t+='<div class="multiSelectLineBody"><\/div>',t+="<\/div>",addCtrlToObj(n),functionsList.push(function(){postForm(this.ctrl.dataurl,new FormData,function(n){var r="",t,i;if(n&&n.length>0)for(t=0;t<n.length;t++)r+=getMultiSelectLineItemTemplate(n[t],this.ctrl.textfield,this.ctrl.valuefield);i=$("#"+this.ctrl.id);i.find(".multiSelectLineBody").html(r);i.initMultiSelectLine(this.ctrl.onChange)}.bind({ctrl:this.ctrl}))}.bind({ctrl:n}))),t}function getMultiSelectLineItemTemplate(n,t,i){var r="";return n&&t&&i&&n[t]&&n[i]&&(r+='<div data-id="'+n[i]+'" class="multiSelectLineBodyItem"><div class="multiSelectLineBodyItemTitle">'+n[t]+'<\/div><div class="multiSelectLineBodyItemSelectIndicator"><\/div><\/div>'),r}function getCountDownButtonTemplate(n){var t="";return n&&n.startNumber&&n.countDownText&&n.finishedCountDownText&&(t+='<label data-onClick="'+n.onClick+'"  id="'+n.id+'" data-finishedCountDownText="'+n.finishedCountDownText+'" data-countDownText="'+n.countDownText+'" data-maxNumber="'+n.startNumber+'" class="countDownCtrl" disabled ><\/label>',functionsList.push(function(){$("#"+this.id).initCountDown()}.bind({id:n.id}))),t}function getSearchButtonsTemplate(n){var t="";return n&&n.dataurl&&n.valuefield&&n.textfield&&n.name&&(t+='<div class="myCtrl" ><div class="row" id="'+n.id+'" ><\/div><\/div>',addCtrlToObj(n),functionsList.push(function(){postForm(this.ctrl.dataurl,new FormData,function(n){var t,i;if(n&&n.length>0){for(t="",i=0;i<n.length;i++)t+='<div class="'+this.ctrl.itemClass+'" >',t+='<button style="margin-bottom:10px;" data-button-name="'+this.ctrl.name+'" data-button-value="'+n[i][this.ctrl.valuefield]+'" onclick="'+this.ctrl.onClick+'" type="button" class="btn btn-primary btn-block" >'+n[i][this.ctrl.textfield]+"<\/button>",t+="<\/div>";$("#"+this.ctrl.id).html(t)}}.bind({ctrl:this.ctrl}))}.bind({ctrl:n}))),t}function getButtonTemplateWidthLabel(n){var t="";return t+='<div class="myCtrl form-group '+(n.showHideClass?n.showHideClass:"")+'" >',t+=getButtonTemplate(n),t+="<\/div>",addCtrlToObj(n),t}function getPlaqueTemplate(n){var t="";return n&&(t+='<div id="'+(n.id?n.id:"")+'" class="myCtrl plaqueCtrl form-group '+(n.class?n.class:"")+'" >',t+='<div class="plaqueRightPart" >',t+='<div class="plaqueRightPartRight">',t+='<input type="text" placeholder="55" maxlength="2" name="'+n.name+'_1" />',t+="<\/div>",t+='<div class="plaqueRightPartLeft">',t+='<input type="text" placeholder="555" maxlength="3" name="'+n.name+'_2" />',t+=getPlaqueDropdownItem(n),t+='<input type="text" placeholder="55" maxlength="2" name="'+n.name+'_4" />',t+="<\/div>",t+="<\/div>",t+='<div class="plaqueLeftPart" >',t+='<img alt="پرچم ایران" width="19" height="11" src="/Modules/Images/iran.png" />',t+="<div>I.R<\/div>",t+="<div>Iran<\/div>",t+="<\/div>",t+="<\/div>",addCtrlToObj(n)),t}function getPlaqueDropdownItem(n){return""+getDropdownCTRLTemplate({id:uuidv4RemoveDash(),type:"dropDown",textfield:"title",valuefield:"title",name:n.name+"_3",itemsClass:"makeFAP",values:[{title:"الف"},{title:"ب"},{title:"پ"},{title:"ت"},{title:"ج"},{title:"د"},{title:"ر"},{title:"ژ"},{title:"س"},{title:"ص"},{title:"ط"},{title:"ع"},{title:"ق"},{title:"ک"},{title:"ل"},{title:"م"},{title:"ن"},{title:"و"},{title:"ه"},{title:"ی"}]})}function getShortcutButtonTemplate(n){var t="";return n.url&&n.label&&(t+='<a style="margin-bottom:10px;" class="btn btn-primary btn-block" href="'+n.url+'" >'+n.label+"<\/a>"),t}function createHolderIfNotExist(n){var t,i;return $(window).width()<=600?(t=$(n).closest(".col-xs-12"),t.length==0)?"":(i=uuidv4RemoveDash(),t.find(".holderTabContentDiv").length==0?t.append('<div id="'+i+'" class="col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xs-12 holderTabContentDiv" ><\/div>'):i=t.find(".holderTabContentDiv").attr("id"),i):(t=$(n).closest(".row"),t.length==0)?"":(i=uuidv4RemoveDash(),t.find(".holderTabContentDiv").length==0?t.append('<div id="'+i+'" class="col-md-12 col-sm-12 col-lg-12 col-xl-12 col-xs-12 holderTabContentDiv" ><\/div>'):i=t.find(".holderTabContentDiv").attr("id"),i)}function getGridUrlFromConfig(n){if(n&&n.panels)for(var t=0;t<n.panels.length;t++)if(n.panels[t].grids&&n.panels[t].grids.length>0)return n.panels[t].grids&&n.panels[t].grids[0].url;return null}function addUpdateNotificationCount(n,t){var i=$("#"+n);i.length>0&&(i.find(".tabButtonExistCount").length==0?i.append('<span class="tabButtonExistCount" >'+t+"<\/span>"):i.find(".tabButtonExistCount").html(t))}function addCountNotificationToButtonIfHasGrid(n){var t=$("#"+n).attr("href");t&&postForm(t,new FormData,function(n){var i=getGridUrlFromConfig(n),t;i&&(t=new FormData,t.append("skip",0),t.append("take",1),postForm(i,t,function(n){n&&addUpdateNotificationCount(this.buttonId,n.total)}.bind({buttonId:this.buttonId})))}.bind({buttonId:n}),null,null)}function getTextURl(n){if(n){var t=n.split("/");return t.pop(),t.join("/")+"/GetTitle"}}function loadTabContentDynamicContentText(n){var i=$("#"+n).attr("href"),t;i&&(t=getTextURl(i),t&&postForm(t,new FormData,function(n){addUpdateNotificationCount(this.buttonId,n)}.bind({buttonId:n}),null,null))}function getTabButtonNotifyUpdateAttribute(n){var i="",t;if(n&&n.length>0)for(t=0;t<n.length;t++)i+=" data-notify-"+n[t];return i}function getTabContentTemplate(n){var t="";return n.url&&n.label&&(n.color||(n.color="orange"),t+='<div id="'+n.id+'_holder" class="tabButtonBoxHolder">',t+='<span  style="'+(n.color?"background-color:"+n.color+";":"")+'" class="tabButtonIcon fa '+n.icon+'" ><span style="'+(n.color?"border-color:"+n.color+";":"")+'" ><\/span><\/span>',t+="<a "+getTabButtonNotifyUpdateAttribute(n.nTypes)+' id="'+n.id+'" style="margin-bottom:15px;position:relative;'+(n.color?"border-top:4px solid "+n.color+";":"")+'" class="tabButtonBox" href="'+n.url+'" ><span class="buttonTitle">'+n.label+"<\/span><\/a>",t+="<\/div>",functionsList.push(function(){n.type=="TabContent"?addCountNotificationToButtonIfHasGrid(this.ctrl.id):n.type=="TabContentDynamicContent"&&loadTabContentDynamicContentText(this.ctrl.id);$("#"+this.ctrl.id+"_holder").click(function(){$(this).find("a").click()});$("#"+this.ctrl.id).click(function(n){n.stopPropagation();n.preventDefault();var i=$(this).attr("href"),t=createHolderIfNotExist(this);return t&&loadJsonConfig(i,t,function(){$(document.documentElement,document.body).animate({scrollTop:$("#"+t).offset().top-300},1e3)}),!1})}.bind({ctrl:n}))),t}function getContentTemplate(n){var t="";return n.url&&n.id&&(t+='<div id="'+n.id+'" ><\/div>',functionsList.push(function(){loadJsonConfig(this.ctrl.url,this.ctrl.id)}.bind({ctrl:n}))),t}function getMultiRowInputTemplate(n){var t="",i,r;if(n){if(t+='<div id="'+n.id+'" class="myCtrl row '+(n.class?n.class:"")+'" data-name="'+n.name+'" >',t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',n.ctrls){for(t+='<div class="MultiRowInputRow row">',i=0;i<n.ctrls.length;i++)r=n.ctrls[i].name,n.ctrls[i].name=n.name+"[0]."+n.ctrls[i].name,t+=getInputTemplate(n.ctrls[i]),n.ctrls[i].name=r;t+="<\/div>"}t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12" style="text-align:center;" ><button style="margin:3px;" class="btn btn-primary btn-sm addNewRowForMultiRowCtrl">'+(n.addTitle?n.addTitle:"افزودن")+'<\/button><button style="margin:3px;" class="btn btn-danger btn-sm deleteNewRowForMultiRowCtrl">'+(n.deleteTitle?n.deleteTitle:"حذف اخرین سطر")+"<\/button><\/div>";t+="<\/div>";t+="<\/div>";functionsList.push(function(){initMoultiRowInputButton(this.ctrl);initInternalFunctions(this.ctrl)}.bind({ctrl:n}));addCtrlToObj(n)}return t}function initInternalFunctions(n){var t=$("#"+n.id);t.length>0&&(t[0].addNewRowIfNeeded=function(n){var t=$(this).find(".MultiRowInputRow").length;t<n&&$(this).find(".addNewRowForMultiRowCtrl").click()})}function initMoultiRowInputButton(n){var i=$("#"+n.id).find("button.addNewRowForMultiRowCtrl"),t;i.length>0&&(i[0].ctrl=n,i.click(function(){var n=$(this)[0].ctrl,r,i,t,u;if(n.ctrls){for(r=$(this).closest(".myCtrl").find(".MultiRowInputRow").length,i='<div class="MultiRowInputRow row">',t=0;t<n.ctrls.length;t++)n.ctrls[t].id=uuidv4RemoveDash(),u=n.ctrls[t].name,n.ctrls[t].name=n.name+"["+r+"]."+n.ctrls[t].name,i+=getInputTemplate(n.ctrls[t]),n.ctrls[t].name=u;i+="<\/div>";$(this).closest(".myCtrl").find(".MultiRowInputRow:last").after(i)}executeArrFunctions()}));t=$("#"+n.id).find("button.deleteNewRowForMultiRowCtrl");t.length>0&&(t[0].ctrl=n,t.click(function(){var t=$(this)[0].ctrl,n;if(t.ctrls){if(n=$(this).closest(".myCtrl").find(".MultiRowInputRow").length,n<=1){alert("امکان حذف وجود ندارد");return}$(this).closest(".myCtrl").find(".MultiRowInputRow:last").remove()}}))}function getCheckboxButtonTemplate(n){var t="";return n&&(t+='<div class="form-check form-switch myCtrl '+(n.class?n.class:"")+'">',t+="<input "+(n.dfaultValue?"checked":"")+" "+getCtrlValidationAttribute(n)+'  class="form-check-input " name="'+n.name+'" type="checkbox" value="'+(n.defValue?n.defValue:"true")+'" id="'+n.id+'" />',t+='<label style="padding-right:20px;" class="form-check-label" for="'+n.id+'">'+n.label+"<\/label>",t+="<\/div>",addCtrlToObj(n),n.fileDownloadConfig&&functionsList.push(function(){if(this.ctrl.fileDownloadConfig.url&&this.ctrl.fileDownloadConfig.text&&this.ctrl.id){var n=new FormData;appendAllQueryStringToForm(n);postForm(this.ctrl.fileDownloadConfig.url,n,function(n){var t,i;n&&(t=$("#"+this.ctrl.id).closest(".myCtrl").find("label"),t.length>0&&t.text()&&(i='<a target="_blank" href="'+n+'" title="'+this.ctrl.fileDownloadConfig.text+'" >'+this.ctrl.fileDownloadConfig.text+"<\/a>",t.html(t.text().replace(this.ctrl.fileDownloadConfig.text,i))))}.bind({ctrl:this.ctrl}))}}.bind({ctrl:n}))),t}function getRadioButtonTemplate(n){var t="",u,i,r;if(n){if(t+='<div class="myCtrl form-group '+(n.class?n.class:"")+'">',n.label&&(t+="<label "+(n.id?'id="'+n.id+'"':"")+' style="position: relative;display:block" >'+n.label+(n.isRequired?'<span style="color:red" >*<\/span>':"")+"<\/label>"),n.values&&n.values.length>0){for(u=[],i=0;i<n.values.length;i++)r=n.values[i].oId?n.values[i].oId:uuidv4RemoveDash(),u.push(r),t+='<div class="form-check form-check-inline">',t+="<input "+(i==0?'checked="checked"':"")+' class="form-check-input" name="'+n.name+'" id="'+r+'" type="radio" value="'+n.values[i][n.valuefield]+'" />',t+='<label  style="position: relative" class="form-check-label" for="'+r+'" >'+n.values[i][n.textfield]+"<\/label>",t+="<\/div>";n.idList=u}t+="<\/div>";addCtrlToObj(n);n.showHideCondation&&functionsList.push(function(){var t=this.idList,n;if(t)for(n=0;n<t.length;n++)$("#"+t[n])[0].showHideCondation=this.showHideCondation,$("#"+t[n]).change(function(){var n=$(this)[0].showHideCondation,t=$(this).is(":checked"),i=t==!0?$(this).val():"";showAndHideCtrl(i,n,$(this).attr("id"));$(this)[0].isAutoChangeFProcessing||callInputChangeEventInSameRange($(this).attr("id"))}),showAndHideCtrl("",this.showHideCondation,this.id)}.bind({id:n.id,showHideCondation:n.showHideCondation,idList:n.idList}))}return t}function callInputChangeEventInSameRange(n){var t=$("#"+n);t.length>0&&(t.closest(".panelSWizardHolderContentItem").length>0?(t[0].isAutoChangeFProcessing=!0,t.closest(".panelSWizardHolderContentItem").find("input,select").change()):t.closest(".myPanel").length>0&&(t[0].isAutoChangeFProcessing=!0,t.closest(".myPanel").find("input,select").change()),t[0].isAutoChangeFProcessing=!1)}function getDynamicCtrlsTemplate(n){var t="";return n&&n.id&&n.dataurl&&(t+='<div class="" id="'+n.id+'" ><\/div>'),addCtrlToObj(n),functionsList.push(function(){var n,t;if(this.ctrl.dataurl)if(n=this.ctrl.otherCtrls,n&&n.length>0)for(t=0;t<n.length;t++)$("#"+n[t]).length>0&&($("#"+n[t])[0].ctrlObj=this,$("#"+n[t]).change(function(){updateDynamicCtrls($(this)[0].ctrlObj)}));else updateDynamicCtrls(this)}.bind({ctrl:n})),t}function updateDynamicCtrls(n){var r=new FormData,t,i;if(n.ctrl.otherCtrls)for(t=0;t<n.ctrl.otherCtrls.length;t++)i=$("#"+n.ctrl.otherCtrls[t]),r.append(i.attr("name"),i.val());postForm(n.ctrl.dataurl,r,function(n){var t,i;if($("#"+this.ctrl.id).length>0){if(t="",n&&n.panels&&n.panels.length>0){for(t+='<div class="row">',i=0;i<n.panels.length;i++)t+=getPanelTemplate(n.panels[i]);t+="<\/div>"}$("#"+this.ctrl.id).html(t);executeArrFunctions()}}.bind({ctrl:n.ctrl}))}function getDynamicFileUploadDependCtrlTemplate(n){var t="";return n&&(t+='<div id="'+n.id+'" data-spec-name="'+n.name+'" class="debitFileUploader row"><\/div>'),functionsList.push(function(){$("#"+this.ctrl.id).length>0&&($("#"+this.ctrl.id)[0].addNewRow=function(n){var i="",t;if(n)for(t=0;t<n.length;t++)i+='<div class="col-md-3 col-sm-6 col-xs-12 col-lg-3">',i+=getFileCTRLTemplate({compressImage:!0,label:n[t][this.ctrl.schema.title],type:"file",name:n[t][this.ctrl.schema.name].replace(/ /g,""),acceptEx:this.ctrl.acceptEx,isRequired:n[t][this.ctrl.schema.isRequired],sampleUrl:n[t][this.ctrl.schema.sampleUrl]}),i+="<\/div>";$("#"+this.ctrl.id).html(i);executeArrFunctions()}.bind({ctrl:this.ctrl}))}.bind({ctrl:n})),t}function getChkCtrlBoxTemplateCtrl(n){var t="";return n&&(t+='<div id="'+n.id+'" data-spec-name="'+n.name+'" class="checkCtrl row"><\/div>'),addCtrlToObj(n),functionsList.push(function(){$("#"+this.ctrl.id).length>0&&($("#"+this.ctrl.id)[0].addNewRow=function(n){var t="",i;if(n)for(i=0;i<n.length;i++)t+='<div class="col-md-3 col-sm-6 col-xs-12 col-lg-3">',t+=getDropdownCTRLTemplate({parentCL:"col-md-3 col-sm-6 col-xs-12 col-lg-3",id:"checkBankId"+i,type:"dropDown",textfield:"title",valuefield:"id",dataurl:this.ctrl.bankUrl,label:"بانک",name:"check["+i+"].bankId",isRequired:!0}),t+="<\/div>",t+='<div class="col-md-3 col-sm-6 col-xs-12 col-lg-3">',t+=getTextBoxTemplate({parentCL:"col-md-3 col-sm-6 col-xs-12 col-lg-3",id:"checkNumber"+i,name:"check["+i+"].checkNumber",type:"text",label:"شماره چک",isRequired:!0}),t+="<\/div>",t+='<div class="col-md-3 col-sm-6 col-xs-12 col-lg-3">',t+=getTextBoxTemplate({parentCL:"col-md-3 col-sm-6 col-xs-12 col-lg-3",id:"checkDate"+i,name:"check["+i+"].checkDate",type:"text",label:"تاریخ چک",disabled:!0,dfaultValue:n[i][this.ctrl.schema.date]}),t+="<\/div>",t+='<div class="col-md-3 col-sm-6 col-xs-12 col-lg-3">',t+=getTextBoxTemplate({parentCL:"col-md-3 col-sm-6 col-xs-12 col-lg-3",id:"checkPrice"+i,name:"check["+i+"].checkPrice",type:"text",label:"مبلغ چک",disabled:!0,dfaultValue:n[i][this.ctrl.schema.price]}),t+="<\/div>";$("#"+this.ctrl.id).html(t);executeArrFunctions()}.bind({ctrl:this.ctrl}))}.bind({ctrl:n})),t}function appendAllQueryStringToForm(n){var i=new URLSearchParams(window.location.search);for(var t of i.entries())n.append(t[0],t[1])}function getCurrUrlParameters(){var t="",r=new URLSearchParams(window.location.search),i=!0;for(var n of r.entries())i==!0?(t+="?"+n[0]+"="+n[1],i=!1):t+="&"+n[0]+"="+n[1];return t}function getDynamicFileUploadCtrlTemplate(n){var t="";return n.parentCL&&n.url&&n.schema&&(t+='<div class="row" id="'+n.id+'" ><\/div>',functionsList.push(function(){if(this.ctrl.url){var n=new FormData;appendAllQueryStringToForm(n);postForm(this.ctrl.url,n,function(n){var i,t;if(n&&n.length>0){if(this.ctrl.schema){for(i="",t=0;t<n.length;t++)i+='<div class="'+this.ctrl.css+'">',i+=getFileCTRLTemplate({compressImage:!0,label:n[t][this.ctrl.schema.title],type:"file",name:n[t][this.ctrl.schema.name].replace(/ /g,""),acceptEx:this.ctrl.acceptEx,isRequired:n[t][this.ctrl.schema.isRequired],sampleUrl:n[t][this.ctrl.schema.sampleUrl]}),i+="<\/div>";$("#"+this.ctrl.id).html(i)}executeArrFunctions()}}.bind({ctrl:this.ctrl}))}}.bind({ctrl:n})),addCtrlToObj(n)),t}function getDateTimeMinMaxValueValidation(n){var t="";return n.type=="persianDateTime"&&(n.minDateValidation&&(t+=' data-jdp-min-date="'+getLastDayFromToday(n.minDateValidation)+'" '),n.maxDateValidation&&(t+=' data-jdp-max-date="'+getLastDayFromToday(n.maxDateValidation)+'" ')),t}function hasNumberValidation(n){if(n&&n.length>0)for(var t=0;t<n.length;t++)if(n[t].reg=="^[0-9]*$")return!0;return!1}function addCtrlToObj(n){functionsList.push(function(){var n=$("#"+this.ctrl.id);n.length>0&&(n.hasClass("myCtrl")||n.closest(".myCtrl").length>0)&&(n.hasClass("myCtrl")?n[0].ctrl=this.ctrl:n.closest(".myCtrl")[0].ctrl=this.ctrl)}.bind({ctrl:n}))}function getTextBoxTemplate(n){n.id||(n.id=uuidv4RemoveDash());var t="";return t+='<div class="myCtrl form-group '+(n.class?n.class:"")+'">',n.label&&(t+='<label for="'+n.id+'"  >'+n.label+(n.isRequired?'<span style="color:red" >*<\/span>':"")+"<\/label>"),t+='<input  style="'+(n.fontSize?"font-size:"+n.fontSize:"")+'" '+(getOs()=="iOS"?"":'onfocus="this.removeAttribute(\'readonly\');" readonly="readonly"')+""+(n.ltr?'dir="ltr"':"")+" "+getDateTimeMinMaxValueValidation(n)+' autocomplete="off" '+(n.maxLengh?'maxlength="'+n.maxLengh+'"':"")+" "+(n.type=="persianDateTime"?"data-jdp ":" ")+getCtrlValidationAttribute(n)+" "+(n.disabled?'disabled="disabled"':"")+" "+(n.ph?'placeholder="'+n.ph+'"':"")+" "+(n.id?'id="'+n.id+'"':"")+'" '+(n.dfaultValue?'value="'+n.dfaultValue+'"':n.yearFromKnow!==undefined?'value="'+getLastYearFromToday(n.yearFromKnow)+'"':"")+' name="'+n.name+'" class="form-control" />',n.help&&(t+='<i onclick="return showHelpModal(this)" class="fa fa-question HelpButton inputHelpButton" data-help=\''+n.help+"' ><\/i>"),t+="<\/div>",(n.nationalCodeValidation||hasNumberValidation(n.validations))&&(n.nationalCodeValidation||(n.type="number")),addCtrlToObj(n),functionsList.push(function(){this.toUpperCase&&$("#"+this.id).blur(function(){$(this).val($(this).val().toUpperCase())});$("#"+this.id).change(function(n){n.originalEvent&&validateForm($(this).closest("div"))});setTimeout(function(){$("#"+this.id).attr("type",this.type=="persianDateTime"?"text":this.type)}.bind(this),1);inputNewLabelEventHandler(this.id)}.bind({id:n.id,type:n.type,toUpperCase:n.toUpperCase})),n.mask&&functionsList.push(function(){$("#"+this.ctrl.id).mask(this.ctrl.mask)}.bind({ctrl:n})),n.onChange&&functionsList.push(function(){$("#"+this.ctrl.id).change(function(){eval(this.ctrl.onChange)}.bind({ctrl:this.ctrl}))}.bind({ctrl:n})),n.onEnter&&n.id&&functionsList.push(function(){var n=this.onEnter;$("#"+this.id).keypress(function(t){t.keyCode==13&&eval(n)})}.bind({id:n.id,onEnter:n.onEnter})),n.holderStatusId&&functionsList.push(function(){var n=this.ctrl.holderStatusId;$("#"+this.ctrl.id).change(function(){var t=getCtrlLabel(this),i=$(this).val();updateHolderStatusValue(n,t,i,$(this).attr("id"))})}.bind({ctrl:n})),n.seperator&&functionsList.push(function(){$("#"+this.id).seleperator()}.bind({id:n.id})),n.type=="persianDateTime"&&functionsList.push(function(){setTimeout(function(){var n=$("#"+this.id),t={formatDate:"YYYY/0M/0D",cellWidth:38,cellHeight:30,fontSize:16};this.ctrl.minDateValidation&&(t.startDate=n.attr("data-jdp-min-date"));this.ctrl.maxDateValidation&&(t.endDate=n.attr("data-jdp-max-date"));n.val()&&(t.selectedDate=n.val());n.persianDatepicker(t)}.bind({id:this.id,ctrl:n}),100)}.bind({id:n.id})),n.multiPlay&&functionsList.push(function(){for(var n=0;n<this.ctrl.multiPlay.length;n++)$("#"+this.ctrl.multiPlay[n]).length>0&&($("#"+this.ctrl.multiPlay[n])[0].multiPlayObj||($("#"+this.ctrl.multiPlay[n])[0].multiPlayObj=[]),$("#"+this.ctrl.multiPlay[n])[0].multiPlayObj.push(this.ctrl),$("#"+this.ctrl.multiPlay[n]).change(function(){if($(this)[0].multiPlayObj&&$(this)[0].multiPlayObj.length>0)for(var n=0;n<$(this)[0].multiPlayObj.length;n++)doCalceForMultiplay($(this)[0].multiPlayObj[n])}))}.bind({ctrl:n})),n.sumCalculator&&functionsList.push(function(){for(var n=0;n<this.ctrl.sumCalculator.length;n++)$("#"+this.ctrl.sumCalculator[n]).length>0&&($("#"+this.ctrl.sumCalculator[n])[0].sumCalculatorObj||($("#"+this.ctrl.sumCalculator[n])[0].sumCalculatorObj=[]),$("#"+this.ctrl.sumCalculator[n])[0].sumCalculatorObj.push(this.ctrl),$("#"+this.ctrl.sumCalculator[n]).change(function(){if($(this)[0].sumCalculatorObj&&$(this)[0].sumCalculatorObj.length>0)for(var n=0;n<$(this)[0].sumCalculatorObj.length;n++)doCalceForSum($(this)[0].sumCalculatorObj[n])}))}.bind({ctrl:n})),t}function changeInputValueSetter(n){var t=document.getElementById(n),i=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"value");Object.defineProperty(t,"value",{set:function(){var n=i.set.apply(this,arguments);return $(this).change(),n},get:function(){return i.get.apply(this)}})}function showHelpModal(n){var i=$(n).attr("data-help"),r=$(n).closest(".myCtrl").find("label").text(),t;i&&(t="help"+uuidv4RemoveDash(),$("body").append(getModualTemplate({id:t,"class":"modal-md",title:"راهنما :"+r,modelBody:i,actions:[{title:"بستن","class":"btn-secondary",onClick:"closeThisModal(this)"}]})),$("#"+t).modal("show"))}function doCalceForSum(n){var t,i;if(n&&n.sumCalculator){for(t=0,i=0;i<n.sumCalculator.length;i++)try{$("#"+n.sumCalculator[i]).val().replace(/,/,"")&&(t=t+Number.parseInt($("#"+n.sumCalculator[i]).val().replace(/,/,"")))}catch(r){}isNaN(t)&&(t=0);$("#"+n.id).val(postCommanInNumberPlugin(t))}}function doCalceForMultiplay(n){var t,i;if(n&&n.multiPlay){for(t=0,i=0;i<n.multiPlay.length;i++)try{t=t==0?Number.parseInt($("#"+n.multiPlay[i]).val().replace(/,/,"")):t*Number.parseInt($("#"+n.multiPlay[i]).val().replace(/,/,""))}catch(r){}isNaN(t)&&(t=0);$("#"+n.id).attr("type")=="text"?$("#"+n.id).val(postCommanInNumberPlugin(t)):$("#"+n.id).val(t)}}function getCkEditorTemplate(n){var t="";return t+=getTextAreaTemplate(n),t&&(functionsList.push(function(){isLoadCkEditorTrying==!1?(loadJS("/Modules/Core/js/ce.js.gz?v=1"),isLoadCkEditorTrying=!0):window.initAllCkEditors&&initAllCkEditors()}),addCtrlToObj(n)),t}function inputNewLabelEventHandler(n){changeInputValueSetter(n);$("#"+n).focus(function(){makeCtrlFocused(this)});$("#"+n).blur(function(){setTimeout(function(){$(this).val()||makeCtrlBlure(this)}.bind(this),150)});$("#"+n).change(function(){$(this).val()?makeCtrlFocused(this):makeCtrlBlure(this)});$("#"+n).keyup(function(){$(this).val()?makeCtrlFocused(this):makeCtrlBlure(this)});$("#"+n).val()&&makeCtrlFocused($("#"+n));$("#"+n)[0].updateStatus=function(){$(this).val()?makeCtrlFocused(this):makeCtrlBlure(this)}}function loadJS(n){var t=document.createElement("script");t.setAttribute("type","text/javascript");t.setAttribute("src",n);document.getElementsByTagName("head")[0].appendChild(t)}function loadCSS(n){var t=document.createElement("link");t.setAttribute("rel","stylesheet");t.setAttribute("href",n);document.getElementsByTagName("head")[0].appendChild(t)}function getTextAreaTemplate(n){var t="",i;return t+='<div class="myCtrl form-group '+(n.type=="ck"?"makeLabelBGSilver":"")+'">',n.label&&(t+='<label for="'+n.id+'" >'+n.label+(n.isRequired?'<span style="color:red" >*<\/span>':"")+"<\/label>"),i=n.id?n.id:uuidv4RemoveDash(),n.id||(n.id=i),t+="<textarea "+(n.ltr?'dir="ltr"':"")+' id="'+n.id+'" autocomplete="off" '+getCtrlValidationAttribute(n)+" "+(n.ph?'placeholder="'+n.ph+'"':"")+" "+(n.id?'id="'+n.id+'"':"")+' type="'+n.type+'" name="'+n.name+'" class="form-control '+(n.type=="ck"?"ckEditor":"")+'" >'+(n.dfaultValue?n.dfaultValue:"")+"<\/textarea>",t+="<\/div>",functionsList.push(function(){inputNewLabelEventHandler(this.id)}.bind({id:n.id})),addCtrlToObj(n),t}function showCopModal(n,t,i){var r=n.attr("id")+"_cropModal",u=r+"_cpCtrl",f={id:r,"class":"modal-xl",title:"ویرایش تصویر",modelBody:'<div id="'+u+'" class="cImageCtrl"><\/div>',actions:[{title:"بستن",onClick:"closeThisModal(this)","class":"btn-secondary"},{title:"ذخیره",onClick:"saveCropImage('"+n.attr("id")+"', this)","class":"btn-primary"}]};$("#"+r).length==0&&($("body").append(getModualTemplate(f)),executeArrFunctions());$("#"+u).initImageCrapper(n.attr("src"),t,i);$("#"+r).modal("show")}function saveCropImage(n,t){if($("#tempCanvas").length>0&&$("#"+n).length>0){var r=$("#tempCanvas")[0],i=$("#"+n)[0],u="cropImage";r.toBlob(function(n){var f=new File([n],u+".jpg",{type:"image/jpg"}),t,r;i.compressUploadFile=f;i.useWithouFile=!0;t=window.URL||window.webkitURL;r=t.createObjectURL(n);i.src=r},"image/jpeg",.8);closeThisModal(t)}}function getFileCTRLTemplate(n){var t="";return n.id||(n.id=uuidv4RemoveDash()),t+='<div class="myCtrl form-group myFileUpload">',t+="<div "+(n.id?'id="'+n.id+'"':"")+' style="'+(n.hideImagePreview?"display:none;":"")+'" class="holderUploadImage">',t+='<img data-name="'+n.name+'_address" id="img_'+n.id+'" src="'+(n.sampleUrl?n.sampleUrl:"/Modules/Images/unknown.svg")+'" />',t+="<\/div>",n.label&&(t+='<label class="btn btn-secondary btn-block" style="margin-bottom:0px;text-align:center;" for="file_'+n.id+'" >'+n.label+(n.isRequired?'<span style="color:red" >*<\/span>':"")+"<\/label>"),t+="<input "+(n.compressImage?'data-compressImage="true"':"")+' id="file_'+n.id+'" '+getCtrlValidationAttribute(n)+" "+(n.acceptEx?'accept="'+n.acceptEx+'"':"")+' type="'+n.type+'" name="'+n.name+'" class="form-control" />',t+="<\/div>",addCtrlToObj(n),functionsList.push(function(){$("#file_"+this.id).change(function(){var n=$(this).val();n?$(this).closest(".myFileUpload").length>0&&($(this).closest(".myFileUpload").find("label")[0].prevTitle=$(this).closest(".myFileUpload").find("label").html(),$(this).closest(".myFileUpload").find("label").html($(this)[0].files[0].name),$(this).closest(".myFileUpload").find("label").removeClass("btn-secondary").addClass("btn-success")):$(this).closest(".myFileUpload").length>0&&($(this).closest(".myFileUpload").find("label").html($(this).closest(".myFileUpload").find("label")[0].prevTitle),$(this).closest(".myFileUpload").find("label").removeClass("btn-success").addClass("btn-secondary"))})}.bind({id:n.id})),functionsList.push(function(){var t="img_"+this.id,i="file_"+this.id,n;$("#"+t).length!=0&&$("#"+i).length!=0&&($("#"+i).change(function(){readFileFromInput(this,t)}),n=[],this.ctrl.cropper&&n.push({icon:"fa-crop",onClick:function(){showCopModal($("#"+t),this.ctrl.cropperValidation?this.ctrl.cropperValidation.min:null,this.ctrl.cropperValidation?this.ctrl.cropperValidation.max:null)}.bind({ctrl:this.ctrl})}),this.ctrl.deleteButton&&n.push({icon:"fa-trash",onClick:function(){postForm(this.ctrl.deleteButton,new FormData,function(){})}.bind({ctrl:this.ctrl})}),$("#"+i).closest(".myFileUpload").find(".holderUploadImage").addStatusBarToElement(null,null,null,{close:"hide"},n))}.bind({id:n.id,ctrl:n})),t}function readFileFromInput(n,t){if(n.files&&n.files[0]&&/image/i.test(n.files[0].type)){var i=new FileReader;i.onload=function(i){$("#"+t).attr("src",i.target.result);var r=new Image;r.src=i.target.result;r.onload=function(){compressImageAndAddToFormData(n.files[0],r,$("#"+t)[0])}};i.readAsDataURL(n.files[0])}}function getTokennCTRLTemplate(n){n.type=="tokenBox"&&(n.type="dropDown");n.type=="tokenBox2"&&(n.type="dropDown2");n.class?n.class+=" tokenBox":n.class="tokenBox";n.moveNameToParent=!0;var t=getDropdownCTRLTemplate(n);return n.type=="dropDown"&&(n.type="tokenBox"),n.type=="dropDown2"&&(n.type="tokenBox2"),functionsList.push(function(){initTokenBox($("#"+this.id).closest(".tokenBox"))}.bind({id:n.id})),t}function setSelect2LabelAria(n){var t=$("#"+n).closest(".myCtrl"),i,r;t.length>0&&(i=t.find("label").text(),r=t.find("label").attr("id"),i&&(t.find("[aria-labelledby]").attr("aria-label",i).attr("aria-labelledby",r),t.find('[role="textbox"]').attr("aria-label",i).attr("aria-labelledby",r)))}function updateHolderStatusValue(n,t,i,r){var u=$("#"+n),o=$("#"+r).closest(".myCtrl").is(":visible"),f=i&&o?i:"",e="status_"+r;u.length>0&&(u.find("#"+e).length>0?$("#"+e).text(f):f&&u.append('<span class="ctrlStatusIndicator" id="'+e+'" >'+f+"<\/span>"))}function getCtrlLabel(n){return($(n).closest(".myCtrl").find("label").text()+"").replace("*","")}function refreshInquiryGrid(n){var t,i,r;n&&(t=$("#"+n),t.length>0&&(i=$(t).closest(".modal-body"),i.length>0&&(r=i.find(".myGridCTRL"),r.length>0&&r[0].refreshData())))}function getDropdownCTRLTemplate(n){var t="",r,i;if(n.id||(n.id=uuidv4RemoveDash()),r=uuidv4RemoveDash(),t+='<div id="myCtrlDivHolder'+n.id+'" class="myCtrl '+(n.type=="dropDown"&&!n.moveNameToParent?"myDropdown myDropdownHeight":"")+" form-group "+(n.class?n.class:"")+'"'+(n.moveNameToParent?' name="'+n.name+'"':"")+">",n.label&&(t+='<label id="'+r+'" for="'+n.id+'" >'+n.label+(n.isRequired?'<span style="color:red" >*<\/span>':"")+"<\/label>"),t+="<select "+(n.ignoreChangeOnBinding?'data-ignore-change-onBinding="true"':"")+" "+(n.reInitOnShowModal?'reInitOnShowModal="true" ':"")+(n.ignoreOnChange?'ignoreOnChange="ignoreOnChange" ':"")+(n.disabled?'disabled="disabled"':"")+" "+getCtrlValidationAttribute(n)+" "+(n.bindFormUrl?"bindFormUrl="+n.bindFormUrl:"")+' style="width: 100%" '+(n.dataS2?'data-s2="true"':"")+'  id="'+n.id+'"  data-valuefield="'+n.valuefield+'" data-textfield="'+n.textfield+'" data-url2="'+(n.dataurl?n.dataurl:"")+'" data-url="'+(n.dataurl?n.dataurl:"")+'" '+(n.moveNameToParent?"":'name="'+n.name+'"')+' class="form-control" >',n.values&&n.values.length>0)for(i=0;i<n.values.length;i++)t+="<option "+(n.dfaultValue&&n.values[i][n.valuefield]==n.dfaultValue?'selected="selected"':"")+" value='"+n.values[i][n.valuefield]+"' >"+n.values[i][n.textfield]+"<\/option>";return t+="<\/select>",n.type!="dropDown"||n.moveNameToParent||(t+='<div class="myDropdownText myDropdownHeight" ><span class="myDropdownHeight"><\/span><i ><\/i><\/div>',t+='<div id="myCtrlDivHolder'+n.id+'_HItems" class="myDropdownItems '+(n.itemsClass?n.itemsClass:"")+'"><\/div>'),t+="<\/div>",addCtrlToObj(n),n.holderStatusId&&functionsList.push(function(){var n=this.ctrl.holderStatusId;$("#"+this.ctrl.id).change(function(){var t=getCtrlLabel(this),i=$(this).find("option:selected").text();updateHolderStatusValue(n,t,i,$(this).attr("id"))})}.bind({ctrl:n})),n.type=="dropDown"?functionsList.push(function(){this.ctrl.exteraParameterIds&&($("#"+this.id)[0].exteraParameterIds=this.ctrl.exteraParameterIds);this.moveNameToParent||$("#"+this.id).closest(".myDropdown").initMyDropdown();initDropdown($("#"+this.id));this.onChange&&$("#"+this.id).change(function(){var n=this.sOnChange;n.indexOf("{{currentIdHolder}}")>-1&&(n=n.replace("{{currentIdHolder}}",this.id));eval(n)}.bind({sOnChange:this.onChange,id:this.id}))}.bind({id:n.id,moveNameToParent:n.moveNameToParent,onChange:n.onChange,ctrl:n})):(functionsList.push(function(){var u={},i,r,t;if(window.exteraModelParams)for(i in exteraModelParams)u[i]=exteraModelParams[i];if(r={placeholder:n.ph?n.ph:"",ajax:{url:this.dataurl,processResults:function(n){return this.ctrl&&this.ctrl.updateMapMarker&&n&&updateMapMarkers(n.results,this.ctrl.updateMapMarker),n}.bind({ctrl:n}),data:function(n){return addExteraParameterFromCtrls(this.exteraParameterIds,this.exParam,this.exteraParameterIdsEndWith,this.elementId),this.exParam.search=n.term,this.exParam.page=n.page||1,this.exParam}.bind({exParam:u,exteraParameterIds:this.exteraParameterIds,exteraParameterIdsEndWith:this.ctrl.exteraParameterIdsEndWith,elementId:this.ctrl.id})}},this.ctrl.disableCondationStyleOnly&&(r.templateResult=function(n){return n[this.tProp]?n.text:$('<span style="color:silver;" >'+n.text+"<\/span>")}.bind({tProp:this.ctrl.disableCondationStyleOnly})),$("#"+this.id).select2(r),setSelect2LabelAria(this.id),this.exteraParameterIds)for(t=0;t<this.exteraParameterIds.length;t++)$("#"+this.exteraParameterIds[t]).change(function(){if(!$("#"+this.curId)[0].startBinding){var n=$("#"+this.id).data("select2");n&&(n.val([""]),n.trigger("change"))}}.bind({id:this.id,curId:this.exteraParameterIds[t]}));this.ctrl.showModalCondation&&$("#"+this.id).change(function(){showModalOnDynamiCondation(this.ctrl.id,this.ctrl.showModalCondation)}.bind({ctrl:this.ctrl}));this.onChange&&$("#"+this.id).change(function(){var n=this.sOnChange;n.indexOf("{{currentIdHolder}}")>-1&&(n=n.replace("{{currentIdHolder}}",this.id));eval(n)}.bind({sOnChange:this.onChange,id:this.id}));$("#"+this.id).closest(".myCtrl").find("label").click(function(n){n.preventDefault();n.stopPropagation();var t=$(this).closest(".myCtrl").find("select").data("select2");return t&&t.open(),!1})}.bind({id:n.id,dataurl:n.dataurl,exteraParameterIds:n.exteraParameterIds,onChange:n.onChange,ctrl:n})),functionsList.push(function(){var n=$("#"+this.id),t;if($(n)[0].updateStatus=function(){$(this).val()?makeCtrlFocused(this):makeCtrlBlure(this)},n.attr("data-select2-id")&&$(n).data("select2")){t=n;$(n).on("select2:open",function(){makeCtrlFocused(t)});$(n).on("select2:close",function(){$(t).data("select2").val()||makeCtrlBlure(t)})}}.bind({id:n.id}))),initDropDownExteraFunctions(n),t}function showModalOnDynamiCondation(n,t){var f=$("#"+n).data("select2"),i,r,u;f&&(i=$("#"+n).select2("data"),i&&i.length>0&&(i[0][t.propName]||(r=uuidv4RemoveDash(),u=getModualTemplate({id:r,title:t.title,modelBody:t.message}),$("body").append(u),$("#"+r).modal("show"))))}function addExteraParameterFromCtrls(n,t,i,r){var f,u;if(n&&n.length>0)for(f=0;f<n.length;f++)u=$("#"+n[f]),i&&r&&(u=$("#"+r).closest(".MultiRowInputRow").find("[name$="+n[f])),u.length>0&&(u.closest(".tokenBox").length>0?(t[u.closest(".tokenBox").attr("name")]="",u.closest(".tokenBox").find('input[type="hidden"]').each(function(){t[$(this).attr("name")]+=$(this).val()+","})):i?t[n[f]]=u.val():t[u.attr("name")]=u.val())}function bindExteraDropDown(n,t,i){var r,u;if(n&&n.length>0){for(r="",u=0;u<n.length;u++)r+='<div class="'+t+' dynamicCtrlsHolder">',r+=getDropdownCTRLTemplate({id:"requiredDD"+n[u].id,type:"dropDown",textfield:"title",valuefield:"id",label:n[u].title,name:"dynamicCTRLs",isRequired:!0,values:n[u].values}),r+="<\/div>";r&&$("#"+i).length>0&&($("#"+i).closest(".myPanel").find(".dynamicCtrlsHolder").remove(),$("#"+i).closest(".myCtrl").parent().after(r),executeArrFunctions())}}function changeAllLabel(n,t,i){var u,r,f;if(t&&i)for(u=0;u<n.length;u++)r=n[u],r.url&&r.targetCtrlId&&r.titleSchema&&(f=new FormData,f.append(t,i),postForm(r.url,f,function(n){if(n&&this.curConfig.titleSchema&&$("#"+this.curConfig.targetCtrlId).length>0){var t=$("#"+this.curConfig.targetCtrlId).closest(".myCtrl").find("label"),i=t.html(),r=!1;i&&i.trim().indexOf('<span style="color:red">*<\/span>')>-1&&(r=!0);t.html(n[this.curConfig.titleSchema]+(r==!0?'<span style="color:red">*<\/span>':""))}}.bind({curConfig:r})))}function initDropDownExteraFunctions(n){n.changeOtherCtrLabel&&n.changeOtherCtrLabel.length>0&&functionsList.push(function(){if($("#"+n.id).length>0){var t=this.ctrl;$("#"+n.id).change(function(){var n=$(this).val(),i=$(this).attr("name");changeAllLabel(t.changeOtherCtrLabel,i,n)})}}.bind({ctrl:n}));n.bindFormUrl&&functionsList.push(function(){$("#"+this.ctrl.id).length>0&&($("#"+this.ctrl.id)[0].ctrl=this.ctrl,$("#"+this.ctrl.id).change(function(){var t=$(this)[0].ctrl,u,n,i,r;if(t&&t.bindFormUrl){if(u=$(this).find("option:selected").attr("value"),n=new FormData,n.append("id",u),window.exteraModelParams)for(i in exteraModelParams)n.append(i,exteraModelParams[i]);r=$(this).closest(".myPanel");showLoader(r);postForm(t.bindFormUrl,n,function(n){bindForm(n,$(this.curThis).closest(".myPanel"))}.bind({curThis:this}),null,function(){hideLoader(r)})}}))}.bind({ctrl:n}));n.dynamicCtrlConfig&&functionsList.push(function(){$("#"+this.ctrl.id).length>0&&($("#"+this.ctrl.id)[0].dynamicCtrlConfig=this.ctrl.dynamicCtrlConfig,$("#"+this.ctrl.id).change(function(){var n=$(this)[0].dynamicCtrlConfig,i,r,t;if(n&&(i=n.dataurl,i&&n.ctrlIds&&n.ctrlIds.length>0)){for(r=new FormData,t=0;t<n.ctrlIds.length;t++)r.append(n.ctrlIds[t].postName,$("#"+n.ctrlIds[t].ctrlId).val());postForm(i,r,function(t){bindExteraDropDown(t,n.css,n.targetCtrlId)})}}))}.bind({ctrl:n}));n.showHideCondation&&functionsList.push(function(){$("#"+this.id)[0].showHideCondation=this.showHideCondation;$("#"+this.id).change(function(){var n=$(this)[0].showHideCondation,t=$(this).find("option:selected").attr("value");showAndHideCtrl(t,n,$(this).attr("id"));$(this)[0].isAutoChangeFProcessing||callInputChangeEventInSameRange($(this).attr("id"))});showAndHideCtrl("",this.showHideCondation,this.id)}.bind({id:n.id,showHideCondation:n.showHideCondation}));n.targetDropDown&&functionsList.push(function(){$("#"+this.id)[0].targetDropDown=this.targetDropDown;$("#"+this.id).change(function(){for(var t=$(this)[0].targetDropDown,i=$(this).find("option:selected").attr("value"),n=0;n<t.length;n++)$("#"+t[n])[0].resData=null,initDropdown($("#"+t[n]),!0,i)})}.bind({id:n.id,targetDropDown:n.targetDropDown}));n.callChangeEvents&&functionsList.push(function(){$("#"+this.id)[0].callChangeEvents=this.callChangeEvents;$("#"+this.id).change(function(){for(var t=$(this)[0].callChangeEvents,n=0;n<t.length;n++)$("#"+t[n]).change()})}.bind({id:n.id,callChangeEvents:n.callChangeEvents}));n.childId&&functionsList.push(function(){setTimeout(function(){$("#"+this.id).change(function(){var n=$("#"+this.id).find("option:selected").attr("value"),t;n?(t=$("#"+this.childId).attr("data-url2"),$("#"+this.childId).attr("data-url",t+"?id="+n),$("#"+this.childId)[0].resData=null,initDropdown($("#"+this.childId))):($("#"+this.childId).html('<option value=""><\/option>'),$("#"+this.childId).closest(".myDropdown")[0].updateItemFromSelect())}.bind({childId:this.childId,id:this.id}))}.bind({id:this.id,childId:this.childId}),1e3)}.bind({id:n.id,childId:n.childId}))}function reinitDropdown(n){$("#"+n).length>0&&($("#"+n)[0].resData=null,initDropdown($("#"+n)))}function showAndHideCtrl(n,t,i){var r=t.filter(function(n){return n.isDefault==!0}),u,f;r=r.length>0?r[0]:null;r==null&&(r=t.filter(function(n){return n.isDefault==!0}),r=r.length==0?null:r[0]);u=t.filter(function(t){return t.value==n});u=u.length>0?u[0]:null;f=t.filter(function(t){return t.value&&t.value.substr(0,1)=="!"?t.value.replace("!","")!=n:!1});f=f.length>0?f[0]:null;u?showAndHideByClass(u,i):f?showAndHideByClass(f,i):r&&showAndHideByClass(r,i)}function showAndHideByClass(n,t){var r=$("#"+t).is(":visible"),u=$("#"+t).closest(".myDropdown").length>0&&$("#"+t).closest(".myDropdown").is(":visible"),i;if(n.classShow&&n.classShow.length>0&&(r||u))for(i=0;i<n.classShow.length;i++)$("."+n.classShow[i]).parent().css("display","block");if(n.classHide&&n.classHide.length>0&&(r||u))for(i=0;i<n.classHide.length;i++)$("."+n.classHide[i]).parent().css("display","none")}function getModualTemplateActionButton(n){var t="",i;if(n&&n.actions&&n.actions.length>0){for(t+='<div class="modal-footer">',i=0;i<n.actions.length;i++)t+=getButtonTemplate(n.actions[i]);t+="<\/div>"}return t}function getButtonTemplate(n){return"<button "+(n.id?'id="'+n.id+'"':"")+' onclick="'+n.onClick+'" type="button" class="btn '+n.class+'" >'+(n.title?n.title:n.label)+"<\/button>"}function getStepWizardTemplate(n){var i="",u,t,r,f,e;if(n&&n.steps&&n.steps.length>0){for(n.id||(n.id=uuidv4RemoveDash()),u=0;u<n.steps.length;u++)n.steps[u].id||(n.steps[u].id=uuidv4RemoveDash());for(n.steps=n.steps.sort(function(n,t){return n.order>t.order?1:n.order<t.order?-1:0}),i+='<div style="'+(n.hideBorder?"border:none;":"")+'" class="panelSWizard" id="'+n.id+'">',i+='<div class="panelSWizardHolderHeader">',t=0;t<n.steps.length;t++)r="",n.steps[t].showCondation&&n.steps[t].showCondation.length>0&&(r="showCondation='"+JSON.stringify(n.steps[t].showCondation)+"'"),i+='<span style="'+(n.headerTextalign?"text-align:"+n.headerTextalign+";":"")+'" id="step_'+n.steps[t].id+'" '+r+' class="panelSWizardHolderHeaderItem '+(t==0?"panelSWizardHolderHeaderItemActive":"")+'">',n.steps[t].moveBackToStep&&(i+='<div class="swMoveBackToStepButton" onclick="moveToStepById(\'stepContent_'+n.steps[t].moveBackToStep+'\')" ><i class="fa fa-arrow-right" ><\/i><\/div>'),i+=n.steps[t].title,t>0&&n.moveBackButtonToTop&&(i+='<button class="btn btn-warning btn-sm stepButton buttonBack moveToTopSW"><i class="fa fa-chevron-right"><\/i>بازگشت<\/button>'),i+="<\/span>";for(i+="<\/div>",i+='<div class="panelSWizardHolderContent">',t=0;t<n.steps.length;t++){if(r="",n.steps[t].showCondation&&n.steps[t].showCondation.length>0&&(r="showCondation='"+JSON.stringify(n.steps[t].showCondation)+"'"),i+='<div data-submit-url="'+(n.steps[t].submitUrl?n.steps[t].submitUrl:"")+'" id="stepContent_'+n.steps[t].id+'" '+r+' class="panelSWizardHolderContentItem '+(t==0?"panelSWizardHolderContentItemActive":"")+'">',n.steps[t].panels&&n.steps[t].panels.length>0){for(i+='<div class="row">',f=0;f<n.steps[t].panels.length;f++)i+=getPanelTemplate(n.steps[t].panels[f]);i+="<\/div>"}n.steps[t].submitUrl||(i+='<div class="panelSWizardHolderContentHolderStepButton">',t>0&&(n.moveBackButtonToTop||(i+='<button class="btn btn-warning btn-sm stepButton buttonBack"><i class="fa fa-chevron-right"><\/i>بازگشت<\/button>')),e=t+1>=n.steps.length,n.steps[t].hideMoveNextButton||(i+='<button class="btn btn-primary btn-sm stepButton '+(e?"lastStepButton":"buttonConfirm")+' ">'+(e?n.lastStepButtonTitle:n.fistStepButtonTitle&&t==0?n.fistStepButtonTitle:'ادامه<i class="fa fa-chevron-left"><\/i>')+"<\/button>"),i+="<\/div>");i+="<\/div>"}i+="<\/div>"}return functionsList.push(function(){initSWFunctions(this.wizard.id,this.wizard.actionOnLastStep);hideStepByRequest(n.steps);$("#"+this.wizard.id)[0].wizard=this.wizard}.bind({wizard:n})),i}function convertFormDataToJson(n){var t={};return!n||n.constructor!=(new FormData).constructor?t:(n.forEach(function(n,i){var u,o;if(i.indexOf("[")!=-1&&i.indexOf("]")!=-1){var r=i.split("[")[0],f=i.split("].")[1],e=Number.parseInt(i.split("[")[1].split("]")[0]);r&&f&&(t[r]||(t[r]=[]),t[r].length<=e?(u={},u[f]=n,t[r].push(u)):(u=t[r][e],u[f]=n))}else t[i]?(t[i].constructor!=Array&&(o=t[i],t[i]=[],t[i].push(o)),t[i].push(n)):t[i]=n}),t)}function convertToPerisanDate(n){var i,r,t;try{for(i=n.toLocaleDateString("fa-IR").replace(/([۰-۹])/g,n=>String.fromCharCode(n.charCodeAt(0)-1728)),r=i.split("/"),i="",t=0;t<r.length;t++)i+=r[t].length==1?"0"+r[t]+(t<2?"/":""):r[t]+(t<2?"/":"");return i}catch{return""}}function getLastYearFromToday(n){var t=new Date;return t.setFullYear(t.getFullYear()+n),convertToPerisanDate(t)}function getLastDayFromToday(n){var t=new Date;return t.setDate(t.getDate()+n),convertToPerisanDate(t)}function submitThisStep(n,t){var i=$(n).closest(".panelSWizardHolderContentItem"),r;i.length>0&&(r=i.attr("data-submit-url"),t&&(r=t),r&&(showLoader(i.find(".myPanel")),postForm(r,getFormData(i),function(n){if(n&&n.data&&(n.data.stepId&&(moveToStepById("stepContent_"+n.data.stepId),n.data.data&&bindForm(n.data.data,$("#stepContent_"+n.data.stepId)),n.data.labels&&n.data.labels.length>0&&changeInputLabels(n.data.labels,n.data.stepId),n.data.countDownId&&$("#"+n.data.countDownId).length>0&&$("#"+n.data.countDownId)[0].start()),n.data.hideModal&&$(this).closest(".modal").modal("hide"),n.data.userfullname&&(window.userLoginWeb&&userLoginWeb(n.data.userfullname,n.data.isUser),window.showLoginUserPanelInMainPage&&showLoginUserPanelInMainPage(),window.whatToDoAfterUserLogin&&whatToDoAfterUserLogin&&whatToDoAfterUserLogin.length>0)))for(var t=0;t<whatToDoAfterUserLogin.length;t++)whatToDoAfterUserLogin[t].curFun(n.data.userfullname)}.bind(i),null,function(){hideLoader($(i.find(".myPanel")))}.bind(i))))}function changeInputLabels(n,t){var i,r,u;if(n)for(i=0;i<n.length;i++)r=n[i].inputName,u=n[i].labelText,$("#stepContent_"+t).find('input[name="'+r+'"]').closest(".myCtrl").find("label").html(u)}function hideStepByRequest(n){var i,t,r,u;if(n&&n.length>0)for(i=n.filter(function(n){return n.showUrl}),t=0;t<i.length;t++){if(r=new FormData,window.exteraModelParams)for(u in exteraModelParams)r.append(u,exteraModelParams[u]);postForm(i[t].showUrl,r,function(n){n?bindForm(n,$("#stepContent_"+this.step.id)):($("#step_"+this.step.id).attr("dontShow","dontShow"),$("#stepContent_"+this.step.id).attr("dontShow","dontShow"))}.bind({step:i[t]}))}}function isShowCondationValid(n){var r=!0,u,t,i,f;if($(n).length>0)if(u=$(n).attr("showCondation"),$(n).attr("dontShow"))r=!1;else if(u&&(t=JSON.parse(u),t&&t.length>0))for(i=0;i<t.length;i++)if(f=$("#"+t[i].id),t[i].operator=="!="&&!(f.val()!=t[i].value)){r=!1;break}return r}function moveToNextStepForSW(n){n&&$(n).closest(".panelSWizard").length>0&&$(n).closest(".panelSWizard")[0].moveNext()}function refreshMapIfExist(n){$(n).find(".olMap").length>0&&$(n).find(".olMap")[0].ctrl&&($(n).find(".olMap").html(""),initMapInner($(n).find(".olMap")[0].ctrl))}function initSWFunctions(n,t){$("#"+n).length>0&&($("#"+n)[0].moveNext=function(n){var i,t;if(validateForm($(this).find(">.panelSWizardHolderContent>.panelSWizardHolderContentItemActive"))){for(i=$(this).find(">.panelSWizardHolderHeader>.panelSWizardHolderHeaderItemActive").next();isShowCondationValid(i)==!1;)i=i.next();for(i.length>0&&($(this).find(">.panelSWizardHolderHeader>.panelSWizardHolderHeaderItemActive").removeClass("panelSWizardHolderHeaderItemActive"),i.addClass("panelSWizardHolderHeaderItemActive")),t=$(this).find(">.panelSWizardHolderContent>.panelSWizardHolderContentItemActive").next();isShowCondationValid(t)==!1;)t=t.next();t.length>0&&($(this).find(">.panelSWizardHolderContent>.panelSWizardHolderContentItemActive").removeClass("panelSWizardHolderContentItemActive"),t.addClass("panelSWizardHolderContentItemActive"),n||$(t).find("select:not([ignoreOnChange])").change(),refreshMapIfExist($(t)),$([document.documentElement,document.body]).animate({scrollTop:$(t).offset().top-300},500))}},$("#"+n)[0].moveToStepById=function(n){var t;if($("#"+n).length>0){var u=$("#"+n)[0],i=-1,r=$("#"+n).closest(".panelSWizardHolderContent");r.length>0&&r.find(".panelSWizardHolderContentItem").each(function(n){$(this)[0]==u&&(i=n)});i>-1&&(t=$("#"+n).closest(".panelSWizard"),t.length>0&&($(t).find(".panelSWizardHolderHeaderItemActive").removeClass("panelSWizardHolderHeaderItemActive"),$(t).find(".panelSWizardHolderHeaderItem").eq(i).addClass("panelSWizardHolderHeaderItemActive"),$(t).find(".panelSWizardHolderContentItemActive").removeClass("panelSWizardHolderContentItemActive"),$(t).find(".panelSWizardHolderContentItem").eq(i).addClass("panelSWizardHolderContentItemActive")))}},$("#"+n)[0].movePrev=function(){for(var t=$(this).find(">.panelSWizardHolderHeader>.panelSWizardHolderHeaderItemActive").prev(),n;isShowCondationValid(t)==!1;)t=t.prev();for(t.length>0&&($(this).find(">.panelSWizardHolderHeader>.panelSWizardHolderHeaderItemActive").removeClass("panelSWizardHolderHeaderItemActive"),t.addClass("panelSWizardHolderHeaderItemActive")),n=$(this).find(">.panelSWizardHolderContent>.panelSWizardHolderContentItemActive").prev();isShowCondationValid(n)==!1;)n=n.prev();n.length>0&&($(this).find(">.panelSWizardHolderContent>.panelSWizardHolderContentItemActive").removeClass("panelSWizardHolderContentItemActive"),n.addClass("panelSWizardHolderContentItemActive"))},initSWMoveNextAndMovePrevButton(n,t))}function initSWMoveNextAndMovePrevButton(n,t){$("#"+n).find(".buttonBack").click(function(){moveBackSW(this)});$("#"+n).find(".buttonConfirm").click(function(){moveNextSW(this)});$("#"+n).find(".lastStepButton").click(function(){validateForm($(this).closest(".panelSWizardHolderContentItemActive"))&&lastButtonActionSW(t)})}function moveBackSW(n){$(n).closest(".panelSWizard").length>0&&$(n).closest(".panelSWizard")[0].movePrev()}function moveToStepById(n,t,i,r){if($("#"+n).closest(".panelSWizard").length>0&&($("#"+n).closest(".panelSWizard")[0].moveToStepById(n),r)){var u=$(r).closest(".panelSWizardHolderContentItem"),f=u.find('[name="'+i+'"]').val();$("#"+n).find('[name="'+t+'"]').val(f);$("#"+n).find('[name="'+t+'"]').focus()}}function moveNextSW(n){$(n).closest(".panelSWizard").length>0&&$(n).closest(".panelSWizard")[0].moveNext()}function lastButtonActionSW(n){if(n&&n.length>0)for(var t=0;t<n.length;t++)doPageActions(n[t])}function doPageActions(n){var r,t,i;if(n&&n.actionName)if(n.actionName=="refreshGrid"&&n.objectId&&$("#"+n.objectId).length>0)$("#"+n.objectId).length>0&&$("#"+n.objectId)[0].refreshData?$("#"+n.objectId)[0].refreshData():$("#"+n.objectId)[0].tempGridConfig&&$("#"+n.objectId).initMyGrid($("#"+n.objectId)[0].tempGridConfig);else if(n.actionName=="submitPage"&&n.objectId&&$("#"+n.objectId).length>0){if(r=$("#"+n.objectId),t=getFormData(r),window.exteraModelParams)for(i in exteraModelParams)t.append(i,exteraModelParams[i]);showLoader(r);postForm(n.url,t,function(n){this.actionOnLastStep.detailesUrl&&n.isSuccess==!0&&n.data&&(location.href=(n.data.url?n.data.url:this.actionOnLastStep.detailesUrl)+"?id="+n.data.id)}.bind({actionOnLastStep:n}),null,function(){hideLoader(r)})}else if(n.actionName=="showModal"&&n.objectId&&$("#"+n.objectId).length>0)$("#"+n.objectId).modal("show");else if(n.actionName=="showPrintPreview"&&n.objectId&&$("#"+n.objectId).length>0&&n.modalId&&$("#"+n.modalId).length>0&&n.url){if(t=getFormData($("#"+n.objectId)),window.exteraModelParams)for(i in exteraModelParams)t.append(i,exteraModelParams[i]);showLoader($("#"+n.objectId));postForm(n.url,t,function(t){t&&t.isSuccess!=!1&&($("#"+n.modalId).find(".modal-body").html(t),$("#"+n.modalId).modal("show"))},null,function(){hideLoader($("#"+n.objectId))})}}function getGridNotificationRefreshAttributes(n){var i="",t;if(n&&n.length>0)for(t=0;t<n.length;t++)i+=" data-notify-"+n[t];return i}function getGridTemplate(n,t){var r="",i;return n&&(i=n.id?n.id:uuidv4RemoveDash(),r+="<div "+getGridNotificationRefreshAttributes(n.notificationTriger)+'  id="'+i+'" class="myGridCTRL '+(n.class?n.class:"")+'"><\/div>',functionsList.push(function(){t?$("#"+i)[0].tempGridConfig=n:$("#"+i).initMyGrid(n)})),r}function getOs(){var n=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(n)?"Windows Phone":/android/i.test(n)?"Android":/iPad|iPhone|iPod/.test(n)&&!window.MSStream?"iOS":"unknown"}function reinitCtrls(n){var t=$("#"+n);t.find("select[reinitonshowmodal]").each(function(){$(this)[0].resData=null;initDropdown($("#"+$(this).attr("id")),!0)})}function showModal(n,t){var r,i;clearForm($("#"+n));$("#"+n)[0].pKey=null;$("#"+n).modal("show");$("#"+n)[0].grid=$(t).closest(".myGridCTRL")[0];$(t).closest(".myGridCTRL").length>0&&($("#"+n)[0].gridOwnerId=$(t).closest(".myGridCTRL").attr("id"));$(t).closest(".modal").length>0&&(i=$(t).closest(".modal")[0].pKey,i&&($("#"+n)[0].pKey=i));$(t).closest(".gridDetailes").length>0&&(r=$(t).closest(".gridDetailes")[0].option,r&&r.exteraParameters&&r.exteraParameters.pKey&&(i=r.exteraParameters.pKey,i&&($("#"+n)[0].pKey=i)));$("#"+n).find(".olMap").length>0&&$("#"+n).find(".olMap")[0].ctrl&&($("#"+n).find(".olMap").html(""),initMapInner($("#"+n).find(".olMap")[0].ctrl));reinitCtrls(n)}function initGridIfNotAlreadyInited(n){$(n).length>0&&!$(n)[0].refreshData&&$(n)[0].tempGridConfig&&$(n).initMyGrid($(n)[0].tempGridConfig)}function showEditModal(n,t,i,r,u,f,e,o,s){var h,c,a,l,v;t&&i?(h=$(r).closest(".myGridCTRL"),showLoader(h),c=new FormData,c.append("id",n),u&&c.append("pKey",u),a=h.attr("id"),e&&u&&($("#"+i)[0].pKey=u),postForm(t,c,function(t){if(t){var r=$("#"+this.modalId);o?(r.find(".modal-body").html(t),r.modal("show")):(clearForm(r),r.modal("show"),$("#"+i).find(".olMap").length>0&&$("#"+i).find(".olMap")[0].ctrl&&($("#"+i).find(".olMap").html(""),initMapInner($("#"+i).find(".olMap")[0].ctrl)),bindForm(t,r,f),$("#"+i)[0].pKey=u?u:n,$("#"+i)[0].gridOwnerId=a,$("#"+i).find(".myGridCTRL").length>0&&$("#"+i).find(".myGridCTRL").each(function(){$(this)[0].refreshData?$(this)[0].refreshData():initGridIfNotAlreadyInited(this)}))}}.bind({modalId:i}),null,function(){hideLoader(h)})):i&&$("#"+i).length>0&&($("#"+i)[0].pKey=n,s&&(l=$(r).closest("[data-row-json]"),l.length>0&&(v=JSON.parse(l.attr("data-row-json")),bindForm(v,$("#"+i)))),$("#"+i).modal("show"),$("#"+i).find(".myGridCTRL").length>0&&$("#"+i).find(".myGridCTRL").each(function(){$(this)[0].refreshData?$(this)[0].refreshData():initGridIfNotAlreadyInited(this)}));reinitCtrls(i)}function simpleAjax(n,t,i){var r,u;t&&(r=$(i).closest(".myGridCTRL"),showLoader(r),u=new FormData,u.append("id",n),postForm(t,u,function(n){n&&n.isSuccess==!0&&r[0].refreshData&&r[0].refreshData()},null,function(){hideLoader(r)}))}function setFocusToFirstVisbleText(n){if(n){n.find("input:visible:eq(0)").focus();var t=$(n).closest(".modal");t.animate({scrollTop:t.find(".modal-body").height()},300)}}function updateDashboardGridCountIfExist(){$(".tabButtonBox").each(function(){$(this).find(".tabButtonExistCount").length>0&&addCountNotificationToButtonIfHasGrid($(this).attr("id"))})}function postButtonAndMakeDisable(n,t,i,r,u,f,e,o){var s=$(n);s.attr("disabled")||($(n).attr("disabled","disabled"),postModalData(t,i,r,u,f,e,o,function(){$(n).removeAttr("disabled")}))}function postModalData(n,t,i,r,u,f,e,o,s){var h=$(n).closest(".modal").find(".modal-content"),c,l;if(h.length==0&&(h=$(n)),!t&&$(n).closest(".modal")[0]&&$(n).closest(".modal")[0].gridOwnerId&&(t=$(n).closest(".modal")[0].gridOwnerId),c=getFormData($(h)),window.exteraModelParams)for(l in exteraModelParams)c.append(l,exteraModelParams[l]);showLoader(h);e&&showLoader($("#"+e));postForm(i,c,function(n){n&&n.isSuccess==!0&&(s&&$("#"+s).length>0&&$("#"+s).modal("hide"),updateDashboardGridCountIfExist(),f&&f(n),u&&(location.href=u),this.ignoreCloseModal?(clearForm(h),setFocusToFirstVisbleText(h)):closeThisModal(this.curElement),this.gridId&&$("#"+this.gridId).length>0&&$("#"+this.gridId)[0].refreshData&&$("#"+this.gridId)[0].refreshData())}.bind({gridId:t,curElement:n,ignoreCloseModal:r}),null,function(){hideLoader(h);e&&hideLoader($("#"+e));o&&o()})}function refreshGrid(n,t){closeThisModal(t);$("#"+n).length>0&&$("#"+n)[0].refreshData&&$("#"+n)[0].refreshData()}function refreshGridAndShow(n,t){var i=$("#"+n);$(t).closest(".myCtrl").find("input[type=hidden]").remove();$(t).append('<input type="hidden" name="'+$(t).attr("data-button-name")+'" value="'+$(t).attr("data-button-value")+'" />');i.length>0&&i[0].refreshData&&(i[0].refreshData(),i.show())}function postPanel(n,t,i,r){var u=$(n).closest(".myPanel"),e,f,o;if(u.length>0){if(showLoader(u),e=getFormData(u),i){f=null;f=eval(i);for(o in f)e.append(o,f[o])}postForm(t,e,function(n){this.clearPanelAfter&&n.isSuccess&&clearForm(this.foundPanel)}.bind({foundPanel:u,clearPanelAfter:r}),null,function(){hideLoader(u)})}}function closeThisModal(n){n&&$(n).closest(".modal").modal("hide")}function hasValidValueProperty(n,t){if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].key==n&&t[i].value&&t[i].value!="0")return!0;return!1}function postBindSW(n,t){if(n&&t&&$(n).length>0){var i=$(n).closest(".panelSWizard");i.length>0&&(showLoader(i),postForm(t,getFormData(i),function(n){n&&n.isSuccess==undefined&&((hasValidValueProperty("vehicleTypeId",n),hasValidValueProperty("carTypeId",n),hasValidValueProperty("brandId",n),hasValidValueProperty("specId",n))?(bindForm(n,i,!0),i[0].moveNext(!0)):$.toast({heading:"خطا",position:"bottom-right",textAlign:"right",text:"پاسخ مناسب یافت نشد",showHideTransition:"slide",icon:"error"}))},null,function(){hideLoader(i)}))}}function bindPanelByUrl(n){var t,i;n.length>0&&(t=$(n).attr("data-url"),t&&(i=new FormData,showLoader(n),postForm(t,i,function(t){bindForm(t,n)}.bind({querySelector:n}),null,function(){hideLoader(n)})))}function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})}function uuidv4RemoveDash(){return"id_"+uuidv4().replace(/-/,"")}function openUrl(n,t){var r,i;if(t){r=0;for(i in t)n+=r==0?"?"+i+"="+t[i]:"&"+i+"="+t[i],r++}window.open(n)}function loadLangugesTranslate(){bindTranslation()}function bindTranslation(){if(window.langsT&&langsT.length>0)for(var n=0;n<langsT.length;n++)$("[data-lc="+langsT[n].id+"]").each(function(){$(this).html(langsT[n].des)})}function bindContentByUrl(n,t,i){var u,f,e,r,o;if(i&&t&&n&&t.length>0&&$("#"+i).length>0){for(u=new FormData,f=0,e=0;e<t.length;e++)r=t[e],$("input[name="+r+"]").length>0?($("input[name="+r+"]").val()&&f++,u.append(r,$("input[name="+r+"]").val())):$("select[name="+r+"]").length>0&&(o=$("select[name="+r+"]").find("option:selected").attr("value"),o&&f++,u.append(r,o));f==t.length&&postForm(n,u,function(n){n&&n.isSuccess==undefined&&bindForm(n,$("#"+i),!0)})}}function updateMapFromDropdown(n,t){var o=$("#"+n),s=$("#"+t),i;if(o.length>0&&s.length>0){var r=o.find("option:selected"),u=r.attr("data-mapzoom"),f=r.attr("data-maplon"),e=r.attr("data-maplat");u&&f&&e&&u!="null"&&f!="null"&&e!="null"&&(i=s.parent(),clearForm(i),$(i).find(".olMap").length>0&&$(i).find(".olMap")[0].ctrl&&($(i).find(".olMap").html(""),initMapInner($(i).find(".olMap")[0].ctrl)),bindForm({mapLatRecivePlace_lat:e,mapLonRecivePlace_lon:f,mapZoomRecivePlace_zoom:u},i))}}function uploadFile(n,t,i,r){if(n&&t,i){var u="id_"+uuidv4RemoveDash();$("body").append('<div class="holderFUTemp"><input style="display:none" type="file" name="'+n+'" id="'+u+'" accept="'+t+'" /><\/div>');$("#"+u).change(function(){var n=$(this).closest(".gridTopActionButtonHolder"),t=getFormData($(this).closest(".holderFUTemp"));showLoader(n);postForm(i,t,function(n){n.isSuccess==!0&&$(r).closest(".myGridCTRL").length>0&&$(r).closest(".myGridCTRL")[0].refreshData&&$(r).closest(".myGridCTRL")[0].refreshData()},function(){},function(){hideLoader(n)})});$("#"+u).click()}}function needToBeLoginFirst(n){return window.isUserLogin!=undefined&&!isUserLogin?($(".holderRigAndLogUser .secountBtn").click(),whatToDoAfterUserLogin.push({curFun:function(){location.href=$(this.curButton).attr("href")}.bind({curButton:n})}),!1):!0}function loadJsonConfig(n,t,i,r){var u,f;if(r||(r="POST"),u=new FormData,window.exteraModelParams)for(f in exteraModelParams)u.append(f,exteraModelParams[f]);postForm(n,u,function(n){generateForm(n,this.targetId);this.targetId||($(".mainLoaderForAdminArea").addClass("mainLoaderForAdminAreaClose"),setTimeout(function(){$(".mainLoaderForAdminArea").css("display","none")},200));this.whatToDoAfterFinished&&this.whatToDoAfterFinished()}.bind({targetId:t,whatToDoAfterFinished:i}),null,null,null,r)}function loadLoginConfigIfNotExist(n,t,i){var r=uuidv4RemoveDash();$("body").append('<div id="'+r+'" ><\/div>');loadJsonConfig(n,r,function(){this.showModal&&$("#"+this.modalId).modal("show")}.bind({modalId:t,showModal:i}),"GET");bindIfUserAreadyLogin(t)}function bindIfUserAreadyLogin(n){postForm("/Account/Dashboard/GetLoginUserInfo",new FormData,function(t){if(t&&t.isSuccess==!0){isUserLogin=!0;var i=t.firstname?t.firstname+" "+t.lastname:t.username;localStorage.setItem("curLogin",JSON.stringify(t));userLoginWeb(i,t.isUser);disableFloatingFooter()}else isUserLogin=!1,whatToDoAfterUserLogin.push({curFun:function(){disableFloatingFooter()},type:"df"});$(".newTicketMainPageButton").click(function(t){return t.stopPropagation(),t.preventDefault(),isUserLogin==!1?($("#"+n).modal("show"),whatToDoAfterUserLogin.push({curFun:function(){loadAndShowAddNewTicket()},type:"nt"})):loadAndShowAddNewTicket(),!1})},null,null,!0)}function loadAndShowAddNewTicket(){$("#TicketUserAddGridModal").length==0?postForm("/Ticket/TicketUser/GetJsonConfig",new FormData,function(n){$("#TicketUserAddGridModal").length==0&&n&&n.panels&&n.panels[0].moduals&&n.panels[0].moduals.length>0&&($("body").append(getModualTemplate(n.panels[0].moduals[0])),executeArrFunctions());$("#TicketUserAddGridModal").modal("show")}):(clearForm($("#TicketUserAddGridModal")),$("#TicketUserAddGridModal").modal("show"))}function userLoginWeb(n,t){isUserLogin=!0;$(".holderRigAndLogUser").find("a").css("display","none");$(".holderRigAndLogUser").append(getLoginUserMenuTemplate(n,t));$("#swPanelId").parent().parent().hasClass("onlineChatMessages")&&$("#swPanelId").remove()}function getLoginUserMenuTemplate(n,t){return`
    <div class="logedInUserMenu">
        <span class="logedInUserMenuFullname" ><img src="" />${n}<i style="font-size:2em;vertical-align:-9px;margin-right:10px;" class="fa fa-angle-down" ></i><i style="font-size:2em;vertical-align:-9px;margin-right:10px;" class="fa fa-user-circle" ></i></span>
        <div class="logedInUserMenuItems">
            <a href="${t?"/Dashboard":"/Account/Dashboard/Index"}" >داشبورد</a>
            <a href="/UserAccount/UserProfile/Index" >به روز رسانی پروفایل</a>
            <a href="/Account/Dashboard/Logout" >خروج</a>
        </div>
    </div>
`}var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var r=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=_self.Prism={util:{encode:function(i){return i instanceof t?new t(i.type,n.util.encode(i.content),i.alias):"Array"===n.util.type(i)?i.map(n.util.encode):i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(n){return Object.prototype.toString.call(n).match(/\[object (\w+)\]/)[1]},clone:function(t){var u=n.util.type(t),r,i;switch(u){case"Object":r={};for(i in t)t.hasOwnProperty(i)&&(r[i]=n.util.clone(t[i]));return r;case"Array":return t.map&&t.map(function(t){return n.util.clone(t)})}return t}},languages:{extend:function(t,i){var r=n.util.clone(n.languages[t]);for(var u in i)r[u]=i[u];return r},insertBefore:function(t,i,r,u){var e,o,s,f;if(u=u||n.languages,e=u[t],2==arguments.length){r=arguments[1];for(f in r)r.hasOwnProperty(f)&&(e[f]=r[f]);return e}o={};for(s in e)if(e.hasOwnProperty(s)){if(s==i)for(f in r)r.hasOwnProperty(f)&&(o[f]=r[f]);o[s]=e[s]}return n.languages.DFS(n.languages,function(n,i){i===u[t]&&n!=t&&(this[n]=o)}),u[t]=o},DFS:function(t,i,r){for(var u in t)t.hasOwnProperty(u)&&(i.call(t,u,t[u],r||u),"Object"===n.util.type(t[u])?n.languages.DFS(t[u],i):"Array"===n.util.type(t[u])&&n.languages.DFS(t[u],i,u))}},highlightAll:function(t,i){for(var r,u=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),f=0;r=u[f++];)n.highlightElement(r,t===!0,i)},highlightElement:function(i,u,f){for(var s,c,h,e,l,o=i;o&&!r.test(o.className);)o=o.parentNode;(o&&(s=(o.className.match(r)||[,""])[1],c=n.languages[s]),i.className=i.className.replace(r,"").replace(/\s+/g," ")+" language-"+s,o=i.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(r,"").replace(/\s+/g," ")+" language-"+s),c)&&(h=i.textContent,h&&(h=h.replace(/^(?:\r?\n|\r)/,""),e={element:i,language:s,grammar:c,code:h},(n.hooks.run("before-highlight",e),u&&_self.Worker)?(l=new Worker(n.filename),l.onmessage=function(i){e.highlightedCode=t.stringify(JSON.parse(i.data),s);n.hooks.run("before-insert",e);e.element.innerHTML=e.highlightedCode;f&&f.call(e.element);n.hooks.run("after-highlight",e)},l.postMessage(JSON.stringify({language:e.language,code:e.code}))):(e.highlightedCode=n.highlight(e.code,e.grammar,e.language),n.hooks.run("before-insert",e),e.element.innerHTML=e.highlightedCode,f&&f.call(i),n.hooks.run("after-highlight",e))))},highlight:function(i,r,u){var f=n.tokenize(i,r);return t.stringify(n.util.encode(f),u)},tokenize:function(t,i){var y=n.Token,o=[t],a=i.rest,r,e,c,s,h,u,p;if(a){for(r in a)i[r]=a[r];delete i.rest}n:for(r in i)if(i.hasOwnProperty(r)&&i[r])for(e=i[r],e="Array"===n.util.type(e)?e:[e],c=0;c<e.length;++c){var f=e[c],w=f.inside,g=!!f.lookbehind,v=0,nt=f.alias;for(f=f.pattern||f,s=0;s<o.length;s++){if(h=o[s],o.length>t.length)break n;if(!(h instanceof y)&&(f.lastIndex=0,u=f.exec(h),u)){g&&(v=u[1].length);var b=u.index-1+v,u=u[0].slice(v),tt=u.length,it=b+tt,k=h.slice(0,b+1),d=h.slice(it+1),l=[s,1];k&&l.push(k);p=new y(r,w?n.tokenize(u,w):u,nt);l.push(p);d&&l.push(d);Array.prototype.splice.apply(o,l)}}}return o},hooks:{all:{},add:function(t,i){var r=n.hooks.all;r[t]=r[t]||[];r[t].push(i)},run:function(t,i){var r=n.hooks.all[t],u,f;if(r&&r.length)for(f=0;u=r[f++];)u(i)}}},t=n.Token=function(n,t,i){this.type=n;this.content=t;this.alias=i},i;return(t.stringify=function(i,r,u){var f,s,e,o;if("string"==typeof i)return i;if("Array"===n.util.type(i))return i.map(function(n){return t.stringify(n,r,i)}).join("");f={type:i.type,content:t.stringify(i.content,r,u),tag:"span",classes:["token",i.type],attributes:{},language:r,parent:u};("comment"==f.type&&(f.attributes.spellcheck="true"),i.alias)&&(s="Array"===n.util.type(i.alias)?i.alias:[i.alias],Array.prototype.push.apply(f.classes,s));n.hooks.run("wrap",f);e="";for(o in f.attributes)e+=o+'="'+(f.attributes[o]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+e+">"+f.content+"<\/"+f.tag+">"},!_self.document)?_self.addEventListener?(_self.addEventListener("message",function(t){var i=JSON.parse(t.data),r=i.language,u=i.code;_self.postMessage(JSON.stringify(n.util.encode(n.tokenize(u,n.languages[r]))));_self.close()},!1),_self.Prism):_self.Prism:(i=document.getElementsByTagName("script"),i=i[i.length-1],i&&(n.filename=i.src,document.addEventListener&&!i.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),_self.Prism)}(),persianDate,jDateFunctions,allCacheURLs,modalZIndex,canUseSetFocus,functionsList,isDisinerTryToLoaded,isTryLoadingChart,isTryingLoadMapJs,isLoadCkEditorTrying,isUserLogin;"undefined"!=typeof module&&module.exports&&(module.exports=Prism);Prism.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i};Prism.hooks.add("wrap",function(n){"entity"===n.type&&(n.attributes.title=n.content.replace(/&amp;/,"&"))});Prism.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/};Prism.languages.css.atrule.inside.rest=Prism.util.clone(Prism.languages.css);Prism.languages.markup&&(Prism.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css},alias:"language-css"}}),Prism.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:Prism.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:Prism.languages.css}},alias:"language-css"}},Prism.languages.markup.tag));Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/("|')(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/,operator:/[-+]{1,2}|!|<=?|>=?|={1,3}|&{1,2}|\|?\||\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/(?!\d)[a-z0-9_$]+(?=\()/i});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}});Prism.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript},alias:"language-javascript"}});
/*!
 * persianDatepicker v0.1.0
 * http://github.com/behzadi/persianDatepicker/
 *
 * Copyright (c) 2013 Mohammad hasan Behzadi  All rights reserved.
 *
 * Released under the MIT license.
 *
 * jalali Date Functions
 *
 * Date: Tue Jan 1 2013
 * 
 * Last Update: Mon April 15 2019
 * 
 */
!function(n){n.fn.persianDatepicker=function(i){var r=this.data("persianDatepicker");return r?!0===i?r:this:this.each(function(){return n(this).data("persianDatepicker",new t(this,i))})};var t=function(){function t(t,i){var r=this,f,u,s,e,o;if(r.el=n(t),f=r.el,r.options=n.extend(!1,{},{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dowTitle:["شنبه","یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنج شنبه","جمعه"],shortDowTitle:["ش","ی","د","س","چ","پ","ج"],showGregorianDate:!1,persianNumbers:!0,formatDate:"YYYY/MM/DD",selectedBefore:!1,selectedDate:null,startDate:null,endDate:null,prevArrow:"◄",nextArrow:"►",theme:"default",alwaysShow:!1,selectableYears:null,selectableMonths:[1,2,3,4,5,6,7,8,9,10,11,12],cellWidth:25,cellHeight:20,fontSize:13,isRTL:!1,closeOnBlur:!0,calendarPosition:{x:0,y:0},onShow:function(){},onHide:function(){},onSelect:function(){},onRender:function(){}},i),u=r.options,(_fontSize=u.fontSize,_cw=parseInt(u.cellWidth),_ch=parseInt(u.cellHeight),r.cellStyle="style='width:"+_cw+"px;height:"+_ch+"px;line-height:"+_ch+"px; font-size:"+_fontSize+"px; ' ",r.headerStyle="style='height:"+_ch+"px;line-height:"+_ch+"px; font-size:"+(_fontSize+4)+"px;' ",r.selectUlStyle="style='margin-top:"+_ch+"px;height:"+(7*_ch+20)+"px; font-size:"+(_fontSize-2)+"px;' ",r.selectMonthLiStyle="style='height:"+(7*_ch+7)/4+"px;line-height:"+(7*_ch+7)/4+"px; width:"+6.7*_cw/3+"px;width:"+6.7*_cw/3+"px\\9;' ",r.selectYearLiStyle="style='height:"+(7*_ch+10)/6+"px;line-height:"+(7*_ch+10)/6+"px; width:"+(6.7*_cw-14)/3+"px;width:"+(6.7*_cw-15)/3+"px\\9;' ",r.footerStyle="style='height:"+_ch+"px;line-height:"+_ch+"px; font-size:"+_fontSize+"px;' ",r.jDateFunctions=new jDateFunctions,null!=r.options.startDate&&("today"==r.options.startDate&&(r.options.startDate=r.now().toString("YYYY/MM/DD")),"today"==r.options.endDate&&(r.options.endDate=r.now().toString("YYYY/MM/DD")),r.options.selectedDate=r.options.startDate),null!=r.options.selectedDate||r.options.showGregorianDate)||(s=new RegExp("^([1-9][0-9][0-9][0-9])/([0]?[1-9]|[1][0-2])/([0]?[1-9]|[1-2][0-9]|[3][0-1])$"),f.is("input")?s.test(f.val())&&(r.options.selectedDate=f.val()):s.test(f.html())&&(r.options.selectedDate=f.html())),r._persianDate=null!=r.options.selectedDate?(new persianDate).parse(r.options.selectedDate):r.now(),null!=u.selectableYears&&-1==u.selectableYears._indexOf(r._persianDate.year)&&(r._persianDate.year=u.selectableYears[0]),-1==r.options.selectableMonths._indexOf(r._persianDate.month)&&(r._persianDate.month=u.selectableMonths[0]),r.persianDate=r._persianDate,r._id="pdp-"+Math.round(1e7*Math.random()),r.persianDate.formatDate=u.formatDate,r.calendar=n('<div id="'+r._id+'" class="pdp-'+u.theme+'" />'),null!=r.options.startDate)for(r.options.selectableYears=[],e=r.persianDate.parse(r.options.startDate).year;e<=r.persianDate.parse(r.options.endDate).year;e++)r.options.selectableYears.push(e);(f.attr("pdp-id")||"").length||f.attr("pdp-id",r._id);f.addClass("pdp-el").on("click",function(n){r.show(n)}).on("focus",function(n){r.show(n)});u.closeOnBlur&&f.on("blur",function(n){r.calendar.is(":hover")||r.hide(n)});u.selectedBefore&&(null!=r.options.selectedDate?r.showDate(f,r.persianDate.parse(r.options.selectedDate).toString("YYYY/MM/DD/"+r.jDateFunctions.getWeekday(r.persianDate.parse(r.options.selectedDate)),r.now().gDate,u.showGregorianDate)):r.showDate(f,r.now().toString("YYYY/MM/DD/"+r.jDateFunctions.getWeekday(r.now())),r.now().gDate,u.showGregorianDate));u.isRTL&&f.addClass("rtl");r.calendar.length&&!u.alwaysShow&&r.calendar.hide();n(document).bind("mouseup",function(t){var e=t.target,o=r.calendar,i;f.is(e)||o.is(e)||0!==o.has(e).length||!o.is(":visible")||r.hide();i=n(".pdp-"+u.theme+" .yearSelect");i.is(t.target)||0!==i.has(t.target).length||i.hide();(i=n(".pdp-"+u.theme+" .monthSelect")).is(t.target)||0!==i.has(t.target).length||i.hide()});o=function(){var n=f.offset();r.calendar.css({top:n.top+f.outerHeight()+u.calendarPosition.y+"px",left:n.left+u.calendarPosition.x+"px"})};r.onresize=o;n(window).resize(o);n("body").append(r.calendar);r.render();o()}return t.prototype={show:function(){this.calendar.show();n.each(n(".pdp-el").not(this.el),function(n,t){t.length&&t.options.onHide(t.calendar)});this.options.onShow(this.calendar);this.onresize()},hide:function(){this.options.onHide(this.calendar);this.options&&!this.options.alwaysShow&&this.calendar.hide()},render:function(){this.calendar.children().remove();this.header();this.dows();this.content();this.footer();this.options.onRender()},header:function(){var t=this,e,o,u,s;_monthYear=n('<div class="" />');_monthYear.appendTo(this.calendar);_head=n('<div class="pdp-header" '+t.headerStyle+" />");_head.appendTo(this.calendar);_next=n('<div class="nextArrow" />').html(this.options.nextArrow).attr("title","ماه بعد");null==t.options.endDate||t.persianDate.parse(t.options.endDate).year>t.persianDate.year||t.persianDate.parse(t.options.endDate).month>t.persianDate.month?(_next.bind("click",function(){for(nextMonth=t.persianDate.month+1;-1==t.options.selectableMonths._indexOf(nextMonth)&&nextMonth<13;nextMonth++);t.persianDate.addMonth(nextMonth-t.persianDate.month);t.render()}),_next.removeClass("disabled")):_next.addClass("disabled");_next.appendTo(_head);var f=n('<ul class="monthSelect" '+t.selectUlStyle+" />").hide(),r=n('<ul class="yearSelect" '+t.selectUlStyle+" />").hide(),h=n("<span/>").html(t.options.months[t.persianDate.month-1]).mousedown(function(){return!1}).click(function(n){n.stopPropagation();r.css({display:"none"});f.css({display:"inline-block"})}),l=n("<span/>").html(t.options.persianNumbers?t.jDateFunctions.toPersianNums(t.persianDate.year):t.persianDate.year).mousedown(function(){return!1}).click(function(n){n.stopPropagation();f.css({display:"none"});r.css({display:"inline-block"});r.scrollTop(70)});for(_startDate=null!=t.options.startDate?t.persianDate.parse(t.options.startDate):t.persianDate.parse("1/1/1"),_endDate=null!=t.options.endDate?t.persianDate.parse(t.options.endDate):t.persianDate.parse("9999/1/1"),e=function(u,f){var o=!1,e;for(void 0===u&&void 0===f?(b=t.persianDate.year-7,a=t.persianDate.year+14):0==f?(b=u-6,a=u,o=!0):0==u&&(b=f+1,a=b+6),e=[],i=b;i<a&&b>0;i++)e.push(parseInt(i));n.each(t.options.selectableYears||(o?e.reverse():e),function(i,u){var f=n("<li "+t.selectYearLiStyle+" />").html(t.options.persianNumbers?t.jDateFunctions.toPersianNums(u):u);u==t.persianDate.year&&f.addClass("selected");f.attr("value",u);f.bind("click",function(){t.persianDate.date=1;t.persianDate.year=parseInt(u);_endDate.year!=u&&9999!=_endDate.year||(t.persianDate.month=_endDate.month);_startDate.year!=u&&9999!=_startDate.year||(t.persianDate.month=_startDate.month);t.render()});o?r.prepend(f):r.append(f)})},e(),i=1;i<=12;i++)o=t.options.months[i-1],u=-1==t.options.selectableMonths._indexOf(i)||_startDate.year==t.persianDate.year&&_startDate.month>i||_endDate.year==t.persianDate.year&&i>_endDate.month?n('<li class="disableMonth" '+t.selectMonthLiStyle+" />").html(o):n("<li "+t.selectMonthLiStyle+" />").html(o),i==t.persianDate.month&&u.addClass("selected"),u.data("month",{month:o,monthNum:i}),u.hasClass("disableMonth")||u.bind("click",function(){t.persianDate.date=1;t.persianDate.month=n(this).data("month").monthNum;t.render()}),f.append(u);r.bind("scroll",function(){null==t.options.selectableYears&&(c=n(this).find("li").length,firstYear=parseInt(n(this).children("li:first").val()),lastYear=parseInt(n(this).children("li:last").val()),lisHeight=c/3*(n(this).find("li:first").height()+4),_com=500*n(this).scrollTop().toString().length,n(this).scrollTop()<100*_com.toString().length&&firstYear>=1&&e(firstYear,0),_com=100*n(this).scrollTop().toString().length,lisHeight-n(this).scrollTop()>-_com&&lisHeight-n(this).scrollTop()<_com&&(e(0,lastYear),n(this).scrollTop(n(this).scrollTop()-50)),n(this).scrollTop()<_com.toString().length&&firstYear>=30&&n(this).scrollTop(100*_com.toString().length))});_monthYear.append(f).append(r);s=n('<div class="monthYear" />').append(h).append("<span>&nbsp;&nbsp;<\/span>").append(l);_head.append(s);_prev=n('<div class="prevArrow" />').html(this.options.prevArrow).attr("title","ماه قبل");null==t.options.startDate||t.persianDate.parse(t.options.startDate).year<t.persianDate.year||t.persianDate.parse(t.options.startDate).month<t.persianDate.month?(_prev.bind("click",function(){t.persianDate.addMonth(-1);t.render()}),_prev.removeClass("disabled")):_prev.addClass("disabled");_prev.appendTo(_head)},dows:function(){for(_row=n('<div class="dows" />'),i=0;i<7;i++)_cell=n('<div class="dow cell " '+this.cellStyle+" />").html(this.options.shortDowTitle[i]),_cell.appendTo(_row);_row.appendTo(this.calendar)},content:function(){var t=this,u,i,r;for(_days=n('<div class="days" />'),_days.appendTo(this.calendar),jd=t.persianDate,jd.date=1,_start=t.jDateFunctions.getWeekday(t.persianDate),_end=t.jDateFunctions.getLastDayOfMonth(t.persianDate),u=0,i=0;u<6;u++){for(_row=n("<div />"),r=0;r<7;r++,i++)i<_start||i-_start+1>_end?_cell=n('<div class="nul cell " '+t.cellStyle+" />").html("&nbsp;"):(_dt=t.getDate(t.persianDate,i-_start+1),_today="",_selday="",_disday="",0==t.now().compare(_dt)&&(_today="today"),null==t.options.startDate||-1!=t.persianDate.parse(t.options.startDate).compare(_dt)&&1!=t.persianDate.parse(t.options.endDate).compare(_dt)||(_disday="disday"),null!=t.options.selectedDate?t.persianDate.parse(t.options.selectedDate).date==i-_start+1&&(_selday="selday"):i-_start+1==t.now().date&&(_selday="selday"),_fri=6==r?"friday":"",_cell=n('<div class="day cell '+_fri+" "+_today+" "+_selday+" "+_disday+'" '+t.cellStyle+" />"),_cell.attr("data-jdate",_dt.toString("YYYY/MM/DD")),_cell.attr("data-gdate",t.jDateFunctions.getGDate(_dt)._toString("YYYY/MM/DD")),_cell.html(t.options.persianNumbers?t.jDateFunctions.toPersianNums(i-_start+1):i-_start+1),(null==t.options.startDate||-1!=t.persianDate.parse(t.options.startDate).compare(_dt)&&1!=t.persianDate.parse(t.options.endDate).compare(_dt))&&_cell.bind("click",function(){t.calendar.find(".day").removeClass("selday");n(this).addClass("selday");t.options.showGregorianDate?t.showDate(t.el,n(this).data("jdate"),n(this).data("gdate"),!0):t.showDate(t.el,n(this).data("jdate"),n(this).data("gdate"),!1);t.hide()})),_cell.appendTo(_row);_row.appendTo(_days)}},footer:function(){var t=this;_footer=n('<div class="pdp-footer" '+t.footerStyle+" />");_footer.appendTo(this.calendar);t.options.selectableMonths._indexOf(t.persianDate.month)>-1&&(_goToday=n('<a class="goToday" />'),_goToday.attr("data-jdate",t.now().toString("YYYY/MM/DD/DW")),_goToday.attr("data-gdate",t.jDateFunctions.getGDate(t.now())),_goToday.attr("href","javascript:;").html("هم اکنون"),null==t.options.startDate&&_goToday.bind("click",function(){t.persianDate=t.now();t.showDate(t.el,n(this).data("jdate"),n(this).data("gdate"),t.options.showGregorianDate);t.calendar.find(".day").removeClass("selday");t.render();t.calendar.find(".today").addClass("selday");t.hide()}),_goToday.appendTo(_footer))},showDate:function(n,t,i,r){t=this.persianDate.parse(t).toString(this.options.formatDate);i=new Date(i)._toString(this.options.formatDate);n.is("input:text")?r?n.val(i):n.val(t):r?n.html(i):n.html(t);n.attr("data-jDate",t);n.attr("data-gDate",i);this.options.onSelect()},getDate:function(n,t){return n.date=t,n.day=this.jDateFunctions.getWeekday(n),n},now:function(){return this.jDateFunctions.gregorian_to_jalali(new Date)}},t}();Number.prototype.padLeft=function(n,t){var i=String(n||10).length-String(this).length+1;return i>0?new Array(i).join(t||"0")+this:this};Date.prototype._toString=function(n){return months=["Januray","February","March","April","May","June","Julay","August","September","October","November","December"],dows=["Sun","Mon","Tue","Wed","Tur","Fri","Sat"],void 0===n||"default"==n?this.toLocaleDateString():n.replace("YYYY",this.getFullYear()).replace("MM",this.getMonth()+1).replace("DD",this.getDate()).replace("0M",this.getMonth()+1>9?this.getMonth()+1:"0"+(this.getMonth()+1)).replace("0D",this.getDate()>9?this.getDate():"0"+this.getDate()).replace("hh",0==this.getHours()?(new Date).getHours():this.getHours()).replace("mm",0==this.getMinutes()?(new Date).getMinutes():this.getMinutes()).replace("ss",0==this.getSeconds()?(new Date).getSeconds():this.getSeconds()).replace("0h",this.getHours()>9?this.getHours():"0"+this.getHours()).replace("0m",this.getMinutes()>9?this.getMinutes():"0"+this.getMinutes()).replace("0s",this.getSeconds()>9?this.getSeconds():"0"+this.getSeconds()).replace("ms",0==this.getMilliseconds()?(new Date).getMilliseconds():this.getMilliseconds()).replace("tm",this.getHours()>=12&&this.getMinutes()>0?"PM":"AM").replace("NM",months[this.getMonth()]).replace("DW",this.getDay()).replace("ND",dows[this.getDay()])};Array.prototype._indexOf=function(t){return n.inArray(t,this)}}(jQuery);persianDate=function(){function n(){this.months=["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"];this.dowTitle=["شنبه","یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنج شنبه","جمعه"];this.year=1300;this.month=1;this.date=1;this.day=1;this.gDate=new Date}return n.prototype={now:function(){return(new jDateFunctions).gregorian_to_jalali(new Date)},addDay:function(t){for(var i,r,u=new jDateFunctions,e=t>0?t:-t,f=0;f<e;f++)i=new n,i.month=this.month,i.year=this.year,i=i.addMonth(-1),r=t>0?u.getLastDayOfMonth(this):u.getLastDayOfMonth(i),t>0?this.date+=1:this.date-=1,t>0?this.date>r&&(this.date=1,this.addMonth(1)):t<0&&(this.month>1&&this.date>r?(this.date=1,this.addMonth(1)):0==this.date&&(this.addMonth(-1),this.date=r));return this},addMonth:function(n){for(var i=n>0?n:-n,t=0;t<i;t++)n>0?this.month+=1:this.month-=1,13==this.month?(this.month=1,this.addYear(1)):0==this.month&&(this.month=12,this.addYear(-1));return this},addYear:function(n){return this.year+=n,this},compare:function(n){return n.year==this.year&&n.month==this.month&&n.date==this.date?0:n.year>this.year?1:n.year==this.year&&n.month>this.month?1:n.year==this.year&&n.month==this.month&&n.date>this.date?1:-1},parse:function(t){arr=t.split("/");y=arr[0];m=arr[1];d=arr[2];var i=new n;return jdf=new jDateFunctions,i.year=parseInt(y),i.month=parseInt(m),i.date=parseInt(d),i.day=jdf.getWeekday(i),i.gDate=jdf.jalali_to_gregorian(i),i},toString:function(n){return void 0===n?this.year+"/"+this.month+"/"+this.date:n.replace("YYYY",this.year).replace("MM",this.month).replace("DD",this.date).replace("0M",this.month>9?this.month:"0"+this.month.toString()).replace("0D",this.date>9?this.date:"0"+this.date.toString()).replace("hh",this.gDate.getHours()).replace("mm",this.gDate.getMinutes()).replace("ss",this.gDate.getSeconds()).replace("0h",this.gDate.getHours()>9?this.gDate.getHours():"0"+this.gDate.getHours()).replace("0m",this.gDate.getMinutes()>9?this.gDate.getMinutes():"0"+this.gDate.getMinutes()).replace("0s",this.gDate.getSeconds()>9?this.gDate.getSeconds():"0"+this.gDate.getSeconds()).replace("tm",this.gDate.getHours()>=12&&this.gDate.getMinutes()>0?"ب.ظ":"ق.ظ").replace("ms",this.gDate.getMilliseconds()).replace("NM",this.months[this.month-1]).replace("DW",this.day).replace("ND",this.dowTitle[this.day])}},n}();jDateFunctions=function(){function n(){}return n.prototype={toPersianNums:function(n){for(strnum=n.toString(),nums=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],res="",i=0;i<strnum.length;i++)res+=nums[parseInt(strnum[i])];return res},gregorian_to_jalali:function(n){return gy=n.getFullYear(),gm=n.getMonth()+1,gd=n.getDate(),g_d_m=[0,31,59,90,120,151,181,212,243,273,304,334],gy>1600?(jy=979,gy-=1600):(jy=0,gy-=621),gy2=gm>2?gy+1:gy,days=365*gy+parseInt((gy2+3)/4)-parseInt((gy2+99)/100)+parseInt((gy2+399)/400)-80+gd+g_d_m[gm-1],jy+=33*parseInt(days/12053),days%=12053,jy+=4*parseInt(days/1461),days%=1461,days>365&&(jy+=parseInt((days-1)/365),days=(days-1)%365),jm=days<186?1+parseInt(days/31):7+parseInt((days-186)/30),jd=1+(days<186?days%31:(days-186)%30),n=new Date,pd=new persianDate,pd.year=jy,pd.month=jm,pd.date=jd,pd.gDate=n,pd},jalali_to_gregorian:function(n){for(jy=n.year,jm=n.month,jd=n.date,jy>979?(gy=1600,jy-=979):gy=621,days=365*jy+8*parseInt(jy/33)+parseInt((jy%33+3)/4)+78+jd+(jm<7?31*(jm-1):30*(jm-7)+186),gy+=400*parseInt(days/146097),days%=146097,days>36524&&(gy+=100*parseInt(--days/36524),days%=36524,days>=365&&days++),gy+=4*parseInt(days/1461),days%=1461,days>365&&(gy+=parseInt((days-1)/365),days=(days-1)%365),gd=days+1,sal_a=[0,31,gy%4==0&&gy%100!=0||gy%400==0?29:28,31,30,31,30,31,31,30,31,30,31],gm=0;gm<13&&(v=sal_a[gm],!(gd<=v));gm++)gd-=v;return dt=new Date,new Date(gy,gm-1,gd,dt.getHours(),dt.getMinutes(),dt.getSeconds(),dt.getMilliseconds())},getGDate:function(n){return this.jalali_to_gregorian(n)},getWeekday:function(n){return[1,2,3,4,5,6,0][this.jalali_to_gregorian(n).getDay()]},getLastDayOfMonth:function(n){return y=n.year,m=n.month,m>=1&&m<=6?31:m>=7&&m<12?30:this.isLeapYear(y)?30:29},isLeapYear:function(n){return b=n%33,(n>1342?[1,5,9,13,17,22,26,30]:[1,5,9,13,17,21,26,30])._indexOf(b)>-1}},n}();$.fn.initMyGrid=function(n){var i,t;if(n){if(n.nlevel&&(n.detailes=JSON.parse(JSON.stringify(n)),n.detailes.id=n.detailes.id+"1"),n.hide&&$(this).hide(),n.columns)for(i=0;i<n.columns.length;i++)n.columns[i].showCondation&&(n.columns[i].hide=window[n.columns[i].showCondation]?!1:!0);return t={getAllColumns:function(n,t){var r=[],i;if(n.columns)for(i=0;i<n.columns.length;i++)r.push(n.columns[i]);if(t&&t.columns)for(i=0;i<t.columns.length;i++)r.push({field:t.columns[i].id,caption:t.columns[i].title,search:{searchType:"text"}});return r},getGridHeaderCellTemplateStyle:function(n){var t="";return n.width&&(t+="width:"+n.width+";"),n.textAlign&&(t+="text-align:"+n.textAlign+";"),t},getNoDataTemplate:function(n,t){return'<tr  ><td colspan="'+this.getGridColumnCount(n,t)+'" style="text-align:center;padding:20px;" >اطلاعاتی جهت نمایش یافت نشد<\/td><\/tr>'},hasAction:function(n){var t=!1;return n.actions&&(t=n.actions.delete||n.actions.addNew||n.actions.update||n.actions.cActions),t},getGridHeaderCellTemplate:function(n,i){var f="",r=t.getAllColumns(n,i),u,e,o;if(n&&r&&r.constructor==Array){for(n.selectable==!0&&(f+='<td style="text-align:center;width:30px;" ><input class="headCB" type="checkbox" /><\/td>'),n.detailes&&(f+='<td style="text-align:center;width:30px;" ><\/td>'),u=0;u<r.length;u++)r[u].hide||(e="",r[u].sort&&(e="hasSort"),n.sortFieldStatus==!0&&r[u].field==n.sortField?e+=" fa fa-sort-alpha-down":n.sortFieldStatus==!1&&r[u].field==n.sortField&&(e+=" fa fa-sort-alpha-up"),f+='<td class="'+e+'" '+(r[u].sort?'data-field-name="'+r[u].field+'"':"")+' style="'+this.getGridHeaderCellTemplateStyle(r[u])+'" ><span style="display:inline-block;padding-right:5px;" >'+r[u].caption+"<\/span><\/td>");this.hasAction(n)&&(o="#",n.showAddButton==!0&&(o='<span class="gridAddButton icon-android-add-circle"><\/span>'),f+='<td style="text-align:center;" >'+o+"<\/td>")}return f},getSearchCTRL:function(n){var t="";return n.search&&(n.search.searchType=="text"?t+='<input type="text" readonly onfocus="this.removeAttribute(\'readonly\');" autocomplete="off" value=""  class="form-control" name="'+n.field+'" />':n.search.searchType=="date"?t+='<input type="text" autocomplete="off" class="form-control myGridPersianDP" name="'+n.field+'" />':n.search.searchType=="dropdown"?t+='<select data-valueField = "'+n.search.valueField+'" data-textField="'+n.search.textField+'" data-url="'+n.search.url+'" class="form-control" name="'+n.field+'">/select>':n.search.searchType=="persianDateTime"&&(t+='<input data-jdp value="" autocomplete="off" class="form-control myGridPersianDP" name="'+n.field+'" />')),t},getGridHeaderSearchTemplate:function(n,i,r,u){for(var f="",s=!1,o=t.getAllColumns(n,u),e=0;e<o.length;e++)if(o[e].search){s=!0;break}if(i==!0&&(s=!0),s==!0){for(f+="<tr>",n.selectable==!0&&(f+='<td style="text-align:center;width:30px;" ><\/td>'),n.detailes&&(f+='<td style="text-align:center;width:30px;" ><\/td>'),e=0;e<o.length;e++)o[e].hide||(o[e].search?(f+="<td>",f+=this.getSearchCTRL(o[e]),f+="<\/td>"):f+="<td><\/td>");this.hasAction(n)&&(f+='<td style="text-align:center;" >',i==!0&&(f+='<span data-url="'+(r?n.actions.update.url:n.actions.addNew.url)+'" title="ذخیره" class="myGridAction saveButton"><i class="icon-save"><\/i><\/span>',f+='<span  title="انصراف" class="myGridAction myGridWarning cancelButton"><i class="icon-cancel-circle"><\/i><\/span>'),f+="<\/td>");f+="<\/tr>"}return f},getGridHeaderTemplate:function(n,t){var i=this.getGridHeaderSearchTemplate(n,null,null,t);return`
                        <thead class="myTableHeader">
                            <tr >
                                `+this.getGridHeaderCellTemplate(n,t)+`
                            </tr>
                            `+i+`
                        </thead>
                    `},getGridColumnCount:function(n,i){var r=0,f=t.getAllColumns(n,i),u;if(n&&f)for(u=0;u<f.length;u++)f[u].hide||r++;return n.selectable==!0&&(r+=1),n.detailes&&(r+=1),this.hasAction(n)&&(r+=1),r},getGridBodyTemplateLoading:function(n,t){return`
                <tbody class="myTableBody">
                    <tr>
                        <td style="text-align:center;" colspan="`+this.getGridColumnCount(n,t)+`" >Loading ...</td>
                    </tr>
                </tbody>
            `},getActionTemplates:function(n,t){var r="",i,f,u;if(t&&t.actions.delete&&t.actions.delete.url&&(r+='<span title="حذف" data-id="'+n[t.key]+'" data-url="'+t.actions.delete.url+'" class="myGridAction myGridActionDelete"><i class="fa fa-trash" ><\/i><\/span>'),t&&t.actions.update&&t.actions.update.url&&(r+='<span title="edit" data-id="'+n[t.key]+'" data-url="'+t.actions.update.url+'" class="myGridAction showEditStyle"><i class="fa fa-pen" ><\/i><\/span>'),t&&t.actions.cActions&&t.actions.cActions.length>0)for(i=0;i<t.actions.cActions.length;i++)t.actions.cActions[i].template&&typeof t.actions.cActions[i].template=="function"?r+=t.actions.cActions[i].ignoreParentButton==!0?'<span style="display:inline-block" data-index="'+i+'" >'+t.actions.cActions[i].template(n)+"<\/span>":'<span class="myGridAction myGridCAction" data-index="'+i+'" >'+t.actions.cActions[i].template(n)+"<\/span>":t.actions.cActions[i].template&&typeof t.actions.cActions[i].template=="string"&&(f="var data ="+JSON.stringify(n)+";"+t.actions.cActions[i].template,u=eval(f),u&&t.actions.cActions[i].ignoreParentButton==!0?r+='<span style="display:inline-block" data-index="'+i+'" >'+u+"<\/span>":u&&(r+='<span class="myGridAction myGridCAction" data-index="'+i+'" >'+u+"<\/span>"));return r},getGridRowDataTemplate:function(n,i,r){var e="<tr data-row-json='"+JSON.stringify(n)+'\' class="rowBindItem">',f,u,o,s;for(i.selectable==!0&&(e+='<td style="text-align:center;width:30px;" ><input name="gridSelectedItems" value="'+(i.key?n[i.key]:"")+'" type="checkbox" /><\/td>'),i.detailes&&(e+='<td style="text-align:center;width:30px;" ><span class="fa fa-plus-square gridExpandButton"><\/span><\/td>'),f=t.getAllColumns(i,r),u=0;u<f.length;u++)f[u].hide||(o=n[f[u].field],o||(o=""),f[u].formatter&&i.formatters[f[u].formatter]&&(typeof i.formatters[f[u].formatter]=="string"?(s="var data ="+JSON.stringify(n)+";"+i.formatters[f[u].formatter],o=eval(s)):o=i.formatters[f[u].formatter](null,n)),e+='<td class="'+(f[u].class?f[u].class:"")+'" style="'+this.getGridHeaderCellTemplateStyle(f[u])+'" ><span  class="gridResTitle">'+f[u].caption+": <\/span>"+o+"<\/td>");return this.hasAction(i)&&(e+='<td class="actionTD" style="text-align:center;" >',e+=this.getActionTemplates(n,i),e+="<\/td>"),e+"<\/tr>"},getColumnConfigButtonTemplate:function(n,i){var e="cb_"+Math.random(),r,o,u,f;for(e=e.replace(".",""),r='<div class="holderColumnConfig">',r+='<span class="columnConfigButton">',r+='<i class="columnConfigButtonIcon fa fa-columns"><\/i>',r+="<\/span>",r+='<span class="columnMenu">',r+='<span class="holderSearchTextBox"><input id="'+e+'" type="text" placeholder="search" class="form-control columnSearchBox" ><label for="'+e+'" class="fa fa-search"><\/label><\/span>',r+='<span class="holdercolumnItem">',o=t.getAllColumns(n,i),u=0;u<o.length;u++)f="cb_"+Math.random(),f=f.replace(".",""),r+='<span class="columnMenuItem"><input data-index="'+u+'" id="'+f+'" type="checkbox" checked="checked" /><label data-lc="'+o[u].lc+'" for="'+f+'">'+o[u].caption+"<\/label><\/span>";return r+="<\/span>",r+="<\/span>",r+"<\/div>"},getColumnExcelButtonTemplate:function(n){var t='<div data-excel-export-url="'+n.exportToExcelUrl+'" class="exportToExcel">';return t+='<i class="fa fa-file-excel"><\/i>',t+"<\/div>"},getColumnModalFilterButtonTemplate:function(n){var t='<div data-modal-filter-id="'+n.exteraFilterModalId+'" class="gridExteraFilterModal">';return t+='<i class="fa fa-filter"><\/i>',t+"<\/div>"},hasAnyFilter:function(n,i){for(var u=!1,f=t.getAllColumns(n,i),r=0;r<f.length;r++)if(f[r].search){u=!0;break}return u},getGridTemplate:function(n,t){var r=!1,i='<div class="topGridAction">',u;if(n.topActions&&n.topActions.length>0){for(r=!0,i+='<div class="gridTopActionButtonHolder">',u=0;u<n.topActions.length;u++)i+='<button  onclick="'+n.topActions[u].onClick+'" class="gridheaderButton btn btn-primary btn-sm" >'+n.topActions[u].title+"<\/button>";i+="<\/div>"}return n.showColumnConfigButton&&(i+=this.getColumnConfigButtonTemplate(n,t),r=!0),n.exteraFilterModalId&&(i+=this.getColumnModalFilterButtonTemplate(n),r=!0),n.exportToExcelUrl&&(i+=this.getColumnExcelButtonTemplate(n),r=!0),this.hasAnyFilter(n,t)&&(i+='<span class="myGridSearchButton"><i class="fa fa-search" ><\/i><\/span>',r=!0),i+='<div style="clear:both;" ><\/div><\/div>',r==!1&&(i=""),`
                        `+(n.headerTemplate?n.headerTemplate:"")+i+`
                        <table class="myGrid" >
                            `+this.getGridHeaderTemplate(n,t)+`
                            `+this.getGridBodyTemplateLoading(n,t)+`
                        </table>
                    `},getFooterTemplate:function(n,t,i,r,u){var o='<tr><td colspan="'+this.getGridColumnCount(t,u)+'"><div class="row">',h=Number.parseInt(Math.ceil(n/r)),e;h||(h=0);o+='<div class="col-md-9 col-lg-9 col-sm-9 col-xs-12 myGridPagaer" ><div class="gridPageButtonHolder">';o+='<button class="moveFirst"><<\/button>';var a=n,r=r,l=6,h=parseInt(Math.ceil(a/r)),f=[],s=i,c=i+l-1;for(s=s-l,s<0&&(c+=s*-1,s=0),c>h&&(s-=c-h,c=h),s<0&&(s=0),e=s;e<c;e++)f.push({text:e+1,isActive:i==e+1});for(f.length>0&&f[0].text!=1&&(f[0].text=1),f.length>1&&f[1].text-f[0].text>1&&(f[1].text="..."),f.length>0&&f[f.length-1].text!=h&&(f[f.length-1].text=h),f.length>1&&f[f.length-1].text-f[f.length-2].text>1&&(f[f.length-2].text="..."),e=0;e<f.length;e++)o+='<button class="'+(f[e].text=="..."?"normalCR":"pageItem")+" "+(f[e].isActive==!0?"myActive":"")+'">'+f[e].text+"<\/button>";return o+='<button class="moveNext">><\/button>',o+="<\/div><\/div>",o+='<div class="col-md-3 col-lg-3 col-sm-3 col-xs-12 " ><div class="myItemPerPage">',o+="<span "+(r==10?'class="activeItemPerPage"':"")+" >10<\/span><span "+(r==20?'class="activeItemPerPage"':"")+">20<\/span><span "+(r==50?'class="activeItemPerPage"':"")+">50<\/span><span "+(r==100?'class="activeItemPerPage"':"")+">100<\/span>",o+="<\/div><\/div>",o+"<\/div><\/td><\/tr>"}},this.each(function(){function r(n,t,i){var r=n.data.slice(),u,f;for(u of i.keys())f=i.get(u),f&&(r=r.filter(function(n){return n[this.key].indexOf(this.value)>-1}.bind({key:u,value:f})));return t.sortField&&(t.sortFieldStatus==!0||t.sortFieldStatus==!1)&&(r=r.sort(function(n,t){var i=n[this.field]+"",r=t[this.field]+"";return(i=i.toUpperCase(),r=r.toUpperCase(),i>r)?this.isAsc==!0?1:-1:i<r?this.isAsc==!0?-1:1:0}.bind({field:t.sortField,isAsc:t.sortFieldStatus}))),{data:r,total:r.length}}var i=$(this)[0];i.currentPage=1;i.skip=0;i.take=n.itemPerPage;i.itemPerPage=n.itemPerPage;i.templateFunctions=t;i.option=n;$(this).html(t.getGridTemplate(n,i.lastData));$(this).find(".columnConfigButton").click(function(n){n.stopPropagation();$(this).closest(".holderColumnConfig").toggleClass("openConfigMenu")});$(this).find(".gridExteraFilterModal").click(function(){var n=$(this).attr("data-modal-filter-id");$("#"+n).modal("show")});$(this).find(".exportToExcel").click(function(n){var i,t,r;n.stopPropagation();i=$(this).attr("data-excel-export-url");i&&(t=$(this).closest(".myGridCTRL"),r=getFormData(t),showLoader(t),postForm(i,r,function(n){var i,t;if(n&&n.isSuccess==undefined){const r=(n,t="",i=2222512)=>{const r=atob(n),u=[];for(let n=0;n<r.length;n+=i){const t=r.slice(n,n+i),f=new Array(t.length);for(let n=0;n<t.length;n++)f[n]=t.charCodeAt(n);const e=new Uint8Array(f);u.push(e)}return new Blob(u,{type:t})},u=r(n,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),f=URL.createObjectURL(u);i=(Math.random()+"").replace(".","");$("body").append('<a id="id_'+i+'" style="display:none"  >download.pdf<\/a>');t=$("#id_"+i);t.attr("href",f);t.attr("download","download.xlsx");t[0].click()}},null,function(){hideLoader(t)}))});$(this).find(".columnMenu").click(function(n){n.stopPropagation()});$("body").click(function(){$(".openConfigMenu").removeClass("openConfigMenu")});$(this).find(".columnSearchBox").keyup(function(){var n=$(this).val();$(this).closest(".columnMenu").find(".holdercolumnItem .columnMenuItem").each(function(){var t=$(this).find("label").text();t.indexOf(n)==-1?$(this).css("display","none"):$(this).css("display","block")})});$(this).find('.columnMenuItem input[type="checkbox"]').change(function(){var i=$(this).prop("checked"),r=$(this).attr("data-index"),n=$(this).closest(".myGridCTRL")[0],t=n.option;t.columns[r].hide=!i;n.option=t;n.refreshData()});i.initTopCB=function(){$(this).find(".headCB").change(function(){var n=$(this).prop("checked");$(this).closest(".myGridCTRL").find('tbody > tr > td:first-child > input[type="checkbox"]').prop("checked",n)})};i.initTopCB();i.initCTRL=function(n){$(n).find(".myGridPersianDP").each(function(){$(document).ready(function(){$(this.cObj).persianDatepicker({formatDate:"YYYY/0M/0D",cellWidth:38,cellHeight:30,fontSize:16})}.bind({cObj:this}))});$(n).find("select[data-url]").each(function(){initDropdown(this)})};i.initCTRL(this);i.addNewRow=function(){var n,r,u;$(this)[0].isAddNewShow!=!0&&(n=$(this).find(".myTableHeader"),r=$(this)[0].option,n.length>0&&(u=t.getGridHeaderSearchTemplate(r,!0,null,i.lastData),n.append(u),$(this)[0].isAddNewShow=!0,$(n).find(".saveButton").click(function(){var n=$(this).attr("data-url"),t;n&&(showLoader($(this).closest(".myGridCTRL")),t=getFormData($(this).closest("tr")),postForm(n,t,function(){hideLoader($(this).closest(".myGridCTRL"));$(this).closest(".myGridCTRL")[0].refreshData();$(this).closest(".myGridCTRL")[0].isAddNewShow=!1;$(this).closest("tr").remove()}.bind(this),null,function(){hideLoader($(this).closest(".myGridCTRL"))}.bind(this)))}),$(n).find(".cancelButton").click(function(){$(this).closest(".myGridCTRL")[0].isAddNewShow=!1;$(this).closest("tr").remove()}),$(this)[0].initCTRL(n.find("tr:last-child"))))};i.showEditStyle=function(r){var u=$(r).closest("tr"),e=t.getGridHeaderSearchTemplate(n,!0,!0,i.lastData),f;u.html($(e).html());$(u).closest(".myGridCTRL")[0].initCTRL(u);f=JSON.parse($(u).attr("data-row-json"));bindForm(f,u);$(u).find(".cancelButton").click(function(){var n=$(this).closest("tr"),r=$(n).closest(".myGridCTRL")[0].option,u=JSON.parse(n.attr("data-row-json")),f=t.getGridRowDataTemplate(u,r,i.lastData);n.html($(f).html());$(n).closest(".myGridCTRL")[0].bindActions(n)});$(u).find(".saveButton").click(function(){var n=$(this).attr("data-url");if(n){var t=getFormData($(this).closest("tr")),i=$(this).closest("tr"),r=$(i).closest(".myGridCTRL")[0].option,u=JSON.parse(i.attr("data-row-json"));t.append(r.key,u[r.key]);showLoader($(this).closest(".myGridCTRL"));postForm(n,t,function(){$(this).closest(".myGridCTRL")[0].refreshData()}.bind(this),function(){}.bind(this),function(){hideLoader($(this).closest(".myGridCTRL"))}.bind(this))}})};i.bindActions=function(n){n||(n=this);$(n).find(".myGridAction").each(function(){$(this).hasClass("myGridActionDelete")?$(this).click(function(){var n=$(this).attr("data-url"),t=$(this).attr("data-id"),i=$(this).closest(".modal").length>0?$(this).closest(".modal")[0].pKey:"";n&&t&&confirmDialog($(this).attr("title")?$(this).attr("title"):"حذف","آیا اطمینان دارید ؟",function(){var n=new FormData;n.append("id",this.id);this.pKey&&n.append("pKey",this.pKey);showLoader($(this.curThis).closest(".myGridCTRL"));postForm(this.url,n,function(){$(this).closest(".myGridCTRL")[0].refreshData();updateDashboardGridCountIfExist()}.bind(this.curThis),null,function(){hideLoader($(this).closest(".myGridCTRL"))}.bind(this.curThis))}.bind({url:n,id:t,curThis:this,pKey:i}))}):$(this).hasClass("showEditStyle")&&$(this).click(function(){$(this).closest(".myGridCTRL")[0].showEditStyle(this)})});$(n).find(".gridExpandButton").click(function(){$(n)[0].expandDetailes(this)})};i.expandDetailes=function(n){var r,f,u;$(n).hasClass("fa-plus-square")?(this.closeAllExpandButton(n),$(n).removeClass("fa-plus-square"),$(n).addClass("fa-minus-square"),u=$(n).closest("tr"),r=$(this)[0].option,u.after('<tr class="holderDetailesGrid"><td colspan="'+t.getGridColumnCount(r,i.lastData)+'" ><div id="'+r.detailes.id+'" class="myGridCTRL gridDetailes"><\/div><\/td><\/tr>'),f=JSON.parse(u.attr("data-row-json")),r.detailes.ds=f[r.detailesClientSchema],r.detailes.exteraParameters={pKey:f[r.key]},u.next().find(".myGridCTRL").initMyGrid(r.detailes)):($(n).removeClass("fa-minus-square"),$(n).addClass("fa-plus-square"),u=$(n).closest("tr"),u.next().remove())};i.closeAllExpandButton=function(n){$(n).closest(".myTableBody").find("> tr > td > .fa-minus-square").each(function(){$(this)[0]!=$(n)[0]&&$(this).click()})};i.bindData=function(n){var u=this.option,v=$(this).find("thead"),y=u.schema.total,p=u.schema.data,c=n[y],i=n[p],e=$(this).find(".myTableBody"),o="",f=$(this)[0],w=t.getGridHeaderTemplate(u,n),r,s,l,a,h;if(v.html($(w).html()),f.initCTRL(v),f.initTopCB(),e.html(""),f.curItems=i,f.curTotalItems=c,u.isClient){if(i&&i.length>0&&i.constructor==Array){for(r=this.skip;r<i.length&&r<this.skip+this.take;r++)o+=t.getGridRowDataTemplate(i[r],u,n);e.html(o);$(this)[0].bindActions()}}else if(i&&i.length>0&&i.constructor==Array){for(r=0;r<i.length;r++)o+=t.getGridRowDataTemplate(i[r],u,n);e.html(o);$(this)[0].bindActions()}if(i&&i.length==0&&i.constructor==Array&&e.html(t.getNoDataTemplate(u,n)),$(this).find("tbody").append(t.getFooterTemplate(c,u,f.currentPage,f.itemPerPage,n)),$(this).find(".myItemPerPage span").click(function(){var n=$(this).closest(".myGridCTRL");n[0].option.itemPerPage=parseInt($(this).text());n[0].take=parseInt($(this).text());n[0].itemPerPage=parseInt($(this).text());n[0].refreshData()}),$(this).find(".pageItem").click(function(){var n=$(this).closest(".myGridCTRL"),i=n[0].currentPage,t=Number.parseInt($(this).text());i!=t&&(n[0].currentPage=t,n[0].skip=(t-1)*n[0].take,n[0].refreshData())}),$(this).find(".moveFirst").click(function(n){n.preventDefault();n.stopPropagation();var t=$(this).closest(".myGridCTRL"),r=t[0].currentPage,i=r-1;return i<=0?!1:(r!=i&&(t[0].currentPage=i,t[0].skip=(i-1)*t[0].take,t[0].refreshData()),!1)}),$(this).find(".moveNext").click(function(){var n=$(this).closest(".myGridCTRL"),i=n[0].currentPage,t=i+1,r=Number.parseInt(Math.ceil(c/n[0].itemPerPage));t>r||i!=t&&(n[0].currentPage=t,n[0].skip=(t-1)*n[0].take,n[0].refreshData())}),s=$(this)[0].filtersValue,s){l={};for(a of s.keys())l[a]=s.get(a);bindForm(l,$(this).find("thead"),!0)}$(this).find(".myGridSearchButton").unbind("click").click(function(){$(this).closest(".myGridCTRL")[0].refreshData()});$(this).find(".gridAddButton").click(function(){$(this).closest(".myGridCTRL")[0].addNewRow()});$(this).find(".myGridCAction").click(function(){var n=$(this).attr("data-index"),i=JSON.parse($(this).closest("tr").attr("data-row-json")),t=$(this).closest(".myGridCTRL")[0].option.actions.cActions;t[n].whatTodDo&&t[n].whatTodDo(i)});h=$(this).closest(".stepWizardagent");h.length>0&&h[0].moveToIndex(h[0].lastIndex,!0);$(this).find(".hasSort").click(function(){var t=$(this).closest(".myGridCTRL")[0].option,i=t.sortField,n=t.sortFieldStatus,r=$(this).attr("data-field-name");n=n||n==!1?n==!0?null:!0:!1;r!=i&&(n=!1);i=r;t.sortField=i;t.sortFieldStatus=n;$(this).closest(".myGridCTRL")[0].refreshData()});bindTranslation()};i.setFiltersAndSorts=r;i.refreshData=function(){var n=$(this)[0].option,u,i,s,f,e,o,t;if(n.isClient)t=getFormData($(this)),$(this)[0].filtersValue=t,$(this)[0].bindData(r(n.ds,n,t));else{if(u=n.url,t=getFormData($(this)),t.append("skip",this.skip),t.append("take",this.take),(n.sortFieldStatus==!0||n.sortFieldStatus==!1)&&(t.append("sortField",n.sortField),t.append("sortFieldIsAsc",n.sortFieldStatus)),$(this)[0].filtersValue=t,n.exteraSearchIds)for(i=0;i<n.exteraSearchIds.length;i++){s=getFormData($("#"+n.exteraSearchIds[i]));for(f of s.entries())t.append(f[0],f[1])}if($(this).closest(".modal").length>0&&(e=$(this).closest(".modal")[0].pKey,e&&t.append("pKey",e)),n.exteraParameters)for(o in n.exteraParameters)t.append(o,n.exteraParameters[o]);u&&(showLoader($(this)),postForm(u,t,function(n){n.isSuccess!=!1&&($(this)[0].bindData(n),$(this)[0].lastData=n)}.bind(this),function(){}.bind(this),function(){hideLoader($(this))}.bind(this)))}};i.refreshData()})}};$.fn.initMyGridClient=function(n){return this.each(function(){var t={columns:[],isClient:!0,itemPerPage:10,schema:{data:"data",total:"total"},showColumnConfigButton:!0,selectable:n.selectable},u,i,r;for(u in n)t[u]=n[u];$(this).find("thead tr th").each(function(){$(this).attr("data-identifier")&&(t.key=$(this).attr("data-column-id"));var n={field:$(this).attr("data-column-id"),caption:$(this).text(),hide:$(this).attr("data-visible")=="false"?!0:!1,formatter:$(this).attr("data-formatter")};$(this).attr("data-column-search")=="true"&&(n.search={searchType:"text"});$(this).attr("data-sort")=="true"&&(n.sort=!0);t.columns.push(n)});i=[];$(this).find("tbody tr").each(function(){i.push({});$(this).find("td").each(function(n){i[i.length-1][t.columns[n].field]=$(this).text()})});t.ds={data:i,total:i.length};r="grid_"+Math.random();r=r.replace(".","");$(this).replaceWith('<div id="'+r+'" class="myGridCTRL"><\/div>');$("#"+r).initMyGrid(t)})};$.fn.initExpanablePanel=function(){return this.each(function(){$(this)[0].open=function(){$(this).hasClass("expandablePanelOpen")||($(this).addClass("expandablePanelOpen"),$(this)[0].interValAction=setTimeout(function(){$(this.curThis).find(".expandablePanelBody").addClass("expandablePanelBodyScroll");$(this.curThis)[0].interValAction=null}.bind({curThis:this}),500))};$(this)[0].close=function(){$(this).hasClass("expandablePanelOpen")&&($(this).removeClass("expandablePanelOpen"),$(this)[0].interValAction&&clearTimeout($(this)[0].interValAction))};$(this)[0].toggleOC=function(){$(this).hasClass("expandablePanelOpen")?$(this)[0].close():$(this)[0].open()};$(this).find(".expandablePanelHeader").click(function(){$(this).closest(".expandablePanel")[0].toggleOC()})})};$.fn.initMultiSelectLine=function(n){return this.each(function(){$(this)[0].unselectAll=function(){var n=$(this);n.find(".multiSelectLineBodyItem").each(function(){n[0].unSelect(this)})};$(this)[0].selectAll=function(){var n=$(this);n.find(".multiSelectLineBodyItem").each(function(){n[0].select(this)})};$(this)[0].select=function(n,t,i){var r=$(n);r.hasClass("multiSelectLineBodyItemActive")||(r.addClass("multiSelectLineBodyItemActive"),r.append('<input type="hidden" name="'+t+'" value="'+i+'" />'))};$(this)[0].unSelect=function(n){var t=$(n);t.hasClass("multiSelectLineBodyItemActive")&&(t.removeClass("multiSelectLineBodyItemActive"),t.find("input[type=hidden]").remove())};$(this).find(".multiSelectLineBodyItem").click(function(){var t=$(this).closest(".multiSelectLine"),i=$(this);i.hasClass("multiSelectLineBodyItemActive")?(t[0].unSelect(this),n&&eval(n)):(t[0].select(this,t.attr("data-name"),$(this).attr("data-id")),n&&eval(n))})})};typeof Object.create!="function"&&(Object.create=function(n){function t(){}return t.prototype=n,new t}),function(n,t){"use strict";var i={_positionClasses:["bottom-left","bottom-right","top-right","top-left","bottom-center","top-center","mid-center"],_defaultIcons:["success","error","info","warning"],init:function(t){this.prepareOptions(t,n.toast.options);this.process()},prepareOptions:function(t,i){var r={};typeof t=="string"||t instanceof Array?r.text=t:r=t;this.options=n.extend({},i,r)},process:function(){this.setup();this.addToDom();this.position();this.bindToast();this.animate()},setup:function(){var t="",i;if(this._toastEl=this._toastEl||n("<div><\/div>",{"class":"jq-toast-single"}),t+='<span class="jq-toast-loader"><\/span>',this.options.allowToastClose&&(t+='<span class="close-jq-toast-single">&times;<\/span>'),this.options.text instanceof Array){for(this.options.heading&&(t+='<h2 class="jq-toast-heading">'+this.options.heading+"<\/h2>"),t+='<ul class="jq-toast-ul">',i=0;i<this.options.text.length;i++)t+='<li class="jq-toast-li" id="jq-toast-item-'+i+'">'+this.options.text[i]+"<\/li>";t+="<\/ul>"}else this.options.heading&&(t+='<h2 class="jq-toast-heading">'+this.options.heading+"<\/h2>"),t+=this.options.text;this._toastEl.html(t);this.options.bgColor!==!1&&this._toastEl.css("background-color",this.options.bgColor);this.options.textColor!==!1&&this._toastEl.css("color",this.options.textColor);this.options.textAlign&&this._toastEl.css("text-align",this.options.textAlign);this.options.icon!==!1&&(this._toastEl.addClass("jq-has-icon"),n.inArray(this.options.icon,this._defaultIcons)!==-1&&this._toastEl.addClass("jq-icon-"+this.options.icon));this.options.class!==!1&&this._toastEl.addClass(this.options.class)},position:function(){typeof this.options.position=="string"&&n.inArray(this.options.position,this._positionClasses)!==-1?this.options.position==="bottom-center"?this._container.css({left:n(t).outerWidth()/2-this._container.outerWidth()/2,bottom:20}):this.options.position==="top-center"?this._container.css({left:n(t).outerWidth()/2-this._container.outerWidth()/2,top:20}):this.options.position==="mid-center"?this._container.css({left:n(t).outerWidth()/2-this._container.outerWidth()/2,top:n(t).outerHeight()/2-this._container.outerHeight()/2}):this._container.addClass(this.options.position):typeof this.options.position=="object"?this._container.css({top:this.options.position.top?this.options.position.top:"auto",bottom:this.options.position.bottom?this.options.position.bottom:"auto",left:this.options.position.left?this.options.position.left:"auto",right:this.options.position.right?this.options.position.right:"auto"}):this._container.addClass("bottom-left")},bindToast:function(){var n=this;this._toastEl.on("afterShown",function(){n.processLoader()});this._toastEl.find(".close-jq-toast-single").on("click",function(t){t.preventDefault();n.options.showHideTransition==="fade"?(n._toastEl.trigger("beforeHide"),n._toastEl.fadeOut(function(){n._toastEl.trigger("afterHidden")})):n.options.showHideTransition==="slide"?(n._toastEl.trigger("beforeHide"),n._toastEl.slideUp(function(){n._toastEl.trigger("afterHidden")})):(n._toastEl.trigger("beforeHide"),n._toastEl.hide(function(){n._toastEl.trigger("afterHidden")}))});if(typeof this.options.beforeShow=="function")this._toastEl.on("beforeShow",function(){n.options.beforeShow()});if(typeof this.options.afterShown=="function")this._toastEl.on("afterShown",function(){n.options.afterShown()});if(typeof this.options.beforeHide=="function")this._toastEl.on("beforeHide",function(){n.options.beforeHide()});if(typeof this.options.afterHidden=="function")this._toastEl.on("afterHidden",function(){n.options.afterHidden()})},addToDom:function(){var t=n(".jq-toast-wrap"),r,i;t.length===0?(t=n("<div><\/div>",{"class":"jq-toast-wrap",role:"alert","aria-live":"polite"}),n("body").append(t)):(!this.options.stack||isNaN(parseInt(this.options.stack,10)))&&t.empty();t.find(".jq-toast-single:hidden").remove();t.append(this._toastEl);this.options.stack&&!isNaN(parseInt(this.options.stack),10)&&(r=t.find(".jq-toast-single").length,i=r-this.options.stack,i>0&&n(".jq-toast-wrap").find(".jq-toast-single").slice(0,i).remove());this._container=t},canAutoHide:function(){return this.options.hideAfter!==!1&&!isNaN(parseInt(this.options.hideAfter,10))},processLoader:function(){if(!this.canAutoHide()||this.options.loader===!1)return!1;var i=this._toastEl.find(".jq-toast-loader"),t=(this.options.hideAfter-400)/1e3+"s",r=this.options.loaderBg,n=i.attr("style")||"";n=n.substring(0,n.indexOf("-webkit-transition"));n+="-webkit-transition: width "+t+" ease-in;                       -o-transition: width "+t+" ease-in;                       transition: width "+t+" ease-in;                       background-color: "+r+";";i.attr("style",n).addClass("jq-toast-loaded")},animate:function(){var n=this;this._toastEl.hide();this._toastEl.trigger("beforeShow");this.options.showHideTransition.toLowerCase()==="fade"?this._toastEl.fadeIn(function(){n._toastEl.trigger("afterShown")}):this.options.showHideTransition.toLowerCase()==="slide"?this._toastEl.slideDown(function(){n._toastEl.trigger("afterShown")}):this._toastEl.show(function(){n._toastEl.trigger("afterShown")});this.canAutoHide()&&(n=this,t.setTimeout(function(){n.options.showHideTransition.toLowerCase()==="fade"?(n._toastEl.trigger("beforeHide"),n._toastEl.fadeOut(function(){n._toastEl.trigger("afterHidden")})):n.options.showHideTransition.toLowerCase()==="slide"?(n._toastEl.trigger("beforeHide"),n._toastEl.slideUp(function(){n._toastEl.trigger("afterHidden")})):(n._toastEl.trigger("beforeHide"),n._toastEl.hide(function(){n._toastEl.trigger("afterHidden")}))},this.options.hideAfter))},reset:function(t){t==="all"?n(".jq-toast-wrap").remove():this._toastEl.remove()},update:function(n){this.prepareOptions(n,this.options);this.setup();this.bindToast()}};n.toast=function(n){var t=Object.create(i);return t.init(n,this),{reset:function(n){t.reset(n)},update:function(n){t.update(n)}}};n.toast.options={text:"",heading:"",showHideTransition:"fade",allowToastClose:!0,hideAfter:3e3,loader:!0,loaderBg:"#9EC600",stack:5,position:"bottom-left",bgColor:!1,textColor:!1,textAlign:"left",icon:!1,beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}}}(jQuery,window,document);
/*! Select2 4.1.0-beta.1 | https://github.com/select2/select2/blob/master/LICENSE.md */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(i),i}:n(jQuery)}(function(n){var t=function(){function u(n,t){return d.call(n,t)}function l(n,t){var e,o,s,f,h,y,c,p,i,l,b,u=t&&t.split("/"),a=r.map,v=a&&a["*"]||{};if(n){for(h=(n=n.split("/")).length-1,r.nodeIdCompat&&w.test(n[h])&&(n[h]=n[h].replace(w,"")),"."===n[0].charAt(0)&&u&&(n=u.slice(0,u.length-1).concat(n)),i=0;i<n.length;i++)if("."===(b=n[i]))n.splice(i,1),--i;else if(".."===b){if(0===i||1===i&&".."===n[2]||".."===n[i-1])continue;0<i&&(n.splice(i-1,2),i-=2)}n=n.join("/")}if((u||v)&&a){for(i=(e=n.split("/")).length;0<i;--i){if(o=e.slice(0,i).join("/"),u)for(l=u.length;0<l;--l)if(s=(s=a[u.slice(0,l).join("/")])&&s[o]){f=s;y=i;break}if(f)break;!c&&v&&v[o]&&(c=v[o],p=i)}!f&&c&&(f=c,y=p);f&&(e.splice(0,y,f),n=e.join("/"))}return n}function nt(n,t){return function(){var i=g.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),o.apply(f,i.concat([n,t]))}}function it(n){return function(t){i[n]=t}}function a(n){if(u(e,n)){var t=e[n];delete e[n];c[n]=!0;h.apply(f,t)}if(!u(i,n)&&!u(c,n))throw new Error("No "+n);return i[n]}function b(n){var i,t=n?n.indexOf("!"):-1;return-1<t&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function tt(n){return n?b(n):[]}var t,v,y,k,f,h,o,p,s,i,e,r,c,d,g,w;return n&&n.fn&&n.fn.select2&&n.fn.select2.amd&&(t=n.fn.select2.amd),t&&t.requirejs||(t?y=t:t={},i={},e={},r={},c={},d=Object.prototype.hasOwnProperty,g=[].slice,w=/\.js$/,p=function(n,t){var r,e,u=b(n),i=u[0],f=t[1];return n=u[1],i&&(r=a(i=l(i,f))),i?n=r&&r.normalize?r.normalize(n,(e=f,function(n){return l(n,e)})):l(n,f):(i=(u=b(n=l(n,f)))[0],n=u[1],i&&(r=a(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}},s={require:function(n){return nt(n)},exports:function(n){var t=i[n];return void 0!==t?t:i[n]={}},module:function(n){return{id:n,uri:"",exports:i[n],config:(t=n,function(){return r&&r.config&&r.config[t]||{}})};var t}},h=function(n,t,r,o){var y,h,b,w,l,k,d,v=[],g=typeof r;if(k=tt(o=o||n),"undefined"==g||"function"==g){for(t=!t.length&&r.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(h=(w=p(t[l],k)).f))v[l]=s.require(n);else if("exports"===h)v[l]=s.exports(n),d=!0;else if("module"===h)y=v[l]=s.module(n);else if(u(i,h)||u(e,h)||u(c,h))v[l]=a(h);else{if(!w.p)throw new Error(n+" missing "+h);w.p.load(w.n,nt(o,!0),it(h),{});v[l]=i[h]}b=r?r.apply(i[n],v):void 0;n&&(y&&y.exports!==f&&y.exports!==i[n]?i[n]=y.exports:b===f&&d||(i[n]=b))}else n&&(i[n]=r)},v=y=o=function(n,t,i,u,e){if("string"==typeof n)return s[n]?s[n](t):a(p(n,tt(t)).f);if(!n.splice){if((r=n).deps&&o(r.deps,r.callback),!t)return;t.splice?(n=t,t=i,i=null):n=f}return t=t||function(){},"function"==typeof i&&(i=u,u=e),u?h(f,n,t,i):setTimeout(function(){h(f,n,t,i)},4),o},o.config=function(n){return o(n)},v._defined=i,(k=function(n,t,r){if("string"!=typeof n)throw new Error("See almond README: incorrect module build, no module name");t.splice||(r=t,t=[]);u(i,n)||u(e,n)||(e[n]=[n,t,r])}).amd={jQuery:!0},t.requirejs=v,t.require=y,t.define=k),t.define("almond",function(){}),t.define("jquery",[],function(){var t=n||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(n){function r(n){var i=n.prototype,r=[];for(var t in i)"function"==typeof i[t]&&"constructor"!==t&&r.push(t);return r}function i(){this.listeners={}}var t={},u;return t.Extend=function(n,t){function r(){this.constructor=n}var u={}.hasOwnProperty;for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t.Decorate=function(n,t){function i(){var r=Array.prototype.unshift,u=t.prototype.constructor.length,i=n.prototype.constructor;0<u&&(r.call(arguments,n.prototype.constructor),i=t.prototype.constructor);i.apply(this,arguments)}function c(n){var r=function(){},u;return n in i.prototype&&(r=i.prototype[n]),u=t.prototype[n],function(){return Array.prototype.unshift.call(arguments,r),u.apply(this,arguments)}}var s=r(t),h=r(n),u,e,f,o;for(t.displayName=n.displayName,i.prototype=new function(){this.constructor=i},u=0;u<h.length;u++)e=h[u],i.prototype[e]=n.prototype[e];for(f=0;f<s.length;f++)o=s[f],i.prototype[o]=c(o);return i},i.prototype.on=function(n,t){this.listeners=this.listeners||{};n in this.listeners?this.listeners[n].push(t):this.listeners[n]=[t]},i.prototype.trigger=function(n){var i=Array.prototype.slice,t=i.call(arguments,1);this.listeners=this.listeners||{};null==t&&(t=[]);0===t.length&&t.push({});(t[0]._type=n)in this.listeners&&this.invoke(this.listeners[n],i.call(arguments,1));"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(n,t){for(var i=0,r=n.length;i<r;i++)n[i].apply(this,t)},t.Observable=i,t.generateChars=function(n){for(var t="",i=0;i<n;i++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(n,t){return function(){n.apply(t,arguments)}},t._convertData=function(n){var f,r,i,u,t;for(f in n)if(r=f.split("-"),i=n,1!==r.length){for(u=0;u<r.length;u++)t=r[u],(t=t.substring(0,1).toLowerCase()+t.substring(1))in i||(i[t]={}),u==r.length-1&&(i[t]=n[f]),i=i[t];delete n[f]}return n},t.hasScroll=function(t,i){var u=n(i),f=i.style.overflowX,r=i.style.overflowY;return(f!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===f||"scroll"===r||u.innerHeight()<i.scrollHeight||u.innerWidth()<i.scrollWidth)},t.escapeMarkup=function(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof n?n:String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})},t.__cache={},u=0,t.GetUniqueElementId=function(n){var i=n.getAttribute("data-select2-id");return null!=i||(i=n.id?"select2-data-"+n.id:"select2-data-"+(++u).toString()+"-"+t.generateChars(4),n.setAttribute("data-select2-id",i)),i},t.StoreData=function(n,i,r){var u=t.GetUniqueElementId(n);t.__cache[u]||(t.__cache[u]={});t.__cache[u][i]=r},t.GetData=function(i,r){var u=t.GetUniqueElementId(i);return r?t.__cache[u]&&null!=t.__cache[u][r]?t.__cache[u][r]:n(i).data(r):t.__cache[u]},t.RemoveData=function(n){var i=t.GetUniqueElementId(n);null!=t.__cache[i]&&delete t.__cache[i];n.removeAttribute("data-select2-id")},t.copyNonInternalCssClasses=function(n,t){var r=n.getAttribute("class").trim().split(/\s+/),i,u;r=r.filter(function(n){return 0===n.indexOf("select2-")});i=t.getAttribute("class").trim().split(/\s+/);i=i.filter(function(n){return 0!==n.indexOf("select2-")});u=r.concat(i);n.setAttribute("class",u.join(" "))},t}),t.define("select2/results",["jquery","./utils"],function(n,t){function i(n,t,r){this.$element=n;this.data=r;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<ul class="select2-results__options" role="listbox"><\/ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var u=this.options.get("escapeMarkup"),i,r;this.clear();this.hideLoading();i=n('<li role="alert" aria-live="assertive" class="select2-results__option"><\/li>');r=this.options.get("translations").get(t.message);i.append(u(r(t.args)));i[0].className+=" select2-results__message";this.$results.append(i)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(n){var i,t,r,u;if(this.hideLoading(),i=[],null!=n.results&&0!==n.results.length){for(n.results=this.sort(n.results),t=0;t<n.results.length;t++)r=n.results[t],u=this.option(r),i.push(u);this.$results.append(i)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(n,t){t.find(".select2-results").append(n)},i.prototype.sort=function(n){return this.options.get("sorter")(n)},i.prototype.highlightFirstItem=function(){var n=this.$results.find(".select2-results__option--selectable"),t=n.filter(".select2-results__option--selected");0<t.length?t.first().trigger("mouseenter"):n.first().trigger("mouseenter");this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current(function(r){var u=r.map(function(n){return n.id.toString()});i.$results.find(".select2-results__option--selectable").each(function(){var r=n(this),i=t.GetData(this,"data"),f=""+i.id;null!=i.element&&i.element.selected||null==i.element&&-1<u.indexOf(f)?(this.classList.add("select2-results__option--selected"),r.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),r.attr("aria-selected","false"))})})},i.prototype.showLoading=function(n){this.hideLoading();var i={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(n)},t=this.option(i);t.className+=" loading-results";this.$results.prepend(t)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var r=document.createElement("li"),u,l,o,a,s,f,h,e,v,y,c;r.classList.add("select2-results__option");r.classList.add("select2-results__option--selectable");u={role:"option"};l=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(o in(null!=i.element&&l.call(i.element,":disabled")||null==i.element&&i.disabled)&&(u["aria-disabled"]="true",r.classList.remove("select2-results__option--selectable"),r.classList.add("select2-results__option--disabled")),null==i.id&&r.classList.remove("select2-results__option--selectable"),null!=i._resultId&&(r.id=i._resultId),i.title&&(r.title=i.title),i.children&&(u.role="group",u["aria-label"]=i.text,r.classList.remove("select2-results__option--selectable"),r.classList.add("select2-results__option--group")),u)a=u[o],r.setAttribute(o,a);if(i.children){for(s=n(r),f=document.createElement("strong"),f.className="select2-results__group",this.template(i,f),h=[],e=0;e<i.children.length;e++)v=i.children[e],y=this.option(v),h.push(y);c=n("<ul><\/ul>",{"class":"select2-results__options select2-results__options--nested"});c.append(h);s.append(f);s.append(c)}else this.template(i,r);return t.StoreData(r,"data",i),r},i.prototype.bind=function(i){var r=this,u=i.id+"-results";this.$results.attr("id",u);i.on("results:all",function(n){r.clear();r.append(n.data);i.isOpen()&&(r.setClasses(),r.highlightFirstItem())});i.on("results:append",function(n){r.append(n.data);i.isOpen()&&r.setClasses()});i.on("query",function(n){r.hideMessages();r.showLoading(n)});i.on("select",function(){i.isOpen()&&(r.setClasses(),r.options.get("scrollAfterSelect")&&r.highlightFirstItem())});i.on("unselect",function(){i.isOpen()&&(r.setClasses(),r.options.get("scrollAfterSelect")&&r.highlightFirstItem())});i.on("open",function(){r.$results.attr("aria-expanded","true");r.$results.attr("aria-hidden","false");r.setClasses();r.ensureHighlightVisible()});i.on("close",function(){r.$results.attr("aria-expanded","false");r.$results.attr("aria-hidden","true");r.$results.removeAttr("aria-activedescendant")});i.on("results:toggle",function(){var n=r.getHighlightedResults();0!==n.length&&n.trigger("mouseup")});i.on("results:select",function(){var n=r.getHighlightedResults(),i;0!==n.length&&(i=t.GetData(n[0],"data"),n.hasClass("select2-results__option--selected")?r.trigger("close",{}):r.trigger("select",{data:i}))});i.on("results:previous",function(){var i=r.getHighlightedResults(),u=r.$results.find(".select2-results__option--selectable"),f=u.index(i),n,t;if(!(f<=0)){n=f-1;0===i.length&&(n=0);t=u.eq(n);t.trigger("mouseenter");var e=r.$results.offset().top,o=t.offset().top,s=r.$results.scrollTop()+(o-e);0===n?r.$results.scrollTop(0):o-e<0&&r.$results.scrollTop(s)}});i.on("results:next",function(){var e=r.getHighlightedResults(),t=r.$results.find(".select2-results__option--selectable"),i=t.index(e)+1,n;if(!(i>=t.length)){n=t.eq(i);n.trigger("mouseenter");var u=r.$results.offset().top+r.$results.outerHeight(!1),f=n.offset().top+n.outerHeight(!1),o=r.$results.scrollTop()+f-u;0===i?r.$results.scrollTop(0):u<f&&r.$results.scrollTop(o)}});i.on("results:focus",function(n){n.element[0].classList.add("select2-results__option--highlighted");n.element[0].setAttribute("aria-selected","true")});i.on("results:message",function(n){r.displayMessage(n)});n.fn.mousewheel&&this.$results.on("mousewheel",function(n){var t=r.$results.scrollTop(),i=r.$results.get(0).scrollHeight-t+n.deltaY,u=0<n.deltaY&&t-n.deltaY<=0,f=n.deltaY<0&&i<=r.$results.height();u?(r.$results.scrollTop(0),n.preventDefault(),n.stopPropagation()):f&&(r.$results.scrollTop(r.$results.get(0).scrollHeight-r.$results.height()),n.preventDefault(),n.stopPropagation())});this.$results.on("mouseup",".select2-results__option--selectable",function(i){var f=n(this),u=t.GetData(this,"data");f.hasClass("select2-results__option--selected")?r.options.get("multiple")?r.trigger("unselect",{originalEvent:i,data:u}):r.trigger("close",{}):r.trigger("select",{originalEvent:i,data:u})});this.$results.on("mouseenter",".select2-results__option--selectable",function(){var i=t.GetData(this,"data");r.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false");r.trigger("results:focus",{data:i,element:n(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var n=this.getHighlightedResults();if(0!==n.length){var f=this.$results.find(".select2-results__option--selectable").index(n),t=this.$results.offset().top,i=n.offset().top,r=this.$results.scrollTop()+(i-t),u=i-t;r-=2*n.outerHeight(!1);f<=2?this.$results.scrollTop(0):(u>this.$results.outerHeight()||u<0)&&this.$results.scrollTop(r)}},i.prototype.template=function(t,i){var u=this.options.get("templateResult"),f=this.options.get("escapeMarkup"),r=u(t,i);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=f(r):n(i).append(r)},i}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var i=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"><\/span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i},r.prototype.bind=function(n){var t=this,r=n.id+"-results";this.container=n;this.$selection.on("focus",function(n){t.trigger("focus",n)});this.$selection.on("blur",function(n){t._handleBlur(n)});this.$selection.on("keydown",function(n){t.trigger("keypress",n);n.which===i.SPACE&&n.preventDefault()});n.on("results:focus",function(n){t.$selection.attr("aria-activedescendant",n.data._resultId)});n.on("selection:update",function(n){t.update(n.data)});n.on("open",function(){t.$selection.attr("aria-expanded","true");t.$selection.attr("aria-owns",r);t._attachCloseHandler(n)});n.on("close",function(){t.$selection.attr("aria-expanded","false");t.$selection.removeAttr("aria-activedescendant");t.$selection.removeAttr("aria-owns");t.$selection.trigger("focus");t._detachCloseHandler(n)});n.on("enable",function(){t.$selection.attr("tabindex",t._tabindex);t.$selection.attr("aria-disabled","false")});n.on("disable",function(){t.$selection.attr("tabindex","-1");t.$selection.attr("aria-disabled","true")})},r.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||n.contains(i.$selection[0],document.activeElement)||i.trigger("blur",t)},1)},r.prototype._attachCloseHandler=function(i){n(document.body).on("mousedown.select2."+i.id,function(i){var r=n(i.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=r[0]&&t.GetData(this,"element").select2("close")})})},r.prototype._detachCloseHandler=function(t){n(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(n,t){t.find(".selection").append(n)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.");},r.prototype.isEnabled=function(){return!this.isDisabled()},r.prototype.isDisabled=function(){return this.options.get("disabled")},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n[0].classList.add("select2-selection--single"),n.html('<span class="select2-selection__rendered"><\/span><span class="select2-selection__arrow" role="presentation"><b role="presentation"><\/b><\/span>'),n},r.prototype.bind=function(n){var i=this,t;r.__super__.bind.apply(this,arguments);t=n.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",t).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",t);this.$selection.on("mousedown",function(n){1===n.which&&i.trigger("toggle",{originalEvent:n})});this.$selection.on("focus",function(){});this.$selection.on("blur",function(){});n.on("focus",function(){n.isOpen()||i.$selection.trigger("focus")})},r.prototype.clear=function(){var n=this.$selection.find(".select2-selection__rendered");n.empty();n.removeAttr("title")},r.prototype.display=function(n,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(n,t))},r.prototype.selectionContainer=function(){return n("<span><\/span>")},r.prototype.update=function(n){var r;if(0!==n.length){var i=n[0],t=this.$selection.find(".select2-selection__rendered"),u=this.display(i,t);t.empty().append(u);r=i.title||i.text;r?t.attr("title",r):t.removeAttr("title")}else this.clear()},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n[0].classList.add("select2-selection--multiple"),n.html('<ul class="select2-selection__rendered"><\/ul>'),n},r.prototype.bind=function(t){var u=this,f;r.__super__.bind.apply(this,arguments);f=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",f);this.$selection.on("click",function(n){u.trigger("toggle",{originalEvent:n})});this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!u.isDisabled()){var r=n(this).parent(),f=i.GetData(r[0],"data");u.trigger("unselect",{originalEvent:t,data:f})}});this.$selection.on("keydown",".select2-selection__choice__remove",function(n){u.isDisabled()||n.stopPropagation()})},r.prototype.clear=function(){var n=this.$selection.find(".select2-selection__rendered");n.empty();n.removeAttr("title")},r.prototype.display=function(n,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(n,t))},r.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;<\/span><\/button><span class="select2-selection__choice__display"><\/span><\/li>')},r.prototype.update=function(n){var o,s,u;if(this.clear(),0!==n.length){for(var h=[],c=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",f=0;f<n.length;f++){var t=n[f],r=this.selectionContainer(),l=this.display(t,r),e=c+i.generateChars(4)+"-";e+=t.id?t.id:i.generateChars(4);r.find(".select2-selection__choice__display").append(l).attr("id",e);o=t.title||t.text;o&&r.attr("title",o);s=this.options.get("translations").get("removeItem");u=r.find(".select2-selection__choice__remove");u.attr("title",s());u.attr("aria-label",s());u.attr("aria-describedby",e);i.StoreData(r[0],"data",t);h.push(r)}this.$selection.find(".select2-selection__rendered").append(h)}},r}),t.define("select2/selection/placeholder",[],function(){function n(n,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i)}return n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.createPlaceholder=function(n,t){var i=this.selectionContainer();return i.html(this.display(t)),i[0].classList.add("select2-selection__placeholder"),i[0].classList.remove("select2-selection__choice"),i},n.prototype.update=function(n,t){var r=1==t.length&&t[0].id!=this.placeholder.id,i;if(1<t.length||r)return n.call(this,t);this.clear();i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},n}),t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(n,t,i){function r(){}return r.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(n){r._handleClear(n)});t.on("keypress",function(n){r._handleKeyboardClear(n,t)})},r.prototype._handleClear=function(n,t){var e,u,o,r,f;if(!this.isDisabled()&&(e=this.$selection.find(".select2-selection__clear"),0!==e.length))if(t.stopPropagation(),u=i.GetData(e[0],"data"),o=this.$element.val(),this.$element.val(this.placeholder.id),r={data:u},this.trigger("clear",r),r.prevented)this.$element.val(o);else{for(f=0;f<u.length;f++)if(r={data:u[f]},this.trigger("unselect",r),r.prevented)return void this.$element.val(o);this.$element.trigger("input").trigger("change");this.trigger("toggle",{})}},r.prototype._handleKeyboardClear=function(n,i,r){r.isOpen()||i.which!=t.DELETE&&i.which!=t.BACKSPACE||this._handleClear(i)},r.prototype.update=function(t,r){if(t.call(this,r),this.$selection.find(".select2-selection__clear").remove(),!(0<this.$selection.find(".select2-selection__placeholder").length||0===r.length)){var e=this.$selection.find(".select2-selection__rendered").attr("id"),f=this.options.get("translations").get("removeAllItems"),u=n('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;<\/span><\/button>');u.attr("title",f());u.attr("aria-label",f());u.attr("aria-describedby",e);i.StoreData(u[0],"data",r);this.$selection.prepend(u)}},r}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,i){function r(n,t,i){n.call(this,t,i)}return r.prototype.render=function(t){var r=n('<span class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /><\/span>'),i;return this.$searchContainer=r,this.$search=r.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),i=t.call(this),this._transferTabIndex(),i.append(this.$searchContainer),i},r.prototype.bind=function(n,r,u){var f=this,s=r.id+"-results",h=r.id+"-container",e,o;n.call(this,r,u);f.$search.attr("aria-describedby",h);r.on("open",function(){f.$search.attr("aria-controls",s);f.$search.trigger("focus")});r.on("close",function(){f.$search.val("");f.resizeSearch();f.$search.removeAttr("aria-controls");f.$search.removeAttr("aria-activedescendant");f.$search.trigger("focus")});r.on("enable",function(){f.$search.prop("disabled",!1);f._transferTabIndex()});r.on("disable",function(){f.$search.prop("disabled",!0)});r.on("focus",function(){f.$search.trigger("focus")});r.on("results:focus",function(n){n.data._resultId?f.$search.attr("aria-activedescendant",n.data._resultId):f.$search.removeAttr("aria-activedescendant")});this.$selection.on("focusin",".select2-search--inline",function(n){f.trigger("focus",n)});this.$selection.on("focusout",".select2-search--inline",function(n){f._handleBlur(n)});this.$selection.on("keydown",".select2-search--inline",function(n){var r,u;(n.stopPropagation(),f.trigger("keypress",n),f._keyUpPrevented=n.isDefaultPrevented(),n.which===i.BACKSPACE&&""===f.$search.val())&&(r=f.$selection.find(".select2-selection__choice").last(),0<r.length&&(u=t.GetData(r[0],"data"),f.searchRemoveChoice(u),n.preventDefault()))});this.$selection.on("click",".select2-search--inline",function(n){f.$search.val()&&n.stopPropagation()});e=document.documentMode;o=e&&e<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(){o?f.$selection.off("input.search input.searchcheck"):f.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(n){if(o&&"input"===n.type)f.$selection.off("input.search input.searchcheck");else{var t=n.which;t!=i.SHIFT&&t!=i.CTRL&&t!=i.ALT&&t!=i.TAB&&f.handleSearch(n)}})},r.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")},r.prototype.createPlaceholder=function(n,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(n,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");n.call(this,t);this.resizeSearch();i&&this.$search.trigger("focus")},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(n,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()},r.prototype.resizeSearch=function(){this.$search.css("width","25px");var n="100%";""===this.$search.attr("placeholder")&&(n=.75*(this.$search.val().length+1)+"em");this.$search.css("width",n)},r}),t.define("select2/selection/selectionCss",["../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=this.options.get("selectionCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),n.copyNonInternalCssClasses(r[0],this.$element[0])),r.addClass(i),r},t}),t.define("select2/selection/eventRelay",["jquery"],function(n){function t(){}return t.prototype.bind=function(t,i,r){var u=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],e=["opening","closing","selecting","unselecting","clearing"];t.call(this,i,r);i.on("*",function(t,i){if(-1!==f.indexOf(t)){i=i||{};var r=n.Event("select2:"+t,{params:i});u.$element.trigger(r);-1!==e.indexOf(t)&&(i.prevented=r.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(n,t){function i(n){this.dict=n||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(n){return this.dict[n]},i.prototype.extend=function(t){this.dict=n.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(n){if(!(n in i._cache)){var r=t(n);i._cache[n]=r}return new i(i._cache[n])},i}),t.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"}}),t.define("select2/data/base",["../utils"],function(n){function t(){t.__super__.constructor.call(this)}return n.Extend(t,n.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.");},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.");},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var r=t.id+"-result-";return r+=n.generateChars(4),r+=null!=i.id?"-"+i.id.toString():"-"+n.generateChars(4),r},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,n),r.prototype.current=function(n){var t=this;n(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(n){return t.item(i(n))}))},r.prototype.select=function(n){var t=this,i;if(n.selected=!0,null!=n.element&&"option"===n.element.tagName.toLowerCase())return n.element.selected=!0,void this.$element.trigger("input").trigger("change");this.$element.prop("multiple")?this.current(function(i){var u=[],r,f;for((n=[n]).push.apply(n,i),r=0;r<n.length;r++)f=n[r].id,-1===u.indexOf(f)&&u.push(f);t.$element.val(u);t.$element.trigger("input").trigger("change")}):(i=n.id,this.$element.val(i),this.$element.trigger("input").trigger("change"))},r.prototype.unselect=function(n){var t=this;if(this.$element.prop("multiple")){if(n.selected=!1,null!=n.element&&"option"===n.element.tagName.toLowerCase())return n.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(i){for(var f,r=[],u=0;u<i.length;u++)f=i[u].id,f!==n.id&&-1===r.indexOf(f)&&r.push(f);t.$element.val(r);t.$element.trigger("input").trigger("change")})}},r.prototype.bind=function(n){var t=this;(this.container=n).on("select",function(n){t.select(n.data)});n.on("unselect",function(n){t.unselect(n.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){t.RemoveData(this)})},r.prototype.query=function(n,t){var r=[],u=this;this.$element.children().each(function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var f=i(this),e=u.item(f),t=u.matches(n,e);null!==t&&r.push(t)}});t({results:r})},r.prototype.addOptions=function(n){this.$element.append(n)},r.prototype.option=function(n){var r,u;return n.children?(r=document.createElement("optgroup")).label=n.text:void 0!==(r=document.createElement("option")).textContent?r.textContent=n.text:r.innerText=n.text,void 0!==n.id&&(r.value=n.id),n.disabled&&(r.disabled=!0),n.selected&&(r.selected=!0),n.title&&(r.title=n.title),u=this._normalizeItem(n),u.element=r,t.StoreData(r,"data",u),i(r)},r.prototype.item=function(n){var r={},u,s,h;if(null!=(r=t.GetData(n[0],"data")))return r;if(u=n[0],"option"===u.tagName.toLowerCase())r={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")};else if("optgroup"===u.tagName.toLowerCase()){r={text:n.prop("label"),children:[],title:n.prop("title")};for(var e=n.children("option"),o=[],f=0;f<e.length;f++)s=i(e[f]),h=this.item(s),o.push(h);r.children=o}return(r=this._normalizeItem(r)).element=n[0],t.StoreData(n[0],"data",r),r},r.prototype._normalizeItem=function(n){return n!==Object(n)&&(n={id:n,text:n}),null!=(n=i.extend({},{text:""},n)).id&&(n.id=n.id.toString()),null!=n.text&&(n.text=n.text.toString()),null==n._resultId&&n.id&&null!=this.container&&(n._resultId=this.generateResultId(this.container,n)),i.extend({},{selected:!1,disabled:!1},n)},r.prototype.matches=function(n,t){return this.options.get("matcher")(n,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(n,t,i){function r(n,t){this._dataToConvert=t.get("data")||[];r.__super__.constructor.call(this,n,t)}return t.Extend(r,n),r.prototype.bind=function(n,t){r.__super__.bind.call(this,n,t);this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var t=this.$element.find("option").filter(function(t,i){return i.value==n.id.toString()});0===t.length&&(t=this.option(n),this.addOptions(t));r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(n){function l(n){return function(){return i(this).val()==n.id}}for(var t,u,s,h=this,f=this.$element.find("option"),c=f.map(function(){return h.item(i(this)).id}).get(),e=[],r=0;r<n.length;r++)if(t=this._normalizeItem(n[r]),0<=c.indexOf(t.id)){var o=f.filter(l(t)),a=this.item(o),v=i.extend(!0,{},t,a),y=this.option(v);o.replaceWith(y)}else u=this.option(t),t.children&&(s=this.convertToOptions(t.children),u.append(s)),e.push(u);return e},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(n,t,i){function r(n,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults);r.__super__.constructor.call(this,n,t)}return t.Extend(r,n),r.prototype._applyDefaults=function(n){var t={data:function(n){return i.extend({},n,{q:n.term})},transport:function(n,t,r){var u=i.ajax(n);return u.then(t),u.fail(r),u}};return i.extend({},t,n,!0)},r.prototype.processResults=function(n){return n},r.prototype.query=function(n,t){function f(){var i=r.transport(r,function(i){var r=u.processResults(i,n);u.options.get("debug")&&window.console&&console.error&&(r&&r.results&&Array.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response."));t(r)},function(){"status"in i&&(0===i.status||"0"===i.status)||u.trigger("results:message",{message:"errorLoading"})});u._request=i}var u=this,r;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);r=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url.call(this.$element,n));"function"==typeof r.data&&(r.data=r.data.call(this.$element,n));this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},r}),t.define("select2/data/tags",["jquery"],function(n){function t(n,t,i){var u=i.get("tags"),e=i.get("createTag"),f,r;if(void 0!==e&&(this.createTag=e),f=i.get("insertTag"),void 0!==f&&(this.insertTag=f),n.call(this,t,i),Array.isArray(u))for(r=0;r<u.length;r++){var o=u[r],s=this._normalizeItem(o),h=this.option(s);this.$element.append(h)}}return t.prototype.query=function(n,t,i){var r=this;this._removeOldTags();null!=t.term&&null==t.page?n.call(this,t,function n(u,f){for(var s,l,h,c,e=u.results,o=0;o<e.length;o++)if(s=e[o],l=null!=s.children&&!n({results:s.children},!0),(s.text||"").toUpperCase()===(t.term||"").toUpperCase()||l)return!f&&(u.data=e,void i(u));if(f)return!0;h=r.createTag(t);null!=h&&(c=r.option(h),c.attr("data-select2-tag",!0),r.addOptions([c]),r.insertTag(e,h));u.results=e;i(u)}):n.call(this,t,i)},t.prototype.createTag=function(n,t){if(null==t.term)return null;var i=t.term.trim();return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(n,t,i){t.unshift(i)},t.prototype._removeOldTags=function(){this.$element.find("option[data-select2-tag]").each(function(){this.selected||n(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(n){function t(n,t,i){var r=i.get("tokenizer");void 0!==r&&(this.tokenizer=r);n.call(this,t,i)}return t.prototype.bind=function(n,t,i){n.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,i,r){var u=this,f;i.term=i.term||"";f=this.tokenizer(i,this.options,function(t){var f,i=u._normalizeItem(t),r;u.$element.find("option").filter(function(){return n(this).val()===i.id}).length||(r=u.option(i),r.attr("data-select2-tag",!0),u._removeOldTags(),u.addOptions([r]));f=i;u.trigger("select",{data:f})});f.term!==i.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.trigger("focus")),i.term=f.term);t.call(this,i,r)},t.prototype.tokenizer=function(t,i,r,u){for(var s,h,o,c=r.get("tokenSeparators")||[],e=i.term,f=0,l=this.createTag||function(n){return{id:n.term,text:n.term}};f<e.length;)s=e[f],-1!==c.indexOf(s)?(h=e.substr(0,f),o=l(n.extend({},i,{term:h})),null!=o?(u(o),e=e.substr(f+1)||"",f=0):f++):f++;return{term:e}},t}),t.define("select2/data/minimumInputLength",[],function(){function n(n,t,i){this.minimumInputLength=i.get("minimumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.term=t.term||"";t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):n.call(this,t,i)},n}),t.define("select2/data/maximumInputLength",[],function(){function n(n,t,i){this.maximumInputLength=i.get("maximumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.term=t.term||"";0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):n.call(this,t,i)},n}),t.define("select2/data/maximumSelectionLength",[],function(){function n(n,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");n.call(this,t,i)}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(){r._checkIfMaximumSelected()})},n.prototype.query=function(n,t,i){var r=this;this._checkIfMaximumSelected(function(){n.call(r,t,i)})},n.prototype._checkIfMaximumSelected=function(n,t){var i=this;this.current(function(n){var r=null!=n?n.length:0;0<i.maximumSelectionLength&&r>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t&&t()})},n}),t.define("select2/dropdown",["jquery","./utils"],function(n,t){function i(n,t){this.$element=n;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<span class="select2-dropdown"><span class="select2-results"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t},i.prototype.bind=function(){},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=n('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /><\/span>');return this.$searchContainer=i,this.$search=i.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),r.prepend(i),r},t.prototype.bind=function(t,i,r){var u=this,f=i.id+"-results";t.call(this,i,r);this.$search.on("keydown",function(n){u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented()});this.$search.on("input",function(){n(this).off("keyup")});this.$search.on("keyup input",function(n){u.handleSearch(n)});i.on("open",function(){u.$search.attr("tabindex",0);u.$search.attr("aria-controls",f);u.$search.trigger("focus");window.setTimeout(function(){u.$search.trigger("focus")},0)});i.on("close",function(){u.$search.attr("tabindex",-1);u.$search.removeAttr("aria-controls");u.$search.removeAttr("aria-activedescendant");u.$search.val("");u.$search.trigger("blur")});i.on("focus",function(){i.isOpen()||u.$search.trigger("focus")});i.on("results:all",function(n){null!=n.query.term&&""!==n.query.term||(u.showSearch(n)?u.$searchContainer[0].classList.remove("select2-search--hide"):u.$searchContainer[0].classList.add("select2-search--hide"))});i.on("results:focus",function(n){n.data._resultId?u.$search.attr("aria-activedescendant",n.data._resultId):u.$search.removeAttr("aria-activedescendant")})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function n(n,t,i,r){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i,r)}return n.prototype.append=function(n,t){t.results=this.removePlaceholder(t.results);n.call(this,t)},n.prototype.normalizePlaceholder=function(n,t){return"string"==typeof t&&(t={id:"",text:t}),t},n.prototype.removePlaceholder=function(n,t){for(var u,r=t.slice(0),i=t.length-1;0<=i;i--)u=t[i],this.placeholder.id===u.id&&r.splice(i,1);return r},n}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(n,t,i,r){this.lastParams={};n.call(this,t,i,r);this.$loadingMore=this.createLoadingMore();this.loading=!1}return t.prototype.append=function(n,t){this.$loadingMore.remove();this.loading=!1;n.call(this,t);this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("query",function(n){r.lastParams=n;r.loading=!0});t.on("query:append",function(n){r.lastParams=n;r.loading=!0});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var i=n.contains(document.documentElement,this.$loadingMore[0]),t;!this.loading&&i&&(t=this.$results.offset().top+this.$results.outerHeight(!1),this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=t+50&&this.loadMore())},t.prototype.loadMore=function(){this.loading=!0;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)},t.prototype.showLoadingMore=function(n,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"><\/li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(n,t){function i(t,i,r){this.$dropdownParent=n(r.get("dropdownParent")||document.body);t.call(this,i,r)}return i.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("open",function(){r._showDropdown();r._attachPositioningHandler(t);r._bindContainerResultHandlers(t)});t.on("close",function(){r._hideDropdown();r._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})},i.prototype.destroy=function(n){n.call(this);this.$dropdownContainer.remove()},i.prototype.position=function(n,t,i){t.attr("class",i.attr("class"));t[0].classList.remove("select2");t[0].classList.add("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i},i.prototype.render=function(t){var i=n("<span><\/span>"),r=t.call(this);return i.append(r),this.$dropdownContainer=i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(n,t){if(!this._containerResultsHandlersBound){var i=this;t.on("results:all",function(){i._positionDropdown();i._resizeDropdown()});t.on("results:append",function(){i._positionDropdown();i._resizeDropdown()});t.on("results:message",function(){i._positionDropdown();i._resizeDropdown()});t.on("select",function(){i._positionDropdown();i._resizeDropdown()});t.on("unselect",function(){i._positionDropdown();i._resizeDropdown()});this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,r){var u=this,f="scroll.select2."+r.id,o="resize.select2."+r.id,s="orientationchange.select2."+r.id,e=this.$container.parents().filter(t.hasScroll);e.each(function(){t.StoreData(this,"select2-scroll-position",{x:n(this).scrollLeft(),y:n(this).scrollTop()})});e.on(f,function(){var i=t.GetData(this,"select2-scroll-position");n(this).scrollTop(i.y)});n(window).on(f+" "+o+" "+s,function(){u._positionDropdown();u._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,r){var u="scroll.select2."+r.id,f="resize.select2."+r.id,e="orientationchange.select2."+r.id;this.$container.parents().filter(t.hasScroll).off(u);n(window).off(u+" "+f+" "+e)},i.prototype._positionDropdown=function(){var s=n(window),e=this.$dropdown[0].classList.contains("select2-dropdown--above"),a=this.$dropdown[0].classList.contains("select2-dropdown--below"),t=null,i=this.$container.offset(),r,f;i.bottom=i.top+this.$container.outerHeight(!1);r={height:this.$container.outerHeight(!1)};r.top=i.top;r.bottom=i.top+r.height;var h=this.$dropdown.outerHeight(!1),v=s.scrollTop(),y=s.scrollTop()+s.height(),c=v<i.top-h,l=y>i.bottom+h,o={left:i.left,top:r.bottom},u=this.$dropdownParent;"static"===u.css("position")&&(u=u.offsetParent());f={top:0,left:0};(n.contains(document.body,u[0])||u[0].isConnected)&&(f=u.offset());o.top-=f.top;o.left-=f.left;e||a||(t="below");l||!c||e?!c&&l&&e&&(t="below"):t="above";("above"==t||e&&"below"!==t)&&(o.top=r.top-f.top-h);null!=t&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+t),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+t));this.$dropdownContainer.css(o)},i.prototype._resizeDropdown=function(){var n={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(n.minWidth=n.width,n.position="relative",n.width="auto");this.$dropdown.css(n)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(n,t,i,r){this.minimumResultsForSearch=i.get("minimumResultsForSearch");this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0);n.call(this,t,i,r)}return n.prototype.showSearch=function(n,t){return!(function n(t){for(var u,i=0,r=0;r<t.length;r++)u=t[r],u.children?i+=n(u.children):i++;return i}(t.data.results)<this.minimumResultsForSearch)&&n.call(this,t)},n}),t.define("select2/dropdown/selectOnClose",["../utils"],function(n){function t(){}return t.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("close",function(n){r._handleSelectOnClose(n)})},t.prototype._handleSelectOnClose=function(t,i){var u,f,r;i&&null!=i.originalSelect2Event&&(u=i.originalSelect2Event,"select"===u._type||"unselect"===u._type)||(f=this.getHighlightedResults(),f.length<1||(r=n.GetData(f[0],"data"),null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})))},t}),t.define("select2/dropdown/closeOnSelect",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(n){r._selectTriggered(n)});t.on("unselect",function(n){r._selectTriggered(n)})},n.prototype._selectTriggered=function(n,t){var i=t.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},n}),t.define("select2/dropdown/dropdownCss",["../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=this.options.get("dropdownCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),n.copyNonInternalCssClasses(r[0],this.$element[0])),r.addClass(i),r},t}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(n){var t=n.input.length-n.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(n){return"Please enter "+(n.minimum-n.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(n){var t="You can only select "+n.maximum+" item";return 1!=n.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"}}}),t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./i18n/en"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){function st(){this.reset()}return st.prototype.apply=function(c){var ct,l,st,ht;for((null==(c=n.extend(!0,{},this.defaults,c)).dataAdapter&&(c.dataAdapter=null!=c.ajax?y:null!=c.data?v:a,0<c.minimumInputLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,b)),0<c.maximumInputLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,k)),0<c.maximumSelectionLength&&(c.dataAdapter=h.Decorate(c.dataAdapter,d)),c.tags&&(c.dataAdapter=h.Decorate(c.dataAdapter,p)),null==c.tokenSeparators&&null==c.tokenizer||(c.dataAdapter=h.Decorate(c.dataAdapter,w))),null==c.resultsAdapter&&(c.resultsAdapter=t,null!=c.ajax&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,it)),null!=c.placeholder&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,tt)),c.selectOnClose&&(c.resultsAdapter=h.Decorate(c.resultsAdapter,ft))),null==c.dropdownAdapter)&&(c.multiple?c.dropdownAdapter=g:(ct=h.Decorate(g,nt),c.dropdownAdapter=ct),0!==c.minimumResultsForSearch&&(c.dropdownAdapter=h.Decorate(c.dropdownAdapter,ut)),c.closeOnSelect&&(c.dropdownAdapter=h.Decorate(c.dropdownAdapter,et)),null!=c.dropdownCssClass&&(c.dropdownAdapter=h.Decorate(c.dropdownAdapter,ot)),c.dropdownAdapter=h.Decorate(c.dropdownAdapter,rt)),null==c.selectionAdapter&&(c.selectionAdapter=c.multiple?r:i,null!=c.placeholder&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,u)),c.allowClear&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,f)),c.multiple&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,e)),null!=c.selectionCssClass&&(c.selectionAdapter=h.Decorate(c.selectionAdapter,o)),c.selectionAdapter=h.Decorate(c.selectionAdapter,s)),c.language=this._resolveLanguage(c.language),c.language.push("en"),l=[],st=0;st<c.language.length;st++)ht=c.language[st],-1===l.indexOf(ht)&&l.push(ht);return c.language=l,c.translations=this._processTranslations(c.language,c.debug),c},st.prototype.reset=function(){function t(n){return n.replace(/[^\u0000-\u007E]/g,function(n){return l[n]||n})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:{},matcher:function i(r,u){var f,e,o,s;if(null==r.term||""===r.term.trim())return u;if(u.children&&0<u.children.length){for(f=n.extend(!0,{},u),e=u.children.length-1;0<=e;e--)null==i(r,u.children[e])&&f.children.splice(e,1);return 0<f.children.length?f:i(r,f)}return o=t(u.text).toUpperCase(),s=t(r.term).toUpperCase(),-1<o.indexOf(s)?u:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(n){return n},templateResult:function(n){return n.text},templateSelection:function(n){return n.text},theme:"default",width:"resolve"}},st.prototype.applyFromElement=function(n,t){var i=n.language,r=this.defaults.language,u=t.prop("lang"),f=t.closest("[lang]").prop("lang"),e=Array.prototype.concat.call(this._resolveLanguage(u),this._resolveLanguage(i),this._resolveLanguage(r),this._resolveLanguage(f));return n.language=e,n},st.prototype._resolveLanguage=function(t){var r,u,i,f;if(!t)return[];if(n.isEmptyObject(t))return[];if(n.isPlainObject(t))return[t];for(r=Array.isArray(t)?t:[t],u=[],i=0;i<r.length;i++)(u.push(r[i]),"string"==typeof r[i]&&0<r[i].indexOf("-"))&&(f=r[i].split("-")[0],u.push(f));return u},st.prototype._processTranslations=function(t,i){for(var u,r,e=new c,f=0;f<t.length;f++){if(u=new c,r=t[f],"string"==typeof r)try{u=c.loadPath(r)}catch(t){try{r=this.defaults.amdLanguageBase+r;u=c.loadPath(r)}catch(t){i&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else u=n.isPlainObject(r)?new c(r):r;e.extend(u)}return e},st.prototype.set=function(t,i){var r={},u;r[n.camelCase(t)]=i;u=h._convertData(r);n.extend(!0,this.defaults,u)},new st}),t.define("select2/options",["jquery","./defaults","./utils"],function(n,t,i){function r(n,i){this.options=n;null!=i&&this.fromElement(i);null!=i&&(this.options=t.applyFromElement(this.options,i));this.options=t.apply(this.options)}return r.prototype.fromElement=function(t){function a(n,t){return t.toUpperCase()}var l=["select2"],u,e,s,o,h,c,f,r;for(null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.autocomplete&&t.prop("autocomplete")&&(this.options.autocomplete=t.prop("autocomplete")),null==this.options.dir&&(this.options.dir=t.prop("dir")?t.prop("dir"):t.closest("[dir]").prop("dir")?t.closest("[dir]").prop("dir"):"ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),i.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),i.StoreData(t[0],"data",i.GetData(t[0],"select2Tags")),i.StoreData(t[0],"tags",!0)),i.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",i.GetData(t[0],"ajaxUrl")),i.StoreData(t[0],"ajax-Url",i.GetData(t[0],"ajaxUrl"))),u={},e=0;e<t[0].attributes.length;e++)s=t[0].attributes[e].name,o="data-",s.substr(0,o.length)==o&&(h=s.substring(o.length),c=i.GetData(t[0],h),u[h.replace(/-([a-z])/g,a)]=c);n.fn.jquery&&"1."==n.fn.jquery.substr(0,2)&&t[0].dataset&&(u=n.extend(!0,{},t[0].dataset,u));f=n.extend(!0,{},i.GetData(t[0]),u);for(r in f=i._convertData(f))-1<l.indexOf(r)||(n.isPlainObject(this.options[r])?n.extend(this.options[r],f[r]):this.options[r]=f[r]);return this},r.prototype.get=function(n){return this.options[n]},r.prototype.set=function(n,t){this.options[n]=t},r}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(n,t,i,r){var u=function(n,r){var e,o,f,s,h,c,l;null!=i.GetData(n[0],"select2")&&i.GetData(n[0],"select2").destroy();this.$element=n;this.id=this._generateId(n);r=r||{};this.options=new t(r,n);u.__super__.constructor.call(this);e=n.attr("tabindex")||0;i.StoreData(n[0],"old-tabindex",e);n.attr("tabindex","-1");o=this.options.get("dataAdapter");this.dataAdapter=new o(n,this.options);f=this.render();this._placeContainer(f);s=this.options.get("selectionAdapter");this.selection=new s(n,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,f);h=this.options.get("dropdownAdapter");this.dropdown=new h(n,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,f);c=this.options.get("resultsAdapter");this.results=new c(n,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(n){l.trigger("selection:update",{data:n})});n[0].classList.add("select2-hidden-accessible");n.attr("aria-hidden","true");this._syncAttributes();i.StoreData(n[0],"select2",this);n.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(n){return"select2-"+(null!=n.attr("id")?n.attr("id"):null!=n.attr("name")?n.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},u.prototype._placeContainer=function(n){n.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&n.css("width",t)},u.prototype._resolveWidth=function(n,t){var r,u,f,i;if("resolve"==t)return r=this._resolveWidth(n,"style"),null!=r?r:this._resolveWidth(n,"element");if("element"==t)return u=n.outerWidth(!1),u<=0?"auto":u+"px";if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(n[0]).width;if(f=n.attr("style"),"string"!=typeof f)return null;for(var o=f.split(";"),e=0,s=o.length;e<s;e+=1)if(i=o[e].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&1<=i.length)return i[1];return null},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var n=this;this.$element.on("change.select2",function(){n.dataAdapter.current(function(t){n.trigger("selection:update",{data:t})})});this.$element.on("focus.select2",function(t){n.trigger("focus",t)});this._syncA=i.bind(this._syncAttributes,this);this._syncS=i.bind(this._syncSubtree,this);this._observer=new window.MutationObserver(function(t){n._syncA();n._syncS(t)});this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},u.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerSelectionEvents=function(){var n=this,t=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()});this.selection.on("focus",function(t){n.focus(t)});this.selection.on("*",function(i,r){-1===t.indexOf(i)&&n.trigger(i,r)})},u.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container[0].classList.add("select2-container--open")});this.on("close",function(){n.$container[0].classList.remove("select2-container--open")});this.on("enable",function(){n.$container[0].classList.remove("select2-container--disabled")});this.on("disable",function(){n.$container[0].classList.add("select2-container--disabled")});this.on("blur",function(){n.$container[0].classList.remove("select2-container--focus")});this.on("query",function(t){n.isOpen()||n.trigger("open",{});this.dataAdapter.query(t,function(i){n.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){n.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;n.isOpen()?i===r.ESC||i===r.TAB||i===r.UP&&t.altKey?(n.close(t),t.preventDefault()):i===r.ENTER?(n.trigger("results:select",{}),t.preventDefault()):i===r.SPACE&&t.ctrlKey?(n.trigger("results:toggle",{}),t.preventDefault()):i===r.UP?(n.trigger("results:previous",{}),t.preventDefault()):i===r.DOWN&&(n.trigger("results:next",{}),t.preventDefault()):(i===r.ENTER||i===r.SPACE||i===r.DOWN&&t.altKey)&&(n.open(),t.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._isChangeMutation=function(n){var i=this,t;if(n.addedNodes&&0<n.addedNodes.length){for(t=0;t<n.addedNodes.length;t++)if(n.addedNodes[t].selected)return!0}else{if(n.removedNodes&&0<n.removedNodes.length)return!0;if(Array.isArray(n))return n.some(function(n){return i._isChangeMutation(n)})}return!1},u.prototype._syncSubtree=function(n){var t=this._isChangeMutation(n),i=this;t&&this.dataAdapter.current(function(n){i.trigger("selection:update",{data:n})})},u.prototype.trigger=function(n,t){var r=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"},e,i;if((void 0===t&&(t={}),n in f)&&(e=f[n],i={prevented:!1,name:n,args:t},r.call(this,e,i),i.prevented))return void(t.prevented=!0);r.call(this,n,t)},u.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},u.prototype.close=function(n){this.isOpen()&&this.trigger("close",{originalEvent:n})},u.prototype.isEnabled=function(){return!this.isDisabled()},u.prototype.isDisabled=function(){return this.options.get("disabled")},u.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},u.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},u.prototype.focus=function(){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(n){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');null!=n&&0!==n.length||(n=[!0]);var t=!n[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var n=[];return this.dataAdapter.current(function(t){n=t}),n},u.prototype.val=function(n){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==n||0===n.length)return this.$element.val();var t=n[0];Array.isArray(t)&&(t=t.map(function(n){return n.toString()}));this.$element.val(t).trigger("input").trigger("change")},u.prototype.destroy=function(){this.$container.remove();this._observer.disconnect();this._observer=null;this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex"));this.$element[0].classList.remove("select2-hidden-accessible");this.$element.attr("aria-hidden","false");i.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null},u.prototype.render=function(){var t=n('<span class="select2 select2-container"><span class="selection"><\/span><span class="dropdown-wrapper" aria-hidden="true"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),i.StoreData(t[0],"element",this.$element),t},u}),t.define("jquery-mousewheel",["jquery"],function(n){return n}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(n,t,i,r,u){if(null==n.fn.select2){var f=["open","close","destroy"];n.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var r=n.extend(!0,{},t);new i(n(this),r)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var r,e=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=u.GetData(this,"select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2.");r=n[t].apply(n,e)}),-1<f.indexOf(t)?this:r}}return null==n.fn.select2.defaults&&(n.fn.select2.defaults=r),i}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return n.fn.select2.amd=t,i});$.fn.seleperator=function(){return this.each(function(){$(this).keyup(function(){var n="",t;try{n=parseInt($(this).val().replace(/,/g,""))}catch(i){}isNaN(n)&&(n="");t=postCommanInNumberPlugin(n);$(this).val(t)});$(this).focus(function(){var n="";try{n=parseInt($(this).val().replace(/,/g,""))}catch(t){}isNaN(n)&&(n="");n>0&&$(this).val(postCommanInNumberPlugin(n))});$(this).blur(function(){$(this).val($(this).val().replace(/,/g,""))})})};$.fn.initCaptcha=function(){return this.each(function(){$(this).attr("data-captcha","true");$(this).append("<img  />");$(this).append('<input type="text" name="sCode" placeholder="کد امنیتی" autocomplete="off" />');$(this).append('<input type="hidden" name="sCodeGuid" placeholder="کد امنیتی" />');$(this).append('<span class="fa fa-sync-alt" ><\/span>');$(this)[0].refreshCode=function(){var t=new FormData,n=this;postForm("/Core/BaseData/GenerateCaptch",t,function(t){t&&($(n).find('input[type="hidden"]').val(t),$(n).find('input[type="text"]').val(""),$(n).find("img").attr("src","/Core/BaseData/GetCaptchaImage/"+t))})};$(this)[0].refreshCode();$(this).find("span").click(function(){$(this).closest("[data-captcha]")[0].refreshCode()})})};var allRequestQ=[],allRequestRes=[],allPendingCTRLs=[];allCacheURLs=["/core/basedata/get","/getjsonconfig","/TopMenu/GetTopMenu","/Home/GetAboutUsMainPage","/Home/GetReminderConfig","/Reminder/GetMainPageDescription","/Home/GetOurPrideMainPage","/Home/GetFooterDescrption","/Home/GetFooterInfor","/GetCompanyList","/GetCreateDateList","/Blog/Blog/GetMainBlog","/Home/GetLoginModalConfig","/Home/GetFooterExteraLink","/Home/GetFooterExteraLinkGroup","/Home/GetFooterSambole","/Question/YourQuestion/GetList"];modalZIndex=1006;$.fn.modal=function(n){function t(n){setTimeout(function(){$(n).css("display","none");$(".modal").is(":visible")||$("body").removeClass("modal-open").find(".modal-backdrop").remove()},100);$(n).removeClass("show");$("body").find(".modal-backdrop:last-child").remove()}function i(n){modalZIndex++;$(window).width()>650?$(n).css("cssText","display:block;z-index:"+modalZIndex+"!important"):$(n).css("cssText","display:block;");setTimeout(function(){$(n).addClass("show")},100);$(n).click(function(){$(this).modal("hide")});$(n).find(".modal-dialog").click(function(n){n.stopPropagation();window.closeAllDropdownInPage&&closeAllDropdownInPage()});$(window).width()>650?$("body").addClass("modal-open").append('<div style="z-index:'+(modalZIndex-1)+' !important;" class="modal-backdrop fade show"><\/div>'):$("body").addClass("modal-open").append('<div class="modal-backdrop fade show"><\/div>');setTimeout(function(){$(n).find("input:visible:eq(0)").focus();$(n).find("input:visible:eq(0)").click()},200)}function r(n){$(n).find("[data-dismiss]").unbind().click(function(){$(this).closest(".modal").modal("hide")})}return this.each(function(){var u=this;n=="hide"?t(u):(i(u),r(u))})};canUseSetFocus=!0;$(document).ready(function(){$("body").click(function(){closeAllDropdownInPage()})});$.fn.initMyDropdown=function(){return this.each(function(){var n=$(this)[0];n.openMDD=function(){closeAllDropdownInPage();makeCtrlFocused($(this).find("select"));$(this)[0].actionTimeoutInterval&&clearTimeout($(this)[0].actionTimeoutInterval);var n=$(this).find(".myDropdownItems").attr("id"),t='<div id="'+n+'" class="'+$(this).find(".myDropdownItems").attr("class")+'">'+$(this).find(".myDropdownItems").clone().html()+"<\/div>";$(this).find(".myDropdownItems").remove();$("body").append(t);$("#"+n).width($(this).width()+11);$("#"+n).css("top",$(this).offset().top+$(this).height()+1);$("#"+n).css("left",$(this).offset().left);$(this).addClass("myDropdownMakeVisibleItems");$("#"+n).css("display","block").css("opacity","1").css("z-index","2005");$(this)[0].actionTimeoutInterval=setTimeout(function(){$(this).addClass("myDroppdownShowItem")}.bind(this),10);$(this)[0].bindSelectItemEventMMD()};n.closeMDD=function(){var n=$(this).attr("id"),t;($(this).find("select").val()||makeCtrlBlure($(this).find("select")),$(this)[0].actionTimeoutInterval&&clearTimeout($(this)[0].actionTimeoutInterval),$("#"+n+"_HItems").length!=0)&&($(this).removeClass("myDroppdownShowItem"),$(this)[0].actionTimeoutInterval=setTimeout(function(){$(this).removeClass("myDropdownMakeVisibleItems")}.bind(this),300),n=$(this).attr("id"),t='<div id="'+n+'_HItems" class="'+$("#"+n+"_HItems").attr("class")+'">'+$("#"+n+"_HItems").clone().html()+"<\/div>",$("#"+n+"_HItems").remove(),$(this).append(t),$(this)[0].updateItemFromSelect(),$(this)[0].bindSelectItemEventMMD())};n.updateItemFromSelect=function(){var t=$(this).find("select option"),n;t.length>0&&(n=$(this).find(".myDropdownItems"),n.length>0&&(n.html(""),$(this).find("select option").each(function(){var t=$(this).is(":selected");n.append('<div class="myDropdownItem '+(t?"myDropdownItemSelected":"")+'">'+$(this).html()+"<\/div>");t&&$(this).closest(".myDropdown")[0].setTextMMD($(this).html())}),$(this)[0].bindSelectItemEventMMD()));$(this).find("select").val()?makeCtrlFocused($(this).find("select")):(makeCtrlBlure($(this).find("select")),$(this)[0].setTextMMD())};n.getSelectedIndex=function(){var n=-1,t=$(this).attr("id");return $("#"+t+"_HItems").find(".myDropdownItem").each(function(t){$(this).hasClass("myDropdownItemSelected")&&(n=t)}),n};n.selectOptionByIndex=function(n){if(n>-1){var t=$(this).find("option:eq("+n+")");t.length>0&&($(this).find("select").val(t.val()),$(this).find("select").change())}};n.setTextMMD=function(){var n=$(this).attr("id");$(this).find(".myDropdownText span").html($("#"+n+"_HItems").find(".myDropdownItemSelected").html())};n.bindSelectItemEventMMD=function(){var n=$(this).attr("id");$("#"+n+"_HItems").find(".myDropdownItem").click(function(t){$(this).closest(".myDropdownItems").find(".myDropdownItemSelected").removeClass("myDropdownItemSelected");$(this).addClass("myDropdownItemSelected");$("#"+n)[0].setTextMMD();var i=$("#"+n)[0].getSelectedIndex();i>-1&&$("#"+n)[0].selectOptionByIndex(i);$("#"+n)[0].closeMDD();t.stopPropagation()})};n.bindSelectItemEventMMD();$(n).closest(".myCtrl").find("label").click(function(n){return $(this).closest(".myDropdown")[0].openMDD(),window.isEditModeActive?void 0:(n.preventDefault(),n.stopPropagation(),!1)});$(this).click(function(n){$(this).hasClass("myDropdownMakeVisibleItems")?$(this)[0].closeMDD():$(this)[0].openMDD();window.isEditModeActive||n.stopPropagation()})})};$.fn.initCountDown=function(){return this.each(function(){var n=$(this)[0];n.start=function(){var i;if(!this.isStarted){this.isStarted=!0;var n=Number.parseInt($(this).attr("data-maxNumber")),t=$(this).attr("data-countDownText"),r=$(this).attr("data-finishedCountDownText");$(this).removeClass("countDownNumberFinished");$(this).removeAttr("onClick");i=$(this).attr("data-onClick");this.curNumber=n;$(this).html(t.replace("{ph}",n));this.interValPointer=setInterval(function(){var n=this.curElement.curNumber;n--;n<=0?(clearInterval(this.curElement.interValPointer),$(this.curElement).html(this.cdfText),$(this.curElement).addClass("countDownNumberFinished"),this.curElement.isStarted=!1,$(this.curElement).attr("onClick",this.curOnClickAttr)):($(this.curElement).html(this.cdText.replace("{ph}",n)),this.curElement.curNumber=n)}.bind({curElement:this,maxNumber:n,cdText:t,cdfText:r,curOnClickAttr:i}),1e3)}}})};functionsList=[];isDisinerTryToLoaded=!1;$.fn.addStatusBarToElement=function(n,t,i,r,u){var f=function(){var t='<div class="myPanelToolbar" style=""><i style="'+(r&&r.close=="hide"?"display:none;":"")+'"  class="fa fa-times toolbarCloseButton"><\/i><i class="fa fa-arrows toolBarMaxMin"><\/i>',n,i;if(u&&u.length>0)for(n=0;n<u.length;n++)i=u[n],t+='<i class="fa '+i.icon+' "><\/i>';return t+"<\/div>"};this.each(function(){var o,e;if($(this).addClass("holderMyToolbar"),$(this).append(f(r)),$(this).find(".toolbarCloseButton").click(function(){n&&n();$(this).closest(".holderMyToolbar").remove()}),u&&u.length>0)for(o=0;o<u.length;o++)e=u[o],e.icon&&e.onClick&&$(this).find("."+e.icon).click(function(){this.onClick&&this.onClick()}.bind({onClick:e.onClick}));$(this).find(".toolBarMaxMin").click(function(){if($(this).hasClass("fa-arrows")){if(t){var n=t();if(n)return}$(this).removeClass("fa-arrows").addClass("fa-compress-arrows-alt");$(this).closest(".holderMyToolbar").addClass("myToolbarMakeMaximum")}else i&&i(),$(this).removeClass("fa-compress-arrows-alt").addClass("fa-arrows"),$(this).closest(".holderMyToolbar").removeClass("myToolbarMakeMaximum")})})};isTryLoadingChart=!1;isTryingLoadMapJs=!1;isLoadCkEditorTrying=!1;isUserLogin=!1;$.fn.initLoginButton=function(n,t){return this.each(function(){loadLoginConfigIfNotExist(n,t);$(this).click(function(i){return i.preventDefault(),i.stopPropagation(),$("#"+t).length>0?$("#"+t).modal("show"):($("#swPanelId").length>0&&($("#swPanelId").remove(),$(".onlineChat").length>0&&$(".onlineChat")[0].close()),loadLoginConfigIfNotExist(n,t,!0)),!1})})};$.fn.initResponsiveClickMenu=function(){return $(this).each(function(){$("body").width()<=1100&&$(this).click(function(n){$(this).find(">a>i.moreMenuItems").length>0&&$(this).toggleClass("openThisMenuItem");n.stopPropagation()})})};$.fn.initTopMenuResponsiveButton=function(){function n(){$(".topMenuNew").addClass("topMenuNewActive");$("#headerTagHolder").css("z-index","5")}function t(){$(".topMenuNew").removeClass("topMenuNewActive");$("#headerTagHolder").css("z-index","4")}return $(".topMenuNew li").initResponsiveClickMenu(),this.each(function(){$(this).click(function(){$(this).hasClass("topMenuNewResponsiveButtonActive")?($(this).hasClass("topMenuNewResponsiveButtonActiveInvert")?n():t(),$(this).toggleClass("topMenuNewResponsiveButtonActiveInvert")):($(this).addClass("topMenuNewResponsiveButtonActive"),n())})})};!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof exports?require("jquery"):jQuery)}(function(n){var i,t=navigator.userAgent,u=/iphone/i.test(t),f=/chrome/i.test(t),r=/android/i.test(t);n.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"};n.fn.extend({caret:function(n,t){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof n?(t="number"==typeof t?t:n,this.each(function(){this.setSelectionRange?this.setSelectionRange(n,t):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",n),i.select())})):(this[0].setSelectionRange?(n=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),n=0-i.duplicate().moveStart("character",-1e5),t=n+i.text.length),{begin:n,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,e){var p,l,o,c,h,v,s,a,y;return!t&&this.length>0?(p=n(this[0]),y=p.data(n.mask.dataName),y?y():void 0):(e=n.extend({autoclear:n.mask.autoclear,placeholder:n.mask.placeholder,completed:null},e),l=n.mask.definitions,o=[],c=s=t.length,h=null,n.each(t.split(""),function(n,t){"?"==t?(s--,c=n):l[t]?(o.push(new RegExp(l[t])),null===h&&(h=o.length-1),c>n&&(v=o.length-1)):o.push(null)}),this.trigger("unmask").each(function(){function nt(){if(e.completed){for(var n=h;v>=n;n++)if(o[n]&&p[n]===w(n))return;e.completed.call(y)}}function w(n){return e.placeholder.charAt(n<e.placeholder.length?n:0)}function b(n){for(;++n<s&&!o[n];);return n}function ut(n){for(;--n>=0&&!o[n];);return n}function it(n,t){var r,i;if(!(0>n)){for(r=n,i=b(t);s>r;r++)if(o[r]){if(!(s>i&&o[r].test(p[i])))break;p[r]=p[i];p[i]=w(i);i=b(i)}d();y.caret(Math.max(h,n))}}function ft(n){for(var r,u,t=n,i=w(n);s>t;t++)if(o[t]){if(r=b(t),u=p[t],p[t]=i,!(s>r&&o[r].test(u)))break;i=u}}function et(){var t=y.val(),n=y.caret();if(a&&a.length&&a.length>t.length){for(k(!0);n.begin>0&&!o[n.begin-1];)n.begin--;if(0===n.begin)for(;n.begin<h&&!o[n.begin];)n.begin++;y.caret(n.begin,n.begin)}else{for(k(!0);n.begin<s&&!o[n.begin];)n.begin++;y.caret(n.begin,n.begin)}nt()}function rt(){k();y.val()!=tt&&y.change()}function ot(n){if(!y.prop("readonly")){var f,i,t,r=n.which||n.keyCode;a=y.val();8===r||46===r||u&&127===r?(f=y.caret(),i=f.begin,t=f.end,t-i==0&&(i=46!==r?ut(i):t=b(i-1),t=46===r?b(t):t),g(i,t),it(i,t-1),n.preventDefault()):13===r?rt.call(this,n):27===r&&(y.val(tt),y.caret(0,k()),n.preventDefault())}}function st(t){var u,e,h,f,i,c;y.prop("readonly")||(f=t.which||t.keyCode,i=y.caret(),t.ctrlKey||t.altKey||t.metaKey||32>f||!f||13===f||((i.end-i.begin!=0&&(g(i.begin,i.end),it(i.begin,i.end-1)),u=b(i.begin-1),s>u&&(e=String.fromCharCode(f),o[u].test(e)))&&((ft(u),p[u]=e,d(),h=b(u),r)?(c=function(){n.proxy(n.fn.caret,y,h)()},setTimeout(c,0)):y.caret(h),i.begin<=v&&nt()),t.preventDefault()))}function g(n,t){for(var i=n;t>i&&s>i;i++)o[i]&&(p[i]=w(i))}function d(){y.val(p.join(""))}function k(n){for(var f,r=y.val(),u=-1,t=0,i=0;s>t;t++)if(o[t]){for(p[t]=w(t);i++<r.length;)if(f=r.charAt(i-1),o[t].test(f)){p[t]=f;u=t;break}if(i>r.length){g(t+1,s);break}}else p[t]===r.charAt(i)&&i++,c>t&&(u=t);return n?d():c>u+1?e.autoclear||p.join("")===ht?(y.val()&&y.val(""),g(0,s)):d():(d(),y.val(y.val().substring(0,u+1))),c?t:h}var y=n(this),p=n.map(t.split(""),function(n,t){if("?"!=n)return l[n]?w(t):n}),ht=p.join(""),tt=y.val();y.data(n.mask.dataName,function(){return n.map(p,function(n,t){return o[t]&&n!=w(t)?n:null}).join("")});y.one("unmask",function(){y.off(".mask").removeData(n.mask.dataName)}).on("focus.mask",function(){if(!y.prop("readonly")){clearTimeout(i);var n;tt=y.val();n=k();i=setTimeout(function(){y.get(0)===document.activeElement&&(d(),n==t.replace("?","").length?y.caret(0,n):y.caret(n))},10)}}).on("blur.mask",rt).on("keydown.mask",ot).on("keypress.mask",st).on("input.mask paste.mask",function(){y.prop("readonly")||setTimeout(function(){var n=k(!0);y.caret(n);nt()},0)});f&&r&&y.off("input.mask").on("input.mask",et);k()}))}})});