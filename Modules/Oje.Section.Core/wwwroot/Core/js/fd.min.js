function initDisigner(n){var t,i;n&&(t=$("#"+n.id),t.length>0&&(i=generateDesigner(n),t.html(i),initDisignerEventAndFunction(n,t)))}function generateDesigner(n){return""+`

<div class="formDesigner" >
    <div class="formDesignerPlateTopMenu" >${getTopMenuActions(n)}</div>
    <div class="formDesignerPlateHolders" >
        <div class="formDesignerCtrlHolders" >${getActiveCtrls(n)}</div>
        <div class="formDesignerPlate" >
            <div id="${n.id}_renderPlace" ></div>
        </div>
        <div class="formDesignerCtrlProperties" ></div>
    </div>
</div>

`}function getActiveCtrls(){var n="";return n+='<div class="formDesignerCtrlItem formDesignerCtrlItemDropdown" ><img src="/Modules/Images/dropdown.png" alt="دراپ دان" /><span title ="دراپ دان" >دراپ دان<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemTextBox" ><img src="/Modules/Images/textbox.png" alt="تکس باکس" /><span title ="تکس باکس" >تکس باکس<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemTextBoxArea" ><img src="/Modules/Images/textarea.png" alt="تکس اریا" /><span title ="تکس اریا" >تکس اریا<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemPersianDate" ><img src="/Modules/Images/datetime.png" alt="تقویم فارسی" /><span title ="تقویم فارسی" >تقویم فارسی<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemPassword" ><img src="/Modules/Images/password.png" alt="کلمه عبور" /><span title ="کلمه عبور" >کلمه عبور<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemColor" ><img src="/Modules/Images/color.png" alt="رنگ" /><span title ="رنگ" >رنگ<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemRadioBox" ><img src="/Modules/Images/radio.png" alt="ردیو باکس" /><span title ="ردیو باکس" >ردیو باکس<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemCheckBox" ><img src="/Modules/Images/checkbox.png" alt="چک باکس" /><span title ="چک باکس" >چک باکس<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemUploadFile" ><img src="/Modules/Images/fileupload.png" alt="فایل" /><span title ="فایل" >فایل<\/span><\/div>',n+='<div class="formDesignerCtrlItem formDesignerCtrlItemMultiRow" ><img src="/Modules/Images/groupCtrl.png" alt="چند سطر" /><span title ="چند سطر" >چند سطر<\/span><\/div>',n+'<div class="formDesignerCtrlItem formDesignerCtrlItemMap" ><img src="/Modules/Images/map.png" alt="نقشه" /><span title ="نقشه" >نقشه<\/span><\/div>'}function getTopMenuActions(){var n="";return n+='<div class="formDesignerPlateTopMenuItem formDesignerPlateTopMenuNew fa fa-plus-circle" style="color:red;" title="جدید" ><\/div>',n+='<div class="formDesignerPlateTopMenuItem formDesignerPlateTopMenuExport fa fa-download" title="خروجی" ><\/div>',n+='<div class="formDesignerPlateTopMenuItem formDesignerPlateTopMenuImport fa fa-upload" title="ورودی" ><\/div>',n+='<div class="formDesignerPlateTopMenuItem formDesignerPlateTopMenuUndo fa fa-undo" title="قبلی" ><\/div>',n+='<div class="formDesignerPlateTopMenuItem formDesignerPlateTopMenuRedo fa fa-redo" title="بعدی" ><\/div>',n+='<div class="formDesignerPlateTopMenuItem formDesignerPlateTopMenuInfo fa fa-info" title="خصوصیات" ><\/div>',n+='<div class="formDesignerPlateTopMenuItem formDesignerPlateTopMenuDelete fa fa-trash" title="حذف" ><\/div>',n+'<div class="formDesignerPlateTopMenuItem formDesignerPlateTopMenuSelectElement fa fa-mouse-pointer" title="انتخاب" ><\/div>'}function initDisignerEventAndFunction(n,t){var i=t[0];i.ctrl=n;initReNewFunction(i,t);initSelectElementFunction(i,t);initShowCtrlInfoMenu(i,t);initDeleteButtonMenu(i,t);initGetSelectedCtrlJsonObj(i);initMouseEvents(n,t);i.reNew()}function initGetSelectedCtrlJsonObj(n){n.getSelectedCtrl=function(){var n=$(this).find(".makeSelectedDP");return n.length>0&&n.hasClass("myPanel")?n[0].panel:n.length>0&&n.hasClass("panelSWizard")?n[0].wizard:n.length>0&&n.find(".myCtrl").length>0?n.find(".myCtrl")[0].ctrl:null}}function initDeleteButtonMenu(n,t){n.deleteSelectedItem=function(){var n=this.getSelectedCtrl();if(!n){$.toast({heading:"خطا",text:"لطفا ابتدا یک کنترول را انتخاب کنید",textAlign:"right",position:"bottom-right",showHideTransition:"slide",icon:"error"});return}$(".makeSelectedDP").find(">.myCtrl ").length>0?$(".makeSelectedDP").remove():$.toast({heading:"خطا",text:"امکان حذف وجود ندارد",textAlign:"right",position:"bottom-right",showHideTransition:"slide",icon:"error"})};t.find(".formDesignerPlateTopMenuDelete").click(function(){$(this).closest(".myFormDesigner")[0].deleteSelectedItem()})}function initShowCtrlInfoMenu(n,t){n.showSpecMenue=function(){var n=this.getSelectedCtrl();if(!n){$.toast({heading:"خطا",text:"لطفا ابتدا یک کنترول را انتخاب کنید",textAlign:"right",position:"bottom-right",showHideTransition:"slide",icon:"error"});return}bindSpecPanelInputs(this,n)};t.find(".formDesignerPlateTopMenuInfo").click(function(){$(this).closest(".myFormDesigner")[0].showSpecMenue()})}function initSelectElementFunction(n,t){n.togleSelectE=function(){var n=$(this).find(".formDesignerPlateTopMenuSelectElement");n.toggleClass("formDesignerPlateTopMenuSelectElementSelected");$(this)[0].isSelectedElement=n.hasClass("formDesignerPlateTopMenuSelectElementSelected");isEditModeActive=n.hasClass("formDesignerPlateTopMenuSelectElementSelected")};n.offSelecteE=function(){var n=$(this).find(".formDesignerPlateTopMenuSelectElement");n.removeClass("formDesignerPlateTopMenuSelectElementSelected");$(this)[0].isSelectedElement=n.hasClass("formDesignerPlateTopMenuSelectElementSelected");isEditModeActive=!1};t.find(".formDesignerPlateTopMenuSelectElement").click(function(){$(this).closest(".myFormDesigner")[0].togleSelectE()})}function initReNewFunction(n,t){n.reNew=function(){var n=this.ctrl;n&&n.baseConfig&&($("#"+n.id+"_renderPlace").html(""),generateForm(JSON.parse(JSON.stringify(n.baseConfig)),n.id+"_renderPlace"))};t.find(".formDesignerPlateTopMenuNew").click(function(){$(this).closest(".myFormDesigner")[0].reNew()})}function initMouseEvents(n,t){t.mousedown(function(n){n.which==1&&n&&n.target&&$(n.target).closest(".formDesignerCtrlItem").length>0&&createMouseCtrlShadow($(n.target).closest(".formDesignerCtrlItem"),t,n)});t.mouseup(function(n){n.which==1&&curMouseMove&&curMouseMove.length>0&&(addNewCtrlToDesigner(curMouseMove,n,this.quirySelector),curMouseMove.remove(),curMouseMove=null)}.bind({quirySelector:t}));t.mousemove(function(n){curMouseMove?(curMouseMove.css("left",n.clientX+10+"px"),curMouseMove.css("top",n.clientY-10+"px"),markeCurrentActiveCtrl(n,this.quirySelector)):this.quirySelector[0].isSelectedElement?markeCurrentActiveCtrl(n,this.quirySelector,this.quirySelector[0].isSelectedElement):whatToDoAfterSecoundSelect!=null&&markeCurrentActiveCtrl2(n,t)}.bind({quirySelector:t}))}function isSelectable(n,t){return n.hasClass("col-xs-12")&&n.parent()&&n.parent().hasClass("row")&&n.closest(".myPanel").length>0&&!n.hasClass("myPanel")?n:n.closest(".myCtrl").length>0?n.closest(".myCtrl").parent():t&&(n.hasClass("panelSWizard")||n.closest(".panelSWizard").length>0)?n.hasClass("panelSWizard")?n:n.closest(".panelSWizard"):t&&n.hasClass("myPanel")&&n.find(">.panelSWizard").length>0||n.parent().hasClass("myPanel")&&n.parent().find(">.panelSWizard").length>0?n.hasClass("myPanel")?n:n.parent():null}function removeAllMarked2(n){n.find('span[class*="makeSelectedFDP"]').remove();n.find(".makeSelectedFDP").removeClass("makeSelectedFDP").unbind()}function markeCurrentActiveCtrl2(n,t){if(removeAllMarked2(t),n&&n.target&&$(n.target).closest(".formDesignerPlate").length>0){var i=$(n.target),r=isSelectable(i);r&&(i=r,i.hasClass("makeSelectedFDP")||(i.addClass("makeSelectedFDP"),i.append('<span class="makeSelectedFDPLeftBottom"><\/span>'),i.append('<span class="makeSelectedFDPLeftTop"><\/span>'),i.append('<span class="makeSelectedFDPRightBottom"><\/span>'),i.append('<span class="makeSelectedFDPRightTop"><\/span>'),i.click(function(){whatToDoAfterSecoundSelect(i);whatToDoAfterSecoundSelect=null;removeAllMarked2(t)})))}}function removeAllMarked(n){n.find('span[class*="makeSelectedDP"]').remove();n.find(".makeSelectedDP").removeClass("makeSelectedDP").unbind()}function markeCurrentActiveCtrl(n,t,i){if(removeAllMarked(t),n&&n.target&&$(n.target).closest(".formDesignerPlate").length>0){var r=$(n.target),u=isSelectable(r,i);u&&(r=u,r.hasClass("makeSelectedDP")||(r.addClass("makeSelectedDP"),r.append('<span class="makeSelectedDPLeftBottom"><\/span>'),r.append('<span class="makeSelectedDPLeftTop"><\/span>'),r.append('<span class="makeSelectedDPRightBottom"><\/span>'),r.append('<span class="makeSelectedDPRightTop"><\/span>'),r.click(function(){$(this).closest(".myFormDesigner")[0].offSelecteE()})))}}function createMouseCtrlShadow(n,t,i){var r=uuidv4RemoveDash(),u='<div id="'+r+'" class="'+n.attr("class")+' formDesignerCtrlItemMovable">'+n.html()+"<\/div>";t.append(u);curMouseMove=$("#"+r);curMouseMove.css("left",i.clientX+10+"px");curMouseMove.css("top",i.clientY-10+"px");i.preventDefault()}function addNewCtrlToDesigner(n,t,i){var r,f,u;if(t&&t.target&&$(t.target).closest(".formDesignerPlate").length>0&&(r=$(t.target),f=isSelectable(r),f)){r=f;var o=!1,s=r.width()/2,e=t.offsetX;$(t.target).hasClass("col-xs-12")||(e=e+t.target.offsetLeft);e<=s&&(o=!0);u=getCurCtrlTemplate(n,r);u&&(o==!0?r.after(u):r.before(u),executeArrFunctions(),removeAllMarked(i))}}function generateRandomName(){return"name_"+(new Date).getTime()}function getCurCtrlTemplate(n,t){var i="",r=null,e,u,f;return n.hasClass("formDesignerCtrlItemDropdown")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-4 col-sm-6 col-xs-12 col-lg-3",name:generateRandomName(),type:"dropDown",label:"نوع سازه",isRequired:!0,textfield:"title",valuefield:"id",values:[{id:"",title:""},{id:"بتونی",title:"بتونی"}]},i+='<div class="col-md-4 col-sm-6 col-xs-12 col-lg-3">',i+=getDropdownCTRLTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemTextBox")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-4 col-sm-6 col-xs-12 col-lg-3",name:generateRandomName(),type:"text",label:"عنوان",isRequired:!0},i+='<div class="col-md-4 col-sm-6 col-xs-12 col-lg-3">',i+=getTextBoxTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemPersianDate")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-4 col-sm-6 col-xs-12 col-lg-3",name:generateRandomName(),type:"persianDateTime",label:"تاریخ تولید",isRequired:!0},i+='<div class="col-md-4 col-sm-6 col-xs-12 col-lg-3">',i+=getTextBoxTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemColor")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-4 col-sm-6 col-xs-12 col-lg-3",name:generateRandomName(),type:"color",label:"رنگ بدنه خودرو",isRequired:!0,dfaultValue:"#ffffff"},i+='<div class="col-md-4 col-sm-6 col-xs-12 col-lg-3">',i+=getTextBoxTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemTextBoxArea")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",name:generateRandomName(),type:"textarea",label:"عنوان",isRequired:!0},i+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',i+=getTextAreaTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemPassword")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-4 col-sm-6 col-xs-12 col-lg-3",name:generateRandomName(),type:"password",label:"کلمه عبور",isRequired:!0},i+='<div class="col-md-4 col-sm-6 col-xs-12 col-lg-3">',i+=getTextBoxTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemUploadFile")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-4 col-sm-6 col-xs-12 col-lg-3",name:generateRandomName(),type:"file",label:"عنوان",isRequired:!0,acceptEx:".jpg,.png,.jpeg"},i+='<div class="col-md-4 col-sm-6 col-xs-12 col-lg-3">',i+=getFileCTRLTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemCheckBox")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-4 col-sm-6 col-xs-12 col-lg-3",name:generateRandomName(),type:"checkBox",label:"عنوان",isRequired:!0},i+='<div class="col-md-4 col-sm-6 col-xs-12 col-lg-3">',i+=getCheckboxButtonTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemRadioBox")?(r={id:uuidv4RemoveDash(),parentCL:"col-md-4 col-sm-6 col-xs-12 col-lg-3",name:generateRandomName(),type:"radio",textfield:"title",valuefield:"id",label:"عنوان",values:[{id:"خیر",title:"خیر"},{id:"بلی",title:"بلی"}]},i+='<div class="col-md-4 col-sm-6 col-xs-12 col-lg-3">',i+=getRadioButtonTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemMap")?(e="mapName"+uuidv4RemoveDash(),r={id:uuidv4RemoveDash(),parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",names:{lat:e+"Lat",lon:e+"Lon",zoom:e+"Zoom"},width:"100%",height:"312px",type:"map",label:"نقشه"},i+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',i+=getMapTemplate(r),i+="<\/div>"):n.hasClass("formDesignerCtrlItemMultiRow")&&(r={id:uuidv4RemoveDash(),parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",type:"multiRowInput",name:"coverPersons",ctrls:[{id:uuidv4RemoveDash(),parentCL:"col-md-3 col-sm-6 col-xs-12 col-lg-3",name:"firstName",type:"text",label:"نام",isRequired:!0},{id:uuidv4RemoveDash(),parentCL:"col-md-3 col-sm-6 col-xs-12 col-lg-3",name:"lastName",type:"text",label:"نام خانوادگی",isRequired:!0},{id:uuidv4RemoveDash(),parentCL:"col-md-3 col-sm-6 col-xs-12 col-lg-3",name:"nationalCode",type:"text",label:"کد ملی",isRequired:!0,nationalCodeValidation:!0},{id:uuidv4RemoveDash(),parentCL:"col-md-3 col-sm-6 col-xs-12 col-lg-3",type:"dropDown",textfield:"title",valuefield:"id",label:"نصبت با بیمه شده",name:"typeOfRelation",isRequired:!0,values:[{id:"",title:""},{id:"خودم",title:"خودم"},{id:"همسرم",title:"همسرم"},{id:"پدر",title:"پدر"},{id:"مادر",title:"مادر"},{id:"فرزند",title:"فرزند"},{id:"نوه",title:"نوه"}]}]},i+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',i+=getMultiRowInputTemplate(r),i+="<\/div>"),t.closest(".MultiRowInputRow").length>0&&(u=t.closest(".myCtrl")[0],console.log(),u&&(u=u.ctrl,u&&(f=u.ctrls,f&&f.length!=0||(f=[]),f.push(r),u.ctrls=f))),i}function bindSpecPanelInputs(n,t){var r=$(n).find(".formDesignerCtrlProperties"),i="";if(i+='<div class="propertyTitle" ><span class="propertyCloseButton fa fa-times" ><\/span>خصوصیات<\/div>',i+='<div style="padding-top:15px;" class="row">',i+=getIdInput(t),i+=getClassInput(t),t.type)switch(t.type){case"text":case"textarea":case"number":i+=getLabelInput(t);i+=getNameInput(t);i+=getSizeInput(t);i+=getDefaultInput(t);i+=getChangeDirectionTemplate(t);i+=getValidationInput(t);i+=getMaskTemplate(t);i+=getDisabledInput(t);i+=getMultiOrSumPlayInputTemplate(t,"multiPlay","ضرب خودکار");i+=getMultiOrSumPlayInputTemplate(t,"sumCalculator","جمع خودکار");break;case"persianDateTime":i+=getLabelInput(t);i+=getNameInput(t);i+=getSizeInput(t);i+=getMinDayInput(t);i+=getMaxDayInput(t);i+=getDefaultInput(t);i+=getRequiredValidation(t);break;case"color":i+=getLabelInput(t);i+=getNameInput(t);i+=getSizeInput(t);i+=getDefaultInput(t);i+=getRequiredValidation(t);break;case"password":i+=getLabelInput(t);i+=getNameInput(t);i+=getSizeInput(t);i+=getRequiredValidation(t);break;case"map":i+=getLabelInput(t);i+=getMapNameInput(t);i+=getSizeInput(t);i+=getWidthInput(t);i+=getHeightInput(t);break;case"dropDown":i+=getLabelInput(t);i+=getNameInput(t);i+=getSizeInput(t);i+=getShowCondationInputTemplate(t);i+=getSourceUrlTemplate(t);i+=getTextAndValueSchemaFields(t);i+=getRequiredValidation(t);i+=getValuesTemplate(t);break;case"radio":i+=getLabelInput(t);i+=getNameInput(t);i+=getSizeInput(t);i+=getShowCondationInputTemplate(t);i+=getTextAndValueSchemaFields(t);i+=getValuesTemplate(t);break;case"checkBox":i+=getLabelInput(t);i+=getNameInput(t);i+=getSizeInput(t);i+=getRequiredValidation(t);break;case"multiRowInput":i+=getNameInput(t);i+=getAddButtonInput(t);i+=getDeleteInput(t);i+=getSizeInput(t);break;case"file":i+=getLabelInput(t);i+=getNameInput(t);i+=getSizeInput(t);i+=getValidExtensionTemplate(t,r);i+=getPreviewImageTemplate(t);i+=getRequiredValidation(t)}else $("#"+t.id).hasClass("panelSWizard")?(i+=getLastButtonSWTitleTemplate(t),i+=getMoveBackButtonToTop(t),i+=getStepInputTemplate(t)):$("#"+t.id).hasClass("myPanel")&&(i+=getTitleInput(t),i+=getIsInquiryInput(t),i+=getIsAgentRequired(t),i+=getIsCompanyListRequired(t));i+=getSaveButtonTemplate();i+="<\/div>";r.html(i);r.closest(".myFormDesigner").addClass("formDesignerCtrlPropertiesShow");r.find(".propertyCloseButton").click(function(){$(this).closest(".formDesignerCtrlPropertiesShow").removeClass("formDesignerCtrlPropertiesShow");whatToDoAfterSecoundSelect=null});executeArrFunctions()}function fillFoundObj(n,t,i){var c,y,h,s,r,e,l,v,f,a,o,p,u;if(n.parentCL=t.size,n.textfield=t.textfield,n.valuefield=t.valuefield,n.mask=t.mask,n.ltr=t.ltr,n.label=t.inputLabel,n.name=t.inputName,n.lastStepButtonTitle=t.lastStepButtonTitle,n.isRequired=t.isRequired,n.dataurl=t.dataurl,n.disabled=t.disabled,n.maxLengh=t.maxLength,n.class=t.class,n.moveBackButtonToTop=t.moveBackButtonToTop,n.id=t.id,n.hideImagePreview=t.hideImagePreview,n.dfaultValue=t.dfaultValue,n.title=t.title,n.hasInquiry=t.hasInquiry,n.isAgentRequired=t.isAgentRequired,n.isCompanyListRequired=t.isCompanyListRequired,n.multiPlay=t.multiPlay,n.sumCalculator=t.sumCalculator,n.deleteTitle=t.deleteTitle,n.addTitle=t.addTitle,n.minDateValidation=Number.parseInt(t.minDateValidation),n.maxDateValidation=Number.parseInt(t.maxDateValidation),n.width=t.width,n.height=t.height,addOrRemoveOnlyValidationOnlyNumber(n,t.justNumber),addOrRemoveOnlyValidationNumberCount(n,t.numberLength),addOrRemoveValidationStartWith(n,t.startWithN),addOrRemoveValidationEmail(n,t.email),n.type=="number"&&(n.type="text"),n.names=null,t.mapName&&(n.names={lat:t.mapName+"Lat",lon:t.mapName+'Lon"',zoom:t.mapName+"Zoom"}),n.acceptEx=null,t.acceptEx)if(n.acceptEx="",t.acceptEx.constructor==Array)for(r=0;r<t.acceptEx.length;r++)n.acceptEx=n.acceptEx+(r>0?",":"")+t.acceptEx[r];else n.acceptEx=t.acceptEx;if(n.nationalCodeValidation=t.codeMeli?!0:null,t.values&&(c=JSON.parse(t.values),c&&c.length>0&&(n.values=c)),n.showHideCondation=null,i.find(".showCondationHolder").length>0&&(y=i.find(".showCondationHolder"),h=[],y.find(".condationItem").each(function(){var i=$(this).find(".condationItemTitle"),r=i.attr("data-id"),u=i.hasClass(".condationItemTitleDefault"),n=[],t=[];$(this).find(".condationSubItemHide").each(function(){n.push($(this).attr("data-tclass"))});$(this).find(".condationSubItemShow").each(function(){t.push($(this).attr("data-tclass"))});(n.length>0||t.length>0)&&h.push({value:r,classHide:n,classShow:t,isDefault:u})}),h&&h.length>0&&(n.showHideCondation=h)),s=$("#"+t.id),!t.type&&s.length>0&&s.hasClass("panelSWizard")){if(n.steps=[],t.steps){for(r=0;r<t.steps.length;r++)e=t.steps[r],e.order=Number.parseFloat(e.order),l=e.ctrls,l||(l="[]"),e.panels=[],e.panels.push({ctrls:JSON.parse(l)}),delete e.ctrls;n.steps=t.steps}}else if(!t.type&&s.length>0&&s.hasClass("myPanel")&&(v=s.find(".panelSWizard"),n.stepWizards=[],v.length>0)){if(f=v[0].wizard,f&&f.steps&&f.steps.length>0)for(a=0;a<f.steps.length;a++)o=f.steps[a],p=getCtrls($("#stepContent_"+o.id)),o.panels&&o.panels.length!=0||(o.panels=[],o.panels.push({})),o.panels[0].ctrls=p;f&&n.stepWizards.push(f)}for(u in n)(n[u]==undefined||n[u]==null||n[u]=="")&&delete n[u],n[u]=="true"&&(n[u]=!0),n[u]=="false"&&(n[u]=!1);console.log(n,t)}function saveSelectedController(n){var t=$(n).closest(".myFormDesigner"),i,r;if(t.length>0&&(i=t[0].getSelectedCtrl(),i)){var f=$(n).closest(".formDesignerCtrlProperties"),e=getFormData(f),u=convertFormDataToJson(e);fillFoundObj(i,u,f);t.find(".makeSelectedDP").length>0&&(r=$("#"+u.id),!u.type&&r.length>0&&r.hasClass("myPanel")?t.find(".makeSelectedDP").replaceWith(getPanelTemplate(i)):!u.type&&r.length>0&&r.hasClass("panelSWizard")?t.find(".makeSelectedDP").replaceWith(getStepWizardTemplate(i)):t.find(".makeSelectedDP").replaceWith(getInputTemplate(i)),executeArrFunctions(),$(n).closest(".formDesignerCtrlProperties").find(".propertyCloseButton").click())}}function addOrRemoveValidationEmail(n,t){if(n.validations||(n.validations=[]),t){var i=n.validations.filter(function(n){return n.reg=="^\\S+@\\S+\\.\\S+$"});i&&i.length!=0?(i[0].reg="^\\S+@\\S+\\.\\S+$",i[0].msg="ایمیل وارد شده صحیح نمی باشد"):n.validations.push({reg:"^\\S+@\\S+\\.\\S+$",msg:"ایمیل وارد شده صحیح نمی باشد"})}else n.validations=n.validations.filter(function(n){return n.reg!="^\\S+@\\S+\\.\\S+$"})}function addOrRemoveValidationStartWith(n,t){if(n.validations||(n.validations=[]),t){var i=n.validations.filter(function(n){return/\^\([\w]+\)/.test(n.reg)});i&&i.length!=0?(i[0].reg="^("+t+")",i[0].msg=n.label+" باید با "+t+" آغاز شود"):n.validations.push({reg:"^("+t+")",msg:n.label+" باید با "+t+" آغاز شود"})}else n.validations=n.validations.filter(function(n){return!/\^\([\w]+\)/.test(n.reg)})}function addOrRemoveOnlyValidationNumberCount(n,t){if(n.validations||(n.validations=[]),t){var i=n.validations.filter(function(n){return n.reg.indexOf("^([0-9]){")==0});i&&i.length!=0?(i[0].reg="^([0-9]){"+t+"}$",i[0].msg=n.label+"باید "+t+" عدد باشد"):n.validations.push({reg:"^([0-9]){"+t+"}$",msg:n.label+"باید "+t+" عدد باشد"})}else n.validations=n.validations.filter(function(n){return n.reg.indexOf("^([0-9]){")==-1})}function addOrRemoveOnlyValidationOnlyNumber(n,t){if(n.validations||(n.validations=[]),t=="true"){var i=n.validations.filter(function(n){return n.reg=="^[0-9]*$"});i&&i.length!=0||n.validations.push({reg:"^[0-9]*$",msg:"لطفا فقط عدد وارد کنید"})}else n.validations=n.validations.filter(function(n){return n.reg!="^[0-9]*$"})}function getTextAndValueSchemaFields(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getTextBoxTemplate({name:"textfield",type:"text",label:"عنوان اسکیما",dfaultValue:n.textfield}),t+="<\/div>",t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getTextBoxTemplate({name:"valuefield",type:"text",label:"شناسه اسکیما",dfaultValue:n.valuefield}),t+"<\/div>"}function getSaveButtonTemplate(){var n='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return n+=getButtonTemplateWidthLabel({"class":"btn-primary btn-block",type:"button",title:"ذخیره",onClick:"saveSelectedController(this)"}),n+"<\/div>"}function getDisabledInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"disabled",type:"checkBox",label:"غیر فعال؟",dfaultValue:n.disabled}),t+"<\/div>"}function getMultiOrSumPlayInputTemplate(n,t,i){var r="",u=n[t],f,e;for(u||(u=[]),r+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12 sumOrMultiplyHolder">',r+='<div style="margin-bottom:10px;" class="sumOrMultiplyHeader" >'+i+"<i onclick=\"return addCtrlToSumOrMultiply(this, event, '"+t+'\')" class="fa fa-plus addCtrlToShowCondationButtonShow" ><\/i><\/div>',f=0;f<u.length;f++)r+='<div class="sumOrMultiplyItem sumOrMultiplyItemShow" >',console.log($("#"+u[f]).closest(".myCtrl").length),e=$("#"+u[f]).closest(".myCtrl").find("label").text(),r+="<span>"+(e?e:"خالی")+'<i class="fa fa-trash deleteSumOrMultiplyCB" onclick="removeThisMItem(this)" ><\/i><input type="hidden" name="'+t+'" value="'+u[f]+'" /><\/span>',r+="<\/div>";return r+"<\/div>"}function removeThisMItem(n){n&&$(n).closest(".sumOrMultiplyItem").remove()}function addCtrlToSumOrMultiply(n,t,i){if(t.stopPropagation(),n){var r=$(n);r.hasClass("fa-plus")?(r.removeClass("fa-plus").addClass("fa-ban"),$(n).closest(".formDesigner").addClass("makeShowAllHideCtrl"),whatToDoAfterSecoundSelect=function(n){var e=$(n).find(".myCtrl")[0].ctrl,t="",f,r,u;$(n).find("input").length>0?t=$(n).find("input").attr("id"):$(n).find("select").length>0&&(t=$(n).find("select").attr("id"));t||(t=uuidv4RemoveDash(),$(n).find("input").length>0?$(n).find("input").attr("id",t):$(n).find("select").length>0&&$(n).find("select").attr("id",t),e.id=t);f=$(this.curButton).closest(".sumOrMultiplyHolder");r=$(n).text();r||(r="خالی");u="";u+='<div class="sumOrMultiplyItem sumOrMultiplyItemShow" >';u+="<span>"+(r?r:"خالی")+'<i class="fa fa-trash deleteSumOrMultiplyCB" onclick="removeThisMItem(this)" ><\/i><input type="hidden" name="'+i+'" value="'+t+'" /><\/span>';u+="<\/div>";f.append(u);$(this.curButton).removeClass("fa-ban").addClass("fa-plus");$(this.curButton).closest(".formDesigner").removeClass("makeShowAllHideCtrl")}.bind({curButton:n})):(r.removeClass("fa-ban").addClass("fa-plus"),$(n).closest(".formDesigner").removeClass("makeShowAllHideCtrl"),whatToDoAfterSecoundSelect=null)}return!1}function getShowCondationInputTemplate(n){var r="",u=[],e=n.showHideCondation,f,t,i;if(e||(e=[]),n.type=="dropDown"&&n.id&&$("#"+n.id).find("option").each(function(){u.push({id:$(this).attr("value"),title:$(this).text()})}),u.length==0&&n.values&&n.values.length>0&&(u=n.values),r+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12 showCondationHolder">',r+='<div class="showCondationHeader" >مخفی یا نمایش<\/div>',u.length==0)r+="<div>فاقد مقدار<\/div>";else for(f=0;f<u.length;f++){if(t=e.filter(function(n){return n.value==u[f].id}),t=t.length>0?t[0]:null,r+='<div class="condationItem" >',r+='<span onclick="setDefaultShowCondation(this)" class="condationItemTitle '+(t&&t.isDefault?"condationItemTitleDefault":"")+'" data-id="'+u[f].id+'" >'+(u[f].title?u[f].title:"خالی")+'<i onclick="return addCtrlToShowCondation(this, event)" class="fa fa-plus addCtrlToShowCondationButtonHide" ><\/i><i onclick="return addCtrlToShowCondation(this, event)" class="fa fa-plus addCtrlToShowCondationButtonShow" ><\/i><\/span>',t){if(t.classShow&&t.classShow.length>0)for(i=0;i<t.classShow.length;i++)$("."+t.classShow[i]).each(function(){r+='<span title="'+t.classShow[i]+'" data-tClass="'+t.classShow[i]+'" class="condationSubItem condationSubItemShow">'+$(this).find("label").text()+'<i class="fa fa-trash deleteShowCondationCB" onclick="removeThisClass(this)" ><\/i><\/span>'});if(t.classHide&&t.classHide.length>0)for(i=0;i<t.classHide.length;i++)$("."+t.classHide[i]).each(function(){r+='<span title="'+t.classHide[i]+'" data-tClass="'+t.classHide[i]+'" class="condationSubItem condationSubItemHide">'+$(this).find("label").text()+'<i class="fa fa-trash deleteShowCondationCB" onclick="removeThisClass(this)" ><\/i><\/span>'})}r+="<\/div>"}return r+='<div class="simpleBorder" ><\/div>',r+="<\/div>"}function addCtrlToShowCondation(n,t){if(t.stopPropagation(),n){var i=$(n),r=i.hasClass("addCtrlToShowCondationButtonShow");i.hasClass("fa-plus")?(i.removeClass("fa-plus").addClass("fa-ban"),$(n).closest(".formDesigner").addClass("makeShowAllHideCtrl"),whatToDoAfterSecoundSelect=function(n){var i=$(n).find(".myCtrl")[0].ctrl,r=[],u,f;i.class&&(r=i.class.split(" "));r=r.filter(function(n){return n&&n.trim()});u=r.filter(function(n){return n&&n.substr(0,14)=="showHideClass_"});u.length==0&&(f="showHideClass_"+uuidv4RemoveDash(),i.class=i.class+" "+f,$(n).find(".myCtrl").addClass(f),u.push(f));var t=u[0],e=$(this.curButton).closest(".condationItem"),o=this.isShow;$("."+t).each(function(){o?e.append('<span title="'+t+'" data-tClass="'+t+'" class="condationSubItem condationSubItemShow">'+$(this).find("label").text()+'<i class="fa fa-trash deleteShowCondationCB" onclick="removeThisClass(this)" ><\/i><\/span>'):e.append('<span title="'+t+'" data-tClass="'+t+'" class="condationSubItem condationSubItemHide">'+$(this).find("label").text()+'<i class="fa fa-trash deleteShowCondationCB" onclick="removeThisClass(this)" ><\/i><\/span>')});$(this.curButton).removeClass("fa-ban").addClass("fa-plus");$(this.curButton).closest(".formDesigner").removeClass("makeShowAllHideCtrl")}.bind({curButton:n,isShow:r})):(i.removeClass("fa-ban").addClass("fa-plus"),$(n).closest(".formDesigner").removeClass("makeShowAllHideCtrl"),whatToDoAfterSecoundSelect=null)}return!1}function setDefaultShowCondation(n){n&&!$(n).hasClass("condationItemTitleDefault")&&($(n).closest(".showCondationHolder").find(".condationItemTitleDefault").removeClass("condationItemTitleDefault"),$(n).addClass("condationItemTitleDefault"))}function removeThisClass(n){if(n){var t=$(n).closest(".condationSubItem"),r=t.hasClass("condationSubItemShow"),i=t.attr("data-tClass");i&&(r?t.closest(".condationItem").find('.condationSubItemShow[data-tClass="'+i+'"]').remove():t.closest(".condationItem").find('.condationSubItemHide[data-tClass="'+i+'"]').remove())}}function getLastButtonSWTitleTemplate(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"lastStepButtonTitle",type:"text",label:"عنوان دکمه ذخیره",dfaultValue:n.lastStepButtonTitle}),t+"<\/div>"}function getLabelInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"inputLabel",type:"text",label:"عنوان",dfaultValue:n.label}),t+"<\/div>"}function getMinDayInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"minDateValidation",type:"number",label:"حداق روز",dfaultValue:n.minDateValidation}),t+"<\/div>"}function getMaxDayInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"maxDateValidation",type:"text",label:"حداکثر روز",dfaultValue:n.maxDateValidation}),t+"<\/div>"}function getTitleInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"title",type:"text",label:"عنوان",dfaultValue:n.title}),t+"<\/div>"}function getIdInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"id",type:"text",label:"شناسه",dfaultValue:n.id}),t+"<\/div>"}function getClassInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"class",type:"text",label:"کلاس",dfaultValue:n.class}),t+"<\/div>"}function getChangeDirectionTemplate(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"ltr",type:"checkBox",label:"چپ به راست ؟",dfaultValue:n.ltr}),t+"<\/div>"}function getPreviewImageTemplate(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"hideImagePreview",type:"checkBox",label:"مخفی پیش نمایش ؟",dfaultValue:n.hideImagePreview}),t+"<\/div>"}function getCtrls(n){var t=[];return n&&n.length>0&&n.find(".myCtrl").each(function(){if($(this).closest(".MultiRowInputRow").length==0){var n=$(this)[0].ctrl;n&&t.push(n)}}),t}function getStepInputTemplate(n){var t="",r,i,u;if(t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+='<div style="border-bottom:1px solid silver;margin-bottom:20px;color:red;" >کلیه استب ها <i onclick="addNewStepFD(this)" class="fa fa-plus addNewStepButton" ><\/i><\/div>',t+="<\/div>",t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12 ">',t+='<div class="row holderAllStepsProperty">',n&&n.steps)for(r=n.steps.sort(function(n,t){return n.order-t.order}),i=0;i<r.length;i++)u=r[i],t+=getStepInputTemplateItem(u,i);return t+="<\/div>",t+"<\/div>"}function getStepInputTemplateItem(n,t,i){var r="";return r+='<div data-index="'+t+'" class="fdStepItem col-md-12 col-sm-12 col-xs-12 col-lg-12">',r+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',r+='<div style="border-bottom:1px solid silver;margin-bottom:20px;" ><span  class="stepHeaderPInfo" >استپ شماره '+(t+1)+'<\/span><i onclick="removeThisStep(this)" class="fa fa-trash deleteStepButton"><\/i><\/div>',r+=getTextBoxTemplate({name:"steps["+t+"].id",type:"text",label:"شناسه",dfaultValue:n.id}),r+="<\/div>",r+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',r+=getTextBoxTemplate({name:"steps["+t+"].order",type:"number",label:"ترتیب",dfaultValue:n.order}),r+="<\/div>",r+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',r+=getTextBoxTemplate({name:"steps["+t+"].title",type:"text",label:"عنوان",dfaultValue:n.title}),r+="<\/div>",r+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',r+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"steps["+t+"].hideMoveNextButton",type:"checkBox",label:"مخفی کردن دکمه مرحله بعد",dfaultValue:n.hideMoveNextButton}),r+='<input type="hidden" name="steps['+t+"].ctrls\" value='"+(i?JSON.stringify(n.panels[0].ctrls):JSON.stringify(getCtrls($("#stepContent_"+n.id))))+"' />",r+="<\/div>",r+"<\/div>"}function addNewStepFD(n){var t="addNewStepModalPPF",r=$(n).closest(".myFormDesigner"),i=r.attr("data-baseUrl"),u=r.attr("id");i&&($("#"+t).length==0&&($("body").append(getModualTemplate({id:t,title:"افزودن استب جدید",ctrls:[{id:"ppfDropdownId",parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",type:"dropDown2",textfield:"title",valuefield:"id",label:"فرم پیشنهاد",name:"fid",isRequired:!0,dataurl:i+"/GetFormList",onChange:'updateStepDD("ppfDropdownId", "'+i+'")'},{id:"ppfDropdownStepId",parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",type:"dropDown",textfield:"title",valuefield:"id",label:"استب",name:"step",isRequired:!0,values:[]}],actions:[{title:"بستن","class":"btn-secondary",onClick:"closeThisModal(this)"},{title:"افزودن","class":"btn-primary",onClick:"addNewStepF(this, '"+u+"')"}]})),executeArrFunctions()),clearForm($("#"+t)),$("#"+t).modal("show"))}function addNewStepF(n,t){var u,i,f,r;t&&n&&(u=getFormData($(n).closest(".modal-content")),i=convertFormDataToJson(u),i&&i.fid&&i.step?(f=JSON.parse(i.step),r=$("#"+t).find(".formDesignerCtrlProperties").find(".holderAllStepsProperty"),r.append(getStepInputTemplateItem(f,r.find(".fdStepItem").length,!0)),executeArrFunctions(),closeThisModal(n)):$.toast({heading:"خطا",text:"لطفا استب را انتخاب کنید",textAlign:"right",position:"bottom-right",showHideTransition:"slide",icon:"error"}))}function updateStepDD(n,t){var i=$("#"+n).closest(".modal-body"),u=getFormData(i),r=convertFormDataToJson(u);t&&r&&r.fid&&r.fid!="null"&&(showLoader(i),postForm(t+"/GetFormJsonConfig",u,function(n){if(n&&n.panels&&n.panels.length==1&&n.panels[0].stepWizards&&n.panels[0].stepWizards.length>0&&n.panels[0].stepWizards[0].steps){var i=n.panels[0].stepWizards[0].steps,t=[];t.push({id:"",title:""});i.forEach(function(n){t.push({id:JSON.stringify(n),title:n.title})});$("#ppfDropdownStepId").closest(".myDropdown").replaceWith(getDropdownCTRLTemplate({id:"ppfDropdownStepId",parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",type:"dropDown",textfield:"title",valuefield:"id",label:"استب",name:"step",isRequired:!0,values:t}));executeArrFunctions()}},null,function(){hideLoader(i)}))}function updateStepsKeys(){$(".formDesignerCtrlProperties").each(function(){var n=0;$(this).find(".fdStepItem").each(function(){$(this).find("[name]").each(function(){var t=$(this).attr("name"),i,r;t.indexOf("[")!=-1&&t.indexOf("]")!=-1&&(i=t.split("[")[0],r=t.split("]")[1],$(this).attr("name",i+"["+n+"]"+r))});n++})})}function removeThisStep(n){n&&($(n).closest(".fdStepItem").remove(),updateStepsKeys())}function getMoveBackButtonToTop(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"moveBackButtonToTop",type:"checkBox",label:"نمایش دکمه بازگشت در بالا ؟",dfaultValue:n.moveBackButtonToTop}),t+"<\/div>"}function getRequiredValidation(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"isRequired",type:"checkBox",label:"اجباری ؟",dfaultValue:n.isRequired}),t+"<\/div>"}function getIsInquiryInput(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"hasInquiry",type:"checkBox",label:" نیاز به استعلام داره ؟",dfaultValue:n.hasInquiry}),t+"<\/div>"}function getIsAgentRequired(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"isAgentRequired",type:"checkBox",label:"انتخاب نماینده اجباریه ؟",dfaultValue:n.isAgentRequired}),t+"<\/div>"}function getIsCompanyListRequired(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"isCompanyListRequired",type:"checkBox",label:"انتخاب شرکت بیمه به صورت چنتایی هست ؟",dfaultValue:n.isCompanyListRequired}),t+"<\/div>"}function getValidationInput(n){var t="";return t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"codeMeli",type:"checkBox",label:"کد ملی؟",dfaultValue:n.nationalCodeValidation}),t+="<\/div>",t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"email",type:"checkBox",label:"ایمیل؟",dfaultValue:hasEmailValidation(n)}),t+="<\/div>",t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"isRequired",type:"checkBox",label:"اجباری ؟",dfaultValue:n.isRequired}),t+="<\/div>",t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getCheckboxButtonTemplate({id:uuidv4RemoveDash(),name:"justNumber",type:"checkBox",label:"فقط عدد؟",dfaultValue:hasJustNumberValidation(n)}),t+="<\/div>",t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getTextBoxTemplate({name:"numberLength",type:"number",label:"تعداد اعداد اجباری",dfaultValue:getNumberLengthValidationNumber(n)}),t+="<\/div>",t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getTextBoxTemplate({name:"maxLength",type:"text",label:"حداکثر کارکتر مجاز",dfaultValue:n.maxLengh}),t+="<\/div>",t+='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getTextBoxTemplate({name:"startWithN",type:"text",label:"شروع شود با",dfaultValue:getStartWithValidationNumber(n)}),t+"<\/div>"}function hasEmailValidation(n){return n&&n.validations?n.validations.filter(function(n){return n.reg=="^\\S+@\\S+\\.\\S+$"}).length>0:!1}function getDefaultInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"dfaultValue",type:"text",label:"مقدار پیش فرض",dfaultValue:n.dfaultValue}),t+"<\/div>"}function getNameInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"inputName",type:"text",label:"نام",dfaultValue:n.name}),t+"<\/div>"}function getMapNameInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"mapName",type:"text",label:"نام",dfaultValue:n.names&&n.names.lat?n.names.lat.substr(0,n.names.lat.length-3):""}),t+"<\/div>"}function getWidthInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"width",type:"text",label:"پهنا",dfaultValue:n.width}),t+"<\/div>"}function getHeightInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"height",type:"text",label:"ارتفاع",dfaultValue:n.height}),t+"<\/div>"}function getAddButtonInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"addTitle",type:"text",label:"عنوان دکمه افزودن",dfaultValue:n.addTitle}),t+"<\/div>"}function getDeleteInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"deleteTitle",type:"text",label:"عنوان دکمه حذف",dfaultValue:n.deleteTitle}),t+"<\/div>"}function getValuesTemplate(n){var t="",i=n.values;return i||(i=[]),t+="<div data-options='"+JSON.stringify(i)+'\' class="col-md-12 col-sm-12 col-xs-12 col-lg-12">',t+=getButtonTemplateWidthLabel({id:uuidv4RemoveDash(),"class":"btn-success btn-block",type:"button",title:"مقادیر",onClick:"showValuesGridModal(this)"}),t+"<\/div>"}function addTIdToArr(n){if(n)for(var t=0;t<n.length;t++)n[t].tId=uuidv4RemoveDash(),n[t].order=t+1}function showValuesGridModal(n){var r=$(n);if(r.closest("[data-options]").length>0){var i=JSON.parse(r.closest("[data-options]").attr("data-options")),u="modal_"+uuidv4RemoveDash(),t="grid_"+uuidv4RemoveDash(),f="modal_"+uuidv4RemoveDash(),e="modal_"+uuidv4RemoveDash();addTIdToArr(i);$("body").append(getModualTemplate({id:u,"class":"modal-lg",title:"مقادیر",modelBody:getGridTemplate({id:t,topActions:[{title:"افزودن",onClick:"showModal('"+f+"', this)"}],isClient:!0,itemPerPage:100,schema:{data:"data",total:"total"},showColumnConfigButton:!0,key:"tId",actions:{cActions:[{template:"function bindRow (curRow) { return '<span onclick=\"showEditModal(\\''+ curRow.tId +'\\', \\'\\', \\'"+e+'\\\' , this, null, null, null, null, true)" style="display:block;" ><i style="color:white!important;" class="fa fa-pen" ><\/i><\/span>\' };bindRow(data)'},{template:'function bindRow (curRow) { return \'<span onclick="deleteThisRowMGridD(\\\'\'+ curRow.tId +\'\\\',this)" style="display:block;" ><i style="color:white!important;" class="fa fa-trash" ><\/i><\/span>\' };bindRow(data)'}]},columns:[{field:"order",caption:"ترتیب",search:{searchType:"text"},sort:!0},{field:"id",caption:"شناسه",search:{searchType:"text"},sort:!0},{field:"title",caption:"عنوان",search:{searchType:"text"},sort:!0}],ds:{data:i,total:i.length}}),actions:[{title:"بستن",onClick:"closeThisModal(this)","class":"btn-secondary"},{title:"ذخیره",onClick:"updateOptions('"+t+"', '"+$(n).attr("id")+"', this)","class":"btn-primary"}]}));$("body").append(getModualTemplate({id:f,title:"افزودن",ctrls:[{parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",name:"order",type:"number",label:"ترتیب نمایش"},{parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",name:"id",type:"text",label:"شناسه"},{parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",name:"title",type:"text",label:"عنوان"}],actions:[{title:"بستن",onClick:"closeThisModal(this)","class":"btn-secondary"},{title:"ذخیره",onClick:"addNewValueToGridForValues(this, '"+t+"')","class":"btn-primary"}]}));$("body").append(getModualTemplate({id:e,title:"ویرایش",ctrls:[{name:"tId",type:"hidden"},{parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",name:"order",type:"number",label:"ترتیب نمایش"},{parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",name:"id",type:"text",label:"شناسه"},{parentCL:"col-md-12 col-sm-12 col-xs-12 col-lg-12",name:"title",type:"text",label:"عنوان"}],actions:[{title:"بستن",onClick:"closeThisModal(this)","class":"btn-secondary"},{title:"ذخیره",onClick:"updateValueToGridForValues(this, '"+t+"')","class":"btn-primary"}]}));executeArrFunctions();$("#"+u).modal("show")}}function updateOptions(n,t,i){var r,u,f;(n,t,i)&&(r=$("#"+n),r.length>0&&(u=r[0].option,u&&(f=r[0].setFiltersAndSorts(u.ds,u,new FormData),$("#"+t).closest("[data-options]").attr("data-options",JSON.stringify(f.data))),closeThisModal(i)))}function deleteThisRowMGridD(n,t){var r,i,u;t&&n&&(r=$(t).closest(".myGridCTRL"),r.length>0&&(i=r[0].option,i&&(u=i.ds.data.filter(function(t){return t.tId!=n}),i.ds.data=u,i.ds.total=u.length),r[0].refreshData()))}function updateValueToGridForValues(n,t){var r,e,u,i,o,f;if(n&&t&&(r=$("#"+t),r.length>0)){if(closeThisModal(n),e=getFormData($(n).closest(".modal-content")),u=r[0].option,u){i={};e.forEach(function(n,t){i[t]=n});o=u.ds.data.filter(function(n){return n.tId==i.tId});for(f in i)o[0][f]=i[f]}r[0].refreshData()}}function addNewValueToGridForValues(n,t){var u,f,i,r;n&&t&&(u=$("#"+t),u.length>0&&(closeThisModal(n),f=getFormData($(n).closest(".modal-content")),i=u[0].option,i&&(r={},f.forEach(function(n,t){r[t]=n}),i.ds.data.push({id:r.id,title:r.title,order:r.order,tId:uuidv4RemoveDash()}),i.ds.total=i.ds.total+1),u[0].refreshData()))}function getSourceUrlTemplate(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"dataurl",type:"text",label:"لینک منبع",dfaultValue:n.dataurl,ltr:!0}),t+"<\/div>"}function getMaskTemplate(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getTextBoxTemplate({name:"mask",type:"text",label:"ماسک",dfaultValue:n.mask}),t+"<\/div>"}function getValidExtensionTemplate(n,t){var i='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return i+=getTokennCTRLTemplate({name:"acceptEx",type:"tokenBox",label:"پسوند مورد قبول",textfield:"title",valuefield:"id",values:[{id:"",title:""},{id:".jpg",title:"jpg"},{id:".png",title:"png"},{id:".jpeg",title:"jpeg"},{title:"pdf",id:".pdf"},{title:"doc",id:".doc"},{title:"docx",id:".docx"},{title:"xls",id:".xls"},{title:"xlsx",id:".xlsx"}]}),i+="<\/div>",n.acceptEx&&functionsList.push(function(){bindForm({acceptEx:this.foundConfig.acceptEx.split(",")},this.quirySelector)}.bind({quirySelector:t,foundConfig:n})),i}function getSizeInput(n){var t='<div class="col-md-12 col-sm-12 col-xs-12 col-lg-12">';return t+=getDropdownCTRLTemplate({name:"size",type:"dropDown",label:"اندازه",dfaultValue:n.parentCL,textfield:"title",valuefield:"id",values:[{id:"col-md-4 col-sm-6 col-xs-12 col-lg-3",title:"یک سوم سطر(یک چهارم سطر)"},{id:"col-md-4 col-sm-6 col-xs-12 col-lg-4",title:"یک سوم سطر"},{id:"col-md-3 col-sm-3 col-xs-12 col-lg-3",title:"یک چهارم سطر"},{id:"col-md-9 col-sm-9 col-xs-12 col-lg-9",title:"سه چهارم سطر"},{id:"col-md-6 col-sm-6 col-xs-12 col-lg-6",title:"نصف سطر"},{id:"col-md-12 col-sm-12 col-xs-12 col-lg-12",title:"کل سطر"}]}),t+"<\/div>"}function hasJustNumberValidation(n){var i=!1,t;if(n&&n.validations)for(t=0;t<n.validations.length;t++)if(n.validations[t].reg=="^[0-9]*$"){i=!0;break}return i}function getStartWithValidationNumber(n){for(var i="",t=0;n.validations&&t<n.validations.length;t++)if(/\^\([\w]+\)/.test(n.validations[t].reg)){i=n.validations[t].reg.split("^(")[1].split(")")[0];break}return i}function getNumberLengthValidationNumber(n){for(var i="",t=0;n.validations&&t<n.validations.length;t++)if(n.validations[t].reg.indexOf("^([0-9]){")>-1&&n.validations[t].reg.indexOf("}$")>-1){i=n.validations[t].reg.split("^([0-9]){")[1].split("}$")[0];break}return i}var isEditModeActive=!1,curMouseMove=null,whatToDoAfterSecoundSelect=null;