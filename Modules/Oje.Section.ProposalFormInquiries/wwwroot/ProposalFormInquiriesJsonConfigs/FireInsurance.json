{
  "panels": [
    {
      "id": "searchPanel",
      "title": "استعلام آتش سوزی",
      "stepWizards": [
        {
          "lastStepButtonTitle": "استعلام",
          "actionOnLastStep": [
            {
              "actionName": "showModal",
              "objectId": "gridModal"
            },
            {
              "actionName": "refreshGrid",
              "objectId": "userGrid"
            }
          ],
          "steps": [
            {
              "order": 1,
              "id": "provinceAndCity",
              "title": "شهر و استان",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12",
                      "id": "provinceId",
                      "name": "provinceId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/Core/BaseData/GetProvinceList",
                      "label": "استان",
                      "childId": "cityId",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12",
                      "id": "cityId",
                      "name": "cityId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/Core/BaseData/GetCityList",
                      "label": "شهر",
                      "isRequired": true
                    }
                  ]
                }
              ]
            },
            {
              "order": 2,
              "id": "valueStep",
              "title": "ارزش",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12",
                      "id": "eachUnitPrice",
                      "name": "value",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/FireInsurance/GetBuildingUnitList",
                      "label": "ارزش هر متر مربع",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "name": "metrazh",
                      "type": "text",
                      "label": "متراژ بنا",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "name": "assetValue",
                      "type": "text",
                      "label": "لوازم منزل (ریال)",
                      "isRequired": true
                    }
                  ]
                }
              ]
            },
            {
              "order": 3,
              "id": "buildingInfo",
              "title": "مشخصات ساختمان",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12",
                      "id": "buildingType",
                      "name": "typeId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/FireInsurance/GetBuildingTypeList",
                      "label": "نوع ساختمان",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12",
                      "id": "buildingBodyType",
                      "name": "bodyId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/FireInsurance/GetBuildingBodyTypeList",
                      "label": "نوع اسکلت",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-xl-3 col-lg-4 col-md-6 col-sm-6 col-xs-12",
                      "id": "buildingAge",
                      "name": "buildingAge",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/FireInsurance/GetBuildingAgeList",
                      "label": "سن بنا",
                      "isRequired": true
                    }
                  ]
                }
              ]
            },
            {
              "order": 4,
              "id": "exteraQuestion",
              "title": "روش پرداخت",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "showStatus",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/Core/BaseData/Get/PriceDiscountStatus",
                      "label": "انتخاب روش پرداخت",
                      "name": "showStatus",
                      "isRequired": true
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "responsePanel",

      "moduals": [
        {
          "class": "modal-xl",
          "id": "gridModal",
          "title": "استعلام",
          "panels": [
            {
              "grids": [
                {
                  "id": "userGrid",
                  "exteraSearchIds": [ "searchPanel" ],
                  "exteraFilterModalId": "gridFilterModal",
                  "showColumnConfigButton": true,
                  "key": "id",
                  "url": "/ProposalFormInquiries/FireInsurance/Inquiry",
                  "itemPerPage": 10,
                  "schema": {
                    "data": "data",
                    "total": "total"
                  },
                  "actions": {
                    "cActions": [
                      {
                        "type": "newLink",
                        "url": "/ProposalFilledForm/Proposal/Form?fn=CreateCarThirdParty&id=",
                        "icon": "fa-cart-plus",
                        "prop": "id",
                        "template": "function bindRow (curRow) { return '<a target=\"_blank\" href=\"'+ curRow.targetArea +'/Proposal/Form?fid='+ curRow.fid +'&inquiryId='+ curRow.id +'\" style=\"display:block;\" ><i style=\"color:white!important;\" class=\"fa fa-cart-plus\" ></i></a>' };bindRow(data)"
                      }
                    ]
                  },
                  "columns": [
                    {
                      "field": "row",
                      "caption": "ردیف",
                      "width": "50px",
                      "textAlign": "center"
                    },
                    {
                      "field": "cn",
                      "caption": "شرکت"
                    },
                    {
                      "field": "p",
                      "caption": "حق بیمه پایه"
                    },
                    {
                      "field": "sp",
                      "caption": "حق بیمه قابل پرداخت"
                    }
                  ],
                  "detailesClientSchema": "dt",
                  "detailes": {
                    "id": "detailesGrid",
                    "key": "id",
                    "itemPerPage": 10,
                    "isClient": true,
                    "schema": {
                      "data": "data",
                      "total": "total"
                    },
                    "columns": [
                      {
                        "field": "t",
                        "caption": "عنوان"
                      },
                      {
                        "field": "p",
                        "caption": "مبلغ"
                      },
                      {
                        "field": "isET",
                        "caption": "وضعیت"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "class": "modal-xl",
          "id": "gridFilterModal",
          "title": "جستجو",
          "ctrls": [
            {
              "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
              "name": "comIds",
              "type": "tokenBox",
              "textfield": "title",
              "valuefield": "id",
              "dataurl": "/ProposalFormInquiries/FireInsurance/GetCompanyListGridFilter",
              "label": "شرکت"
            },
            {
              "parentCL": "col-xl-3 col-lg-3 col-md-4 col-sm-4 col-xs-12",
              "name": "dayLimitation",
              "type": "dropDown",
              "textfield": "title",
              "valuefield": "id",
              "dataurl": "/ProposalFormInquiries/FireInsurance/GetValidDayForGridFilter",
              "label": "خرید بیمه نامه روزانه"
            },
            {
              "parentCL": "col-xl-3 col-lg-3 col-md-4 col-sm-4 col-xs-12",
              "name": "discountContractId",
              "type": "dropDown",
              "textfield": "title",
              "valuefield": "id",
              "dataurl": "/ProposalFormInquiries/FireInsurance/GetValidContractForGrid",
              "label": "تخفیف تفاهم نامه"
            },
            {
              "parentCL": "col-xl-3 col-lg-3 col-md-4 col-sm-4 col-xs-12",
              "name": "discountCode",
              "type": "text",
              "label": "کد تخفیف"
            },
            {
              "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
              "id": "holderDynamicCtrls",
              "type": "dynamiCtrls",
              "dataurl": "/ProposalFormInquiries/FireInsurance/GetExteraFilters"
            }
          ],
          "actions": [
            {
              "title": "بستن",
              "onClick": "closeThisModal(this)",
              "class": "btn-secondary"
            },
            {
              "title": "جستجو",
              "onClick": "refreshGrid('userGrid', this)",
              "class": "btn-primary"
            }
          ]
        }
      ]
    }
  ]
}