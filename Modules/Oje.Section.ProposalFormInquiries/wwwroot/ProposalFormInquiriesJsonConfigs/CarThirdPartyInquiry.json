{
  "panels": [
    {
      "id": "searchPanel",
      "title": "استعلام ثالث",
      "stepWizards": [
        {
          "lastStepButtonTitle": "استعلام",
          "fistStepButtonTitle": "بدون استعلام ادامه میدم",
          "actionOnLastStep": [
            {
              "actionName": "showModal",
              "objectId": "gridModal"
            },
            {
              "actionName": "refreshGrid",
              "objectId": "userGrid"
            }
          ],
          "steps": [
            {
              "order": 0,
              "id": "firstStep",
              "title": "استعلام پلاک خودرو",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "type": "carPlaque",
                      "name": "plaque"
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "name": "nationalCode",
                      "type": "text",
                      "label": "کد ملی"
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "class": "btn-primary btn-block",
                      "type": "button",
                      "title": "استعلام سابقه",
                      "onClick": "alert('وب سرویس پیاده سازی نشده')"
                    }
                  ]
                }
              ]
            },
            {
              "order": 2,
              "id": "firstStep",
              "title": "شرکت بیمه نامه قبل",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "havePrevInsurance",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCompanyList",
                      "label": "بیمه نامه سال قبل",
                      "name": "havePrevInsurance",
                      "showHideCondation": [
                        {
                          "value": "",
                          "classHide": [ "startAndEndDate", "isNewCalDD" ],
                          "isDefault": true
                        },
                        {
                          "value": "0",
                          "classShow": [ "isNewCalDD" ],
                          "classHide": [ "startAndEndDate" ]
                        },
                        {
                          "value": "!0",
                          "classShow": [ "startAndEndDate" ],
                          "classHide": [ "isNewCalDD" ]
                        }
                      ],
                      "isRequired": true,
                      "dynamicCtrlConfig": {
                        "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetRequiredQuestions",
                        "css": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                        "targetCtrlId": "showStatus",
                        "ctrlIds": [
                          {
                            "ctrlId": "vehicleTypeId",
                            "postName": "vehicleTypeId"
                          },
                          {
                            "ctrlId": "havePrevInsurance",
                            "postName": "havePrevInsurance"
                          },
                          {
                            "ctrlId": "isNewCar",
                            "postName": "isNewCar"
                          }
                        ]
                      }
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "isNewCar",
                      "type": "dropDown",
                      "class": "isNewCalDD",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/Core/BaseData/Get/YesOrNo",
                      "label": "آیا خودرو صفر کیلومتر است",
                      "name": "isNewCar",
                      "isRequired": true,
                      "dynamicCtrlConfig": {
                        "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetRequiredQuestions",
                        "css": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                        "targetCtrlId": "showStatus",
                        "ctrlIds": [
                          {
                            "ctrlId": "vehicleTypeId",
                            "postName": "vehicleTypeId"
                          },
                          {
                            "ctrlId": "havePrevInsurance",
                            "postName": "havePrevInsurance"
                          },
                          {
                            "ctrlId": "isNewCar",
                            "postName": "isNewCar"
                          }
                        ]
                      }
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "name": "prevStartDate",
                      "class": "startAndEndDate",
                      "type": "persianDateTime",
                      "label": "تاریخ شروع بیمه نامه قبل",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "name": "prevEndDate",
                      "class": "startAndEndDate",
                      "type": "persianDateTime",
                      "label": "تاریخ اتمام بیمه نامه قبلی",
                      "isRequired": true
                    }
                  ]
                }
              ]
            },
            {
              "order": 1,
              "id": "secoundStep",
              "title": "نوع و کاربری خودرو",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "vehicleTypeId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetVehicleTypeList",
                      "changeOtherCtrLabel": [
                        {
                          "url": "/ProposalFormInquiries/CarThirdPartyInquiry/GetSpecCatTitle",
                          "targetCtrlId": "specId",
                          "titleSchema": "title"
                        }
                      ],
                      "clearInputsOnChange": [ "brandId", "specId" ],
                      "label": "نوع خودرو",
                      "name": "vehicleTypeId",
                      "isRequired": true,
                      "childId": "carTypeId"
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "carTypeId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCarTypeList",
                      "label": "کاربری خودرو",
                      "name": "carTypeId",
                      "isRequired": true
                    }
                  ]
                }
              ]
            },
            {
              "order": 1.1,
              "id": "secoundStep",
              "title": "برند و سال ساخت",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "brandId",
                      "type": "dropDown2",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCarBrandList",
                      "label": "برند خودرو",
                      "name": "brandId",
                      "isRequired": true,
                      "exteraParameterIds": [ "vehicleTypeId" ]
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "specId",
                      "type": "dropDown2",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCarSpecList",
                      "label": "مدل",
                      "name": "specId",
                      "isRequired": true,
                      "exteraParameterIds": [ "brandId", "vehicleTypeId" ]
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "createYear",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCreateDateList",
                      "label": "سال ساخت",
                      "name": "createYear",
                      "isRequired": true
                    }
                  ]
                }
              ]
            },
            {
              "order": 3,
              "id": "penaltyQuestions",
              "title": "سابقه خسارت ها",
              "showCondation": [
                {
                  "id": "havePrevInsurance",
                  "operator": "!=",
                  "value": "0"
                },
                {
                  "id": "havePrevInsurance",
                  "operator": "!=",
                  "value": ""
                }
              ],
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "bodyDamageHistoryId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetThirdPartyBodyHistoryDamagePenaltyList",
                      "label": "سابقه خسارت جانی",
                      "name": "bodyDamageHistoryId",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "financialDamageHistoryId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetThirdPartyFinancialHistoryDamagePenaltyList",
                      "label": "سابقه خسارت مالی",
                      "name": "financialDamageHistoryId",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "driverDamageHistoryId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetDriverDamageHistoryList",
                      "label": "سابقه خسارت راننده",
                      "name": "driverDamageHistoryId",
                      "isRequired": true
                    }
                  ]
                }
              ]
            },
            {
              "order": 3.1,
              "id": "discountQuestions",
              "title": "سابقه عدم خسارت ها",
              "showCondation": [
                {
                  "id": "havePrevInsurance",
                  "operator": "!=",
                  "value": "0"
                },
                {
                  "id": "havePrevInsurance",
                  "operator": "!=",
                  "value": ""
                }
              ],
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "bodyNoDamagePercentId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetBodyNoDamageDiscountList",
                      "label": "درصد عدم خسارت جانی",
                      "name": "bodyNoDamagePercentId",
                      "isRequired": true
                    },
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "driverNoDamageDiscountHistory",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetDriverNoDamageDiscountHistoryList",
                      "label": "درصد عدم خسارت راننده",
                      "name": "driverNoDamageDiscountHistory",
                      "isRequired": true
                    }
                  ]
                }
              ]
            },
            {
              "order": 4,
              "id": "exteraQuestion",
              "title": "سوالات اضافی",
              "panels": [
                {
                  "ctrls": [
                    {
                      "parentCL": "col-md-4 col-sm-6 col-xs-12 col-lg-3",
                      "id": "showStatus",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/Core/BaseData/Get/PriceDiscountStatus",
                      "label": "انتخاب روش پرداخت",
                      "name": "showStatus",
                      "isRequired": true
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "responsePanel",
      "moduals": [
        {
          "class": "modal-xl makeModalMinH100 myContainer",
          "id": "gridModal",
          "title": "استعلام",
          "panels": [
            {
              "ctrls": [
                {
                  "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                  "id": "holderDynamicCtrls",
                  "type": "dynamiCtrls",
                  "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetExteraFilters",
                  "otherCtrls": [
                    "havePrevInsurance",
                    "isNewCar",
                    "brandId"
                  ]
                }
              ]
            },
            {
              "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12 onlyMobile600T",
              "ePanels": [
                {
                  "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12",
                  "title": "مدت زمانه بیمه نامه",
                  "ctrls": [
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "dayLimitation",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetValidDayForGridFilter",
                      "label": "خرید بیمه نامه روزانه",
                      "onChange": "refreshGrid('userGrid')"
                    }
                  ]
                },
                {
                  "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12",
                  "title": "تخفیفات",
                  "ctrls": [
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "discountContractId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetValidContractForGrid",
                      "label": "تخفیف تفاهم نامه",
                      "onChange": "refreshGrid('userGrid')"
                    },
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "discountCode",
                      "type": "text",
                      "label": "کد تخفیف",
                      "onChange": "refreshGrid('userGrid')"
                    },
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "title": "اعمال کد تخفیف",
                      "class": "btn-block btn-primary",
                      "onClick": "",
                      "type": "button"
                    }
                  ]
                }
              ]
            },
            {
              "class": "inquiryModalRightFilter",
              "ctrls": [
                {
                  "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 multiSelectLineMakeSmallVersion",
                  "name": "coverIds",
                  "type": "multiSelectLine",
                  "textfield": "title",
                  "valuefield": "id",
                  "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCommitmentGridFilterShortTitle",
                  "label": "تعهد مالی",
                  "onChange": "refreshGrid('userGrid')"
                }
              ],
              "ePanels": [
                {
                  "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12",
                  "title": "مدت زمانه بیمه نامه",
                  "ctrls": [
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "dayLimitation",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetValidDayForGridFilter",
                      "label": "خرید بیمه نامه روزانه",
                      "onChange": "refreshGrid('userGrid')"
                    }
                  ]
                },
                {
                  "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12",
                  "title": "تعهد مالی انتخابی",
                  "ctrls": [
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "coverIds",
                      "type": "multiSelectLine",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCommitmentGridFilter",
                      "label": "سقف جبران خسارت های مالی",
                      "onChange": "refreshGrid('userGrid')"
                    }
                  ]
                },
                {
                  "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12",
                  "title": "تخفیفات",
                  "ctrls": [
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "discountContractId",
                      "type": "dropDown",
                      "textfield": "title",
                      "valuefield": "id",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetValidContractForGrid",
                      "label": "تخفیف تفاهم نامه",
                      "onChange": "refreshGrid('userGrid')"
                    },
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "discountCode",
                      "type": "text",
                      "label": "کد تخفیف",
                      "onChange": "refreshGrid('userGrid')"
                    },
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "title": "اعمال کد تخفیف",
                      "class": "btn-block btn-primary",
                      "onClick": "",
                      "type": "button"
                    }
                  ]
                },
                {
                  "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12",
                  "title": "مقایسه شرکت ها",
                  "ctrls": [
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "comIds",
                      "type": "multiSelectImg",
                      "textfield": "title",
                      "valuefield": "id",
                      "imgfield": "src",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCompanyListGridFilter",
                      "label": "جستجو در شرکت های بیمه",
                      "onChange": "refreshGrid('userGrid')"
                    }
                  ]
                }
              ]
            },
            {
              "class": "inquiryModalLeftFilter",
              "grids": [
                {
                  "class": "thirdPartyGridConvertToCard",
                  "id": "userGrid",
                  "exteraSearchIds": [ "searchPanel" ],
                  "key": "id",
                  "url": "/ProposalFormInquiries/CarThirdPartyInquiry/Inquiry",
                  "itemPerPage": 1000,
                  "schema": {
                    "data": "data",
                    "total": "total"
                  },
                  "actions": {
                    "cActions": [
                      {
                        "type": "newLink",
                        "url": "/ProposalFilledForm/Proposal/Form?fn=CarBody&id=",
                        "icon": "fa-cart-plus",
                        "prop": "id",
                        "template": "function bindRow (curRow) { return '<a target=\"_blank\" href=\"'+ curRow.targetArea +'/Proposal/Form?fid='+ curRow.fid +'&inquiryId='+ curRow.id +'\" style=\"display:block;\" ><i style=\"color:white!important;\" class=\"fa fa-cart-plus\" ></i></a>' };bindRow(data)"
                      }
                    ]
                  },
                  "formatters": {
                    "imgTemplate": "'<img alt=\"'+ data.cn +'\" src=\"'+ data.sr +'\" width=\"64\" height=\"64\" />'",
                    "customeExpandButton": "'<span onClick=\"expandGridThisRow(this)\" class=\"btn btn-block btn-roundMoreGridDetailes\">جزییات بیشتر<i></i></span>'"
                  },
                  "columns": [
                    {
                      "field": "sr",
                      "caption": "تصویر شرکت",
                      "formatter": "imgTemplate"
                    },
                    {
                      "field": "cn",
                      "caption": "شرکت"
                    },
                    {
                      "field": "tmsj",
                      "caption": "تعهد مالی سال جاری"
                    },
                    {
                      "field": "tjsj",
                      "caption": "تعهد جانی سال جاری"
                    },
                    {
                      "field": "trsj",
                      "caption": "عهد راننده سال جاری"
                    },
                    {
                      "field": "expandButton",
                      "caption": " ",
                      "formatter": "customeExpandButton"
                    },
                    {
                      "field": "sp",
                      "caption": "حق بیمه قابل پرداخت"
                    }
                  ],
                  "detailesClientSchema": "dt",
                  "detailes": {
                    "headerTemplate": "<div class=\"gridDetailesHeader\" ><i onclick=\"closeThisDetailes(this)\"></i><span>جزییات استعلام</span></div>",
                    "id": "detailesGrid",
                    "key": "id",
                    "itemPerPage": 1000,
                    "isClient": true,
                    "schema": {
                      "data": "data",
                      "total": "total"
                    },
                    "columns": [
                      {
                        "field": "t",
                        "caption": "عنوان"
                      },
                      {
                        "field": "p",
                        "caption": "مبلغ"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12 onlyMobile600T",
              "ePanels": [
                {
                  "class": "col-md-12 col-sm-12 col-xl-12 col-lg-12 col-xs-12",
                  "title": "مقایسه شرکت ها",
                  "ctrls": [
                    {
                      "parentCL": "col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12",
                      "name": "comIds",
                      "type": "multiSelectImg",
                      "textfield": "title",
                      "valuefield": "id",
                      "imgfield": "src",
                      "dataurl": "/ProposalFormInquiries/CarThirdPartyInquiry/GetCompanyListGridFilter",
                      "label": "جستجو در شرکت های بیمه",
                      "onChange": "refreshGrid('userGrid')"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}